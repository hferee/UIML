<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/hferee/UIML">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="./demo.html"> Demo </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
</div>

<div class="doc">
<a id="lab3"></a><h1 class="section">Environments</h1>


<div class="paragraph"> </div>

  An environment is a multiset of formulas. We rely on stdpp multisets
  mostly for their powerful multiset equivalence tactic.
<div class="paragraph"> </div>

 Notion of wellfoundedness 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Program.Wf.html#"><span class="id" title="library">Coq.Program.Wf</span></a>.<br/>

<br/>
</div>

<div class="doc">
Stdpp implementation of multisets 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">stdpp.gmultiset</span>.<br/>

<br/>
</div>

<div class="doc">
Our propositional formulas, including their countability. 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="ISL.Formulas.html#"><span class="id" title="library">ISL.Formulas</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>.<br/>

<br/>
</div>

<div class="doc">
An environment is defined as a finite multiset of formulas
(in the sense of the stdpp library).
This requires decidable equality and countability of the underlying set. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="env" class="idref" href="#env"><span class="id" title="definition">env</span></a> {<a id="K:1" class="idref" href="#K:1"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} := @<span class="id" title="record">gmultiset</span> (@<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K:1"><span class="id" title="variable">K</span></a>) <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="ISL.Formulas.html#form_count"><span class="id" title="instance">form_count</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singleton" class="idref" href="#singleton"><span class="id" title="instance">singleton</span></a> {<a id="K:2" class="idref" href="#K:2"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} : <span class="id" title="class">Singleton</span> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> (@<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ISL.Environments.html#K:2"><span class="id" title="variable">K</span></a>) := <span class="id" title="instance">gmultiset_singleton</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singletonMS" class="idref" href="#singletonMS"><span class="id" title="instance">singletonMS</span></a> {<a id="K:3" class="idref" href="#K:3"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} : <span class="id" title="class">SingletonMS</span> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="definition">base.singleton</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a> <span class="id" title="definition">empty</span> <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">singleton</span></a> <span class="id" title="definition">union</span> <span class="id" title="definition">intersection</span> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> : <span class="id" title="var">mset</span>.<br/>
<span class="comment">(*&nbsp;useful&nbsp;notations&nbsp;:<br/>
&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"></span>}&nbsp;:&nbsp;singleton<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊎&nbsp;:&nbsp;disjoint&nbsp;union<br/>
&nbsp;&nbsp;&nbsp;\:&nbsp;difference&nbsp;(setminus)<br/>
&nbsp;&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode"></span>}&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode">{[+</span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode">+]}</span>&nbsp;*disjoint*&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊂@&nbsp;:&nbsp;include<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="empty" class="idref" href="#empty"><span class="id" title="definition">empty</span></a> {<a id="K:4" class="idref" href="#K:4"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} := <span class="id" title="notation">∅</span> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ms</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.empty</span>, <span class="id" title="instance">gmultiset_empty</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">multiset_solver</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="71ca1960dd16f5a2fd2bf72245ca13b9" class="idref" href="#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">&quot;</span></a>Γ • φ" := (<span class="id" title="definition">disj_union</span> <span class="id" title="var">Γ</span> (<span class="id" title="definition">base.singletonMS</span> φ)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 105, φ <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="GeneralEnvironments" class="idref" href="#GeneralEnvironments"><span class="id" title="section">GeneralEnvironments</span></a>.<br/>
<span class="id" title="keyword">Context</span> {<a id="GeneralEnvironments.K" class="idref" href="#GeneralEnvironments.K"><span class="id" title="variable">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_elem_of" class="idref" href="#proper_elem_of"><span class="id" title="instance">proper_elem_of</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(=)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> <a id="y:7" class="idref" href="#y:7"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="ISL.Environments.html#x:6"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ISL.Environments.html#y:7"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a>) <span class="id" title="definition">elem_of</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> φ φ' <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_disj_union" class="idref" href="#proper_disj_union"><span class="id" title="instance">proper_disj_union</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Δ'</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_env_add" class="idref" href="#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a> (<a id="d5be501d00a8c9c4c28302f544699b7d" class="idref" href="#d5be501d00a8c9c4c28302f544699b7d"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="d0ef999d5cf1ae64cfccc412cd27a7cb" class="idref" href="#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="binder">φ</span></a> : <span class="id" title="definition">elements</span>(<a class="idref" href="ISL.Environments.html#d5be501d00a8c9c4c28302f544699b7d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="variable">φ</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="ISL.Environments.html#d0ef999d5cf1ae64cfccc412cd27a7cb"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#d5be501d00a8c9c4c28302f544699b7d"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">gmultiset_elements_disj_union</span> <span class="id" title="var">Γ</span>).<br/>
<span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Sorting.Permutation.html#Permutation_cons_append"><span class="id" title="lemma">Permutation_cons_append</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h2 class="section">Multiset utilities</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="multeq_meq" class="idref" href="#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a> (<a id="M:10" class="idref" href="#M:10"><span class="id" title="binder">M</span></a> <a id="N:11" class="idref" href="#N:11"><span class="id" title="binder">N</span></a>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:10"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:11"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#M:10"><span class="id" title="variable">M</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="ISL.Environments.html#N:11"><span class="id" title="variable">N</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">multiset_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_mult" class="idref" href="#diff_mult"><span class="id" title="lemma">diff_mult</span></a> (<a id="M:13" class="idref" href="#M:13"><span class="id" title="binder">M</span></a> <a id="N:14" class="idref" href="#N:14"><span class="id" title="binder">N</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="x:15" class="idref" href="#x:15"><span class="id" title="binder">x</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:15"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#M:13"><span class="id" title="variable">M</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="ISL.Environments.html#N:14"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:15"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:13"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:15"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:14"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_difference</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_mult" class="idref" href="#union_mult"><span class="id" title="lemma">union_mult</span></a> (<a id="M:16" class="idref" href="#M:16"><span class="id" title="binder">M</span></a> <a id="N:17" class="idref" href="#N:17"><span class="id" title="binder">N</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="x:18" class="idref" href="#x:18"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:18"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#M:16"><span class="id" title="variable">M</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#N:17"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:18"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:16"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:18"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:17"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_disj_union</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_in" class="idref" href="#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a> <a id="x:19" class="idref" href="#x:19"><span class="id" title="binder">x</span></a> <a id="y:20" class="idref" href="#y:20"><span class="id" title="binder">y</span></a>: <a class="idref" href="ISL.Environments.html#x:19"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#y:20"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:19"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[+</span> <a class="idref" href="ISL.Environments.html#y:20"><span class="id" title="variable">y</span></a> <span class="id" title="notation">+]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_notin" class="idref" href="#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a> <a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a> <a id="y:22" class="idref" href="#y:22"><span class="id" title="binder">y</span></a>: <a class="idref" href="ISL.Environments.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ISL.Environments.html#y:22"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:21"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#y:22"><span class="id" title="variable">y</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton_ne</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Two&nbsp;useful&nbsp;basic&nbsp;facts&nbsp;about&nbsp;multisets&nbsp;containing&nbsp;(or&nbsp;not)&nbsp;certain&nbsp;elements.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_replace" class="idref" href="#env_replace"><span class="id" title="lemma">env_replace</span></a> {<a id="417529803507aa9a7b30461ccba6fdf8" class="idref" href="#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} <a id="33c8ef2ac05940dc89a8c1627bb5cbd9" class="idref" href="#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="binder">φ</span></a> {<a id="54053db614d8560a9b0fceb78ac56195" class="idref" href="#54053db614d8560a9b0fceb78ac56195"><span class="id" title="binder">ψ</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#54053db614d8560a9b0fceb78ac56195"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#54053db614d8560a9b0fceb78ac56195"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#417529803507aa9a7b30461ccba6fdf8"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#54053db614d8560a9b0fceb78ac56195"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">θ</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>, <a class="idref" href="ISL.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="ISL.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_sub_swap"><span class="id" title="lemma">PeanoNat.Nat.add_sub_swap</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">θ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_not_in" class="idref" href="#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> (<a id="1e846e5538fdc853a2cbe279f179228e" class="idref" href="#1e846e5538fdc853a2cbe279f179228e"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="121d2b861d49b1fcee040f9bfb948b0a" class="idref" href="#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="ISL.Environments.html#1e846e5538fdc853a2cbe279f179228e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#1e846e5538fdc853a2cbe279f179228e"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#121d2b861d49b1fcee040f9bfb948b0a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#1e846e5538fdc853a2cbe279f179228e"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> ψ.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">elem_of_multiplicity</span> φ <span class="id" title="var">Γ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (φ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)).<br/>
- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">multiplicity_singleton_ne</span> ψ φ); <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_remove" class="idref" href="#env_add_remove"><span class="id" title="lemma">env_add_remove</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="6e093fd9af49d42270cd626602782b21" class="idref" href="#6e093fd9af49d42270cd626602782b21"><span class="id" title="binder">Γ</span></a>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="25dbd6aa491e5149679c6579fb0ae954" class="idref" href="#25dbd6aa491e5149679c6579fb0ae954"><span class="id" title="binder">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#6e093fd9af49d42270cd626602782b21"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#25dbd6aa491e5149679c6579fb0ae954"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#25dbd6aa491e5149679c6579fb0ae954"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><a class="idref" href="ISL.Environments.html#6e093fd9af49d42270cd626602782b21"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h2 class="section">Conjunction, disjunction, and implication</h2>
 In the construction of propositional quantifiers, we often want to take the
    conjunction, disjunction, or implication of a (multi)set of formulas.
    The following results give some small optimizations of this process, by
    reducing "obvious" conjunctions such as ⊤ ∧ ϕ, ⊥ ∧ ϕ, etc. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="irreducible" class="idref" href="#irreducible"><span class="id" title="definition">irreducible</span></a> (<a id="a84750bab259aa2f16170b25727bba3f" class="idref" href="#a84750bab259aa2f16170b25727bba3f"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="p:31" class="idref" href="#p:31"><span class="id" title="binder">p</span></a> <a id="3b8401c918370dcb163afeb57378df25" class="idref" href="#3b8401c918370dcb163afeb57378df25"><span class="id" title="binder">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Environments.html#p:31"><span class="id" title="variable">p</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Environments.html#3b8401c918370dcb163afeb57378df25"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a84750bab259aa2f16170b25727bba3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Environments.html#p:31"><span class="id" title="variable">p</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a84750bab259aa2f16170b25727bba3f"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a84750bab259aa2f16170b25727bba3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="b0bb32d01f678d17055964f3e3249188" class="idref" href="#b0bb32d01f678d17055964f3e3249188"><span class="id" title="binder">φ</span></a> <a id="4ec1ce917b9bde490905060cadfd8ac2" class="idref" href="#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="binder">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#b0bb32d01f678d17055964f3e3249188"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Environments.html#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a84750bab259aa2f16170b25727bba3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#b0bb32d01f678d17055964f3e3249188"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Environments.html#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a84750bab259aa2f16170b25727bba3f"><span class="id" title="variable">Γ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_double_negation" class="idref" href="#is_double_negation"><span class="id" title="definition">is_double_negation</span></a> <a id="08d53723a28ac360bf42d325c328970f" class="idref" href="#08d53723a28ac360bf42d325c328970f"><span class="id" title="binder">φ</span></a> <a id="408413c8c4bbc5668231dde0f77682ef" class="idref" href="#408413c8c4bbc5668231dde0f77682ef"><span class="id" title="binder">ψ</span></a> := <a class="idref" href="ISL.Environments.html#08d53723a28ac360bf42d325c328970f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Environments.html#408413c8c4bbc5668231dde0f77682ef"><span class="id" title="variable">ψ</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_double_negation" class="idref" href="#decidable_is_double_negation"><span class="id" title="instance">decidable_is_double_negation</span></a> <a id="e1547d3802f74ec75531c36840a5933f" class="idref" href="#e1547d3802f74ec75531c36840a5933f"><span class="id" title="binder">φ</span></a> <a id="ddd245c1acdcca94398ffd171856d37e" class="idref" href="#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#is_double_negation"><span class="id" title="definition">is_double_negation</span></a> <a class="idref" href="ISL.Environments.html#e1547d3802f74ec75531c36840a5933f"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="variable">ψ</span></a>) := <span class="id" title="definition">decide</span> (φ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> ψ).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_implication" class="idref" href="#is_implication"><span class="id" title="definition">is_implication</span></a> {<a id="K:39" class="idref" href="#K:39"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="60c3b12fe383daa4bb5633e65ebb244b" class="idref" href="#60c3b12fe383daa4bb5633e65ebb244b"><span class="id" title="binder">φ</span></a> <a id="a668d7a8cd3ed1ea85c6a90b9787fe86" class="idref" href="#a668d7a8cd3ed1ea85c6a90b9787fe86"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="be89a72e6aabd2be0116040e9c37ade1" class="idref" href="#be89a72e6aabd2be0116040e9c37ade1"><span class="id" title="binder">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#60c3b12fe383daa4bb5633e65ebb244b"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#be89a72e6aabd2be0116040e9c37ade1"><span class="id" title="variable">θ</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Environments.html#a668d7a8cd3ed1ea85c6a90b9787fe86"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_implication" class="idref" href="#decidable_is_implication"><span class="id" title="instance">decidable_is_implication</span></a> <a id="b21a593cc5a463973aa52c2cb99622b5" class="idref" href="#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="binder">φ</span></a> <a id="b0fd78e0736d8fa21bfd22a8efbaa817" class="idref" href="#b0fd78e0736d8fa21bfd22a8efbaa817"><span class="id" title="binder">ψ</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#is_implication"><span class="id" title="definition">is_implication</span></a> <a class="idref" href="ISL.Environments.html#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#b0fd78e0736d8fa21bfd22a8efbaa817"><span class="id" title="variable">ψ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#is_implication"><span class="id" title="definition">is_implication</span></a>.<br/>
<span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span>[<span class="id" title="tactic">right</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">θ</span> <span class="id" title="var">Hθ</span>]; <span class="id" title="tactic">discriminate</span>].<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (φ2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)).<br/>
- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">right</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">θ</span> <span class="id" title="var">Hθ</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> <span class="id" title="var">Hθ</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_negation" class="idref" href="#is_negation"><span class="id" title="definition">is_negation</span></a> <a id="f18b1995e554784eadfc79cc2a9ca539" class="idref" href="#f18b1995e554784eadfc79cc2a9ca539"><span class="id" title="binder">φ</span></a> <a id="54d43b755ac966af818b133b1f94d485" class="idref" href="#54d43b755ac966af818b133b1f94d485"><span class="id" title="binder">ψ</span></a> := <a class="idref" href="ISL.Environments.html#f18b1995e554784eadfc79cc2a9ca539"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Environments.html#54d43b755ac966af818b133b1f94d485"><span class="id" title="variable">ψ</span></a>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_is_negation" class="idref" href="#decidable_is_negation"><span class="id" title="instance">decidable_is_negation</span></a> <a id="7dc107a216fa9a82cceaed22fa53318b" class="idref" href="#7dc107a216fa9a82cceaed22fa53318b"><span class="id" title="binder">φ</span></a> <a id="4fd80f846eaf9fa01637ca5897562432" class="idref" href="#4fd80f846eaf9fa01637ca5897562432"><span class="id" title="binder">ψ</span></a> : <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#is_negation"><span class="id" title="definition">is_negation</span></a> <a class="idref" href="ISL.Environments.html#7dc107a216fa9a82cceaed22fa53318b"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#4fd80f846eaf9fa01637ca5897562432"><span class="id" title="variable">ψ</span></a>) := <span class="id" title="definition">decide</span> (φ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="ISL.Formulas.html#89335bb7773696a226bf41e8343e6c3f"><span class="id" title="notation">¬</span></a> ψ).<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h2 class="section">A dependent version of `map`</h2>

</div>
<div class="code">
<span class="comment">(*&nbsp;a&nbsp;dependent&nbsp;map&nbsp;on&nbsp;lists,&nbsp;with&nbsp;knowledge&nbsp;that&nbsp;we&nbsp;are&nbsp;on&nbsp;that&nbsp;list&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;should&nbsp;work&nbsp;with&nbsp;any&nbsp;set-like&nbsp;type&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="in_map_aux" class="idref" href="#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> {<a id="A:49" class="idref" href="#A:49"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="893aef7061fe05b037fc27cff76f1e6f" class="idref" href="#893aef7061fe05b037fc27cff76f1e6f"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) (<a id="f:52" class="idref" href="#f:52"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="df3b3e3792d9f92ed8047d8c01cbf6a0" class="idref" href="#df3b3e3792d9f92ed8047d8c01cbf6a0"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#df3b3e3792d9f92ed8047d8c01cbf6a0"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#893aef7061fe05b037fc27cff76f1e6f"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#A:49"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;<a id="4ab9f4b584d573f61c20001cdb2a592a" class="idref" href="#4ab9f4b584d573f61c20001cdb2a592a"><span class="id" title="binder">Γ'</span></a> (<a id="362b512f9693e77e12fd35603b950c9f" class="idref" href="#362b512f9693e77e12fd35603b950c9f"><span class="id" title="binder">HΓ'</span></a> : <a class="idref" href="ISL.Environments.html#4ab9f4b584d573f61c20001cdb2a592a"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="ISL.Environments.html#893aef7061fe05b037fc27cff76f1e6f"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#A:49"><span class="id" title="variable">A</span></a>:=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#4ab9f4b584d573f61c20001cdb2a592a"><span class="id" title="variable">Γ'</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">Γ'</span> =&gt; <a class="idref" href="ISL.Environments.html#f:52"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#in_map_aux:55"><span class="id" title="definition">in_map_aux</span></a> <a class="idref" href="ISL.Environments.html#893aef7061fe05b037fc27cff76f1e6f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:52"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#4ab9f4b584d573f61c20001cdb2a592a"><span class="id" title="variable">Γ'</span></a> <span class="id" title="var">_</span><br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="in_map" class="idref" href="#in_map"><span class="id" title="definition">in_map</span></a> {<a id="A:57" class="idref" href="#A:57"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} <a id="5eea4560b18f98a58cb3519774a6b1ed" class="idref" href="#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="binder">Γ</span></a><br/>
&nbsp;&nbsp;(<a id="f:60" class="idref" href="#f:60"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="f4458642ccf6297f75cb474099f97044" class="idref" href="#f4458642ccf6297f75cb474099f97044"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#f4458642ccf6297f75cb474099f97044"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#A:57"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#A:57"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <a class="idref" href="ISL.Environments.html#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:60"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;generalises&nbsp;to&nbsp;any&nbsp;type.&nbsp;decidability&nbsp;of&nbsp;equality&nbsp;over&nbsp;this&nbsp;type&nbsp;is&nbsp;necessary&nbsp;for&nbsp;a&nbsp;result&nbsp;in&nbsp;"Type"&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_in_map" class="idref" href="#in_in_map"><span class="id" title="lemma">in_in_map</span></a> {<a id="A:61" class="idref" href="#A:61"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:64" class="idref" href="#HD:64"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:62" class="idref" href="#a:62"><span class="id" title="binder">a</span></a> <a id="b:63" class="idref" href="#b:63"><span class="id" title="binder">b</span></a> : <a class="idref" href="ISL.Environments.html#A:61"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#a:62"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#b:63"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;<a id="79e37c9ff12ecc84ba1fac2efe4b1d20" class="idref" href="#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="binder">Γ</span></a> (<a id="f:67" class="idref" href="#f:67"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="8dbfca0eacb4b03140997e7a2bae7595" class="idref" href="#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#8dbfca0eacb4b03140997e7a2bae7595"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#A:61"><span class="id" title="variable">A</span></a>) <a id="4c45780c8cc019940d2d80f01c898c32" class="idref" href="#4c45780c8cc019940d2d80f01c898c32"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#4c45780c8cc019940d2d80f01c898c32"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="ISL.Environments.html#79e37c9ff12ecc84ba1fac2efe4b1d20"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:67"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="b3870e8a118a081fc1c2964d6a10e121" class="idref" href="#b3870e8a118a081fc1c2964d6a10e121"><span class="id" title="binder">ψ0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin:70" class="idref" href="#Hin:70"><span class="id" title="binder">Hin</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#4c45780c8cc019940d2d80f01c898c32"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#f:67"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#b3870e8a118a081fc1c2964d6a10e121"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin:70"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="a27510f842cf27d0b8721a2a83fc6e30" class="idref" href="#a27510f842cf27d0b8721a2a83fc6e30"><span class="id" title="binder"><span id="422d12cd4b6263bab5db4972072012f0" class="id">Γ'</span></span></a> (<a id="36a16bdfa7ba8d89a16861565b45bc7a" class="idref" href="#36a16bdfa7ba8d89a16861565b45bc7a"><span class="id" title="binder"><span id="2a0fc2691c001e1962dd383050fe5c28" class="id">HΓ'</span></span></a> : <a class="idref" href="ISL.Environments.html#a27510f842cf27d0b8721a2a83fc6e30"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span> ψ <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#a27510f842cf27d0b8721a2a83fc6e30"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#36a16bdfa7ba8d89a16861565b45bc7a"><span class="id" title="variable">HΓ'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="a00b461229518091603e0714877ca7b3" class="idref" href="#a00b461229518091603e0714877ca7b3"><span class="id" title="binder"><span id="115d3137d86781ff5a593bec367867ff" class="id">ψ0</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="Hin:74" class="idref" href="#Hin:74"><span class="id" title="binder"><span id="Hin:78" class="id">Hin</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Environments.html#a00b461229518091603e0714877ca7b3"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> ψ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#a00b461229518091603e0714877ca7b3"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin:74"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>); [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span>].<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="var">contradict</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_nil</span>.<br/>
- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">H</span> : ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">HΓ''</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); [| <span class="id" title="tactic">pose</span> (<span class="id" title="var">myHΓ'</span> := <span class="id" title="var">HΓ''</span>)] <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">myHΓ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Definition</span> <a id="in_subset" class="idref" href="#in_subset"><span class="id" title="definition">in_subset</span></a> {<a id="d3a38663d0c0158490276dc8366282f4" class="idref" href="#d3a38663d0c0158490276dc8366282f4"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} {<a id="e3d40cc9fbcf6b6eac595a88eb271d6d" class="idref" href="#e3d40cc9fbcf6b6eac595a88eb271d6d"><span class="id" title="binder">Γ'</span></a>} (<a id="Hi:81" class="idref" href="#Hi:81"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="ISL.Environments.html#e3d40cc9fbcf6b6eac595a88eb271d6d"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#d3a38663d0c0158490276dc8366282f4"><span class="id" title="variable">Γ</span></a>) {<a id="68e3bc6aeb30ca0bee63740837b8ed22" class="idref" href="#68e3bc6aeb30ca0bee63740837b8ed22"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:83" class="idref" href="#Hin:83"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.Environments.html#68e3bc6aeb30ca0bee63740837b8ed22"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#e3d40cc9fbcf6b6eac595a88eb271d6d"><span class="id" title="variable">Γ'</span></a>) : <a class="idref" href="ISL.Environments.html#68e3bc6aeb30ca0bee63740837b8ed22"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#d3a38663d0c0158490276dc8366282f4"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span>,<span class="id" title="var">Hi</span>, <span class="id" title="var">Hin</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;converse&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;we&nbsp;require&nbsp;proof&nbsp;irrelevance&nbsp;for&nbsp;the&nbsp;mapped&nbsp;function&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_in" class="idref" href="#in_map_in"><span class="id" title="lemma">in_map_in</span></a> {<a id="A:84" class="idref" href="#A:84"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:87" class="idref" href="#HD:87"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:85" class="idref" href="#a:85"><span class="id" title="binder">a</span></a> <a id="b:86" class="idref" href="#b:86"><span class="id" title="binder">b</span></a> : <a class="idref" href="ISL.Environments.html#A:84"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#a:85"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#b:86"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;{<a id="97663af12d008dfc98f7e61dde21ee75" class="idref" href="#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="binder">Γ</span></a>} {<a id="f:90" class="idref" href="#f:90"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="b5efc3a648f758b1ca8c887ced227415" class="idref" href="#b5efc3a648f758b1ca8c887ced227415"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#b5efc3a648f758b1ca8c887ced227415"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#A:84"><span class="id" title="variable">A</span></a>} {<a id="42f9981b8f3762eda39f7891993b3197" class="idref" href="#42f9981b8f3762eda39f7891993b3197"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:92" class="idref" href="#Hin:92"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.Environments.html#42f9981b8f3762eda39f7891993b3197"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':93" class="idref" href="#Hin':93"><span class="id" title="binder">Hin'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#f:90"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#42f9981b8f3762eda39f7891993b3197"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin':93"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="ISL.Environments.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:90"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="7f51aa536e7a2b456fa495de46ba5659" class="idref" href="#7f51aa536e7a2b456fa495de46ba5659"><span class="id" title="binder"><span id="aa31e028961e2cca9b06a60c2f4faa98" class="id">Γ'</span></span></a> (<a id="4fc1b260a32cafa19ed24686daf328ac" class="idref" href="#4fc1b260a32cafa19ed24686daf328ac"><span class="id" title="binder"><span id="79d19fc7a82add262a1eb63e1969c8a2" class="id">HΓ'</span></span></a> : <a class="idref" href="ISL.Environments.html#7f51aa536e7a2b456fa495de46ba5659"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="var">Γ</span>) <a id="669d61c0b897a6d994b4546c0a636fbe" class="idref" href="#669d61c0b897a6d994b4546c0a636fbe"><span class="id" title="binder"><span id="4bf28efe0b7d277b3126cbc97f4d7c86" class="id">ψ0</span></span></a> (<a id="Hin:97" class="idref" href="#Hin:97"><span class="id" title="binder"><span id="Hin:102" class="id">Hin</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ISL.Environments.html#669d61c0b897a6d994b4546c0a636fbe"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#7f51aa536e7a2b456fa495de46ba5659"><span class="id" title="variable">Γ'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':98" class="idref" href="#Hin':98"><span class="id" title="binder"><span id="Hin':103" class="id">Hin'</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#669d61c0b897a6d994b4546c0a636fbe"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin':98"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#7f51aa536e7a2b456fa495de46ba5659"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#4fc1b260a32cafa19ed24686daf328ac"><span class="id" title="variable">HΓ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>).<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> ψ' <span class="id" title="var">Hin'</span>; [<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin''</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ψ' <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hincl</span> := (<a class="idref" href="ISL.Environments.html#in_map_aux_obligation_2"><span class="id" title="lemma">in_map_aux_obligation_2</span></a> <span class="id" title="var">Γ</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ'</span>) <span class="id" title="var">HΓ'</span> <span class="id" title="var">a</span> <span class="id" title="var">Γ'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">Hincl</span> ψ' <span class="id" title="var">Hin''</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin0</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprop</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hcut</span> <span class="id" title="var">Γ</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">Γ</span>) ψ0) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin'</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hprop</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_empty" class="idref" href="#in_map_empty"><span class="id" title="lemma">in_map_empty</span></a> <a id="A:104" class="idref" href="#A:104"><span class="id" title="binder">A</span></a> <a id="f:105" class="idref" href="#f:105"><span class="id" title="binder">f</span></a> : @<a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="ISL.Environments.html#A:104"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ISL.Environments.html#f:105"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_ext" class="idref" href="#in_map_ext"><span class="id" title="lemma">in_map_ext</span></a> {<a id="A:106" class="idref" href="#A:106"><span class="id" title="binder">A</span></a>} <a id="4be74ba61845d5afc1ddd33b3d7f9ba3" class="idref" href="#4be74ba61845d5afc1ddd33b3d7f9ba3"><span class="id" title="binder">Δ</span></a> <a id="f:108" class="idref" href="#f:108"><span class="id" title="binder">f</span></a> <a id="g:109" class="idref" href="#g:109"><span class="id" title="binder">g</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="3eef8f004764afcbdf10416d3842b1a5" class="idref" href="#3eef8f004764afcbdf10416d3842b1a5"><span class="id" title="binder">φ</span></a> <a id="H:111" class="idref" href="#H:111"><span class="id" title="binder">H</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#f:108"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#3eef8f004764afcbdf10416d3842b1a5"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#H:111"><span class="id" title="variable">H</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#g:109"><span class="id" title="variable">g</span></a> <a class="idref" href="ISL.Environments.html#3eef8f004764afcbdf10416d3842b1a5"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#H:111"><span class="id" title="variable">H</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="ISL.Environments.html#A:106"><span class="id" title="variable">A</span></a> <a class="idref" href="ISL.Environments.html#4be74ba61845d5afc1ddd33b3d7f9ba3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#f:108"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a> <a class="idref" href="ISL.Environments.html#4be74ba61845d5afc1ddd33b3d7f9ba3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#g:109"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#in_map"><span class="id" title="definition">in_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="notation">forall</span> <a id="eb67d32a8b8852c5012353beb716761f" class="idref" href="#eb67d32a8b8852c5012353beb716761f"><span class="id" title="binder"><span id="23ab5ed32668b5e43a79a9e7f0f8314c" class="id">Γ</span></span></a> <a id="f3a7a9a7bd9de58f659ebbdc47af3b73" class="idref" href="#f3a7a9a7bd9de58f659ebbdc47af3b73"><span class="id" title="binder"><span id="d37e12db4922269da5d08dd88d722ecc" class="id">HΓ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#eb67d32a8b8852c5012353beb716761f"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="ISL.Environments.html#f3a7a9a7bd9de58f659ebbdc47af3b73"><span class="id" title="variable">HΓ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#in_map_aux"><span class="id" title="definition">in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">g</span> <a class="idref" href="ISL.Environments.html#eb67d32a8b8852c5012353beb716761f"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="ISL.Environments.html#f3a7a9a7bd9de58f659ebbdc47af3b73"><span class="id" title="variable">HΓ</span></a>); [|<span class="id" title="tactic">trivial</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HΓ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>, <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_singleton" class="idref" href="#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> (<a id="5de2cbc586e4c05bbc583847532b590b" class="idref" href="#5de2cbc586e4c05bbc583847532b590b"><span class="id" title="binder">Δ</span></a>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="deb6122a46e3b6ef2acd918391eed828" class="idref" href="#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5de2cbc586e4c05bbc583847532b590b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#5de2cbc586e4c05bbc583847532b590b"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#5de2cbc586e4c05bbc583847532b590b"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="notation">{[</span>φ<span class="id" title="notation">]}</span>) <span class="id" title="tactic">at</span> 1. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_in_add" class="idref" href="#env_in_add"><span class="id" title="lemma">env_in_add</span></a> (<a id="d88596c37c823f121469a4fc8512e4df" class="idref" href="#d88596c37c823f121469a4fc8512e4df"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="09e3f9389e7459f0374dab12d2256465" class="idref" href="#09e3f9389e7459f0374dab12d2256465"><span class="id" title="binder">ϕ</span></a> <a id="65211ad4a43d322b9923e57a03ef0e6d" class="idref" href="#65211ad4a43d322b9923e57a03ef0e6d"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Environments.html#65211ad4a43d322b9923e57a03ef0e6d"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#d88596c37c823f121469a4fc8512e4df"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#09e3f9389e7459f0374dab12d2256465"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ISL.Environments.html#65211ad4a43d322b9923e57a03ef0e6d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#09e3f9389e7459f0374dab12d2256465"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ISL.Environments.html#65211ad4a43d322b9923e57a03ef0e6d"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#d88596c37c823f121469a4fc8512e4df"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="var">Δ</span>), <span class="id" title="lemma">gmultiset_elem_of_singleton</span>.<br/>
<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equiv_disj_union_compat_r" class="idref" href="#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> {<a id="e50a66ed72ab25cb744b64f121d7df7f" class="idref" href="#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="binder">Δ</span></a> <a id="0df0704c33dda487ad58f92f173be70e" class="idref" href="#0df0704c33dda487ad58f92f173be70e"><span class="id" title="binder">Δ'</span></a> <a id="a075167ad91086f349553254147109fc" class="idref" href="#a075167ad91086f349553254147109fc"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} : <a class="idref" href="ISL.Environments.html#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#a075167ad91086f349553254147109fc"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#0df0704c33dda487ad58f92f173be70e"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#a075167ad91086f349553254147109fc"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#0df0704c33dda487ad58f92f173be70e"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_comm" class="idref" href="#env_add_comm"><span class="id" title="lemma">env_add_comm</span></a> (<a id="eb29824735e1f9ad082baf0e09460d8c" class="idref" href="#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="2243be9c1ec54be702c0f99ca3b9346e" class="idref" href="#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="binder">φ</span></a> <a id="46d787a72ed38ff0fae08d18f15dda64" class="idref" href="#46d787a72ed38ff0fae08d18f15dda64"><span class="id" title="binder">ϕ</span></a> : <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#46d787a72ed38ff0fae08d18f15dda64"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#46d787a72ed38ff0fae08d18f15dda64"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_difference" class="idref" href="#in_difference"><span class="id" title="lemma">in_difference</span></a> (<a id="a381ac5dd37e5f2f96f42ac915b2250c" class="idref" href="#a381ac5dd37e5f2f96f42ac915b2250c"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="3058349f6b0230257fdc67afc38b6f93" class="idref" href="#3058349f6b0230257fdc67afc38b6f93"><span class="id" title="binder">φ</span></a> <a id="548804bb5d0bd40b81f4d5f69eb83129" class="idref" href="#548804bb5d0bd40b81f4d5f69eb83129"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Environments.html#3058349f6b0230257fdc67afc38b6f93"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="ISL.Environments.html#548804bb5d0bd40b81f4d5f69eb83129"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#3058349f6b0230257fdc67afc38b6f93"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a381ac5dd37e5f2f96f42ac915b2250c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#3058349f6b0230257fdc67afc38b6f93"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a381ac5dd37e5f2f96f42ac915b2250c"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#548804bb5d0bd40b81f4d5f69eb83129"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hne</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elem_of</span>, <span class="id" title="instance">gmultiset_elem_of</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">multiplicity_difference</span> <span class="id" title="var">Δ</span> <span class="id" title="notation">{[</span>ψ<span class="id" title="notation">]}</span> φ).<br/>
<span class="id" title="tactic">assert</span>( <span class="id" title="var">HH</span> := <span class="id" title="lemma">multiplicity_singleton_ne</span> φ ψ <span class="id" title="var">Hne</span>).<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singletonMS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singleton</span>, <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">in_difference</span> : <span class="id" title="var">multiset</span>.<br/>

<br/>
<span class="comment">(*&nbsp;could&nbsp;be&nbsp;used&nbsp;in&nbsp;disj_inv&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv" class="idref" href="#env_add_inv"><span class="id" title="lemma">env_add_inv</span></a> (<a id="6d5a25013c15bde3ab5fe007c2c81f34" class="idref" href="#6d5a25013c15bde3ab5fe007c2c81f34"><span class="id" title="binder">Γ</span></a> <a id="99450b96743eb709d2f3f4df5737b39e" class="idref" href="#99450b96743eb709d2f3f4df5737b39e"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="7daa287e528036c696860f585d8407e3" class="idref" href="#7daa287e528036c696860f585d8407e3"><span class="id" title="binder">φ</span></a> <a id="077ba5021d186e45e9af61ed03dc1ecb" class="idref" href="#077ba5021d186e45e9af61ed03dc1ecb"><span class="id" title="binder">ψ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#7daa287e528036c696860f585d8407e3"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="ISL.Environments.html#077ba5021d186e45e9af61ed03dc1ecb"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#6d5a25013c15bde3ab5fe007c2c81f34"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#7daa287e528036c696860f585d8407e3"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#99450b96743eb709d2f3f4df5737b39e"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#077ba5021d186e45e9af61ed03dc1ecb"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#99450b96743eb709d2f3f4df5737b39e"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#6d5a25013c15bde3ab5fe007c2c81f34"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#077ba5021d186e45e9af61ed03dc1ecb"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#7daa287e528036c696860f585d8407e3"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ISL.Environments.html#env_replace"><span class="id" title="lemma">env_replace</span></a>.<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">assert</span>(ψ <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span>); [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>|]; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv'" class="idref" href="#env_add_inv'"><span class="id" title="lemma">env_add_inv'</span></a> (<a id="784d768ae6e85e0848ed43b713b18d98" class="idref" href="#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="binder">Γ</span></a> <a id="960b0010c3d226187d1d7d6e915cf177" class="idref" href="#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="5760bdd276ff6e346f323b938fd7bb58" class="idref" href="#5760bdd276ff6e346f323b938fd7bb58"><span class="id" title="binder">φ</span></a>: <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#5760bdd276ff6e346f323b938fd7bb58"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#5760bdd276ff6e346f323b938fd7bb58"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_equiv_eq" class="idref" href="#env_equiv_eq"><span class="id" title="lemma">env_equiv_eq</span></a> (<a id="c91bc42e648d459a7dfac8df37a90ce6" class="idref" href="#c91bc42e648d459a7dfac8df37a90ce6"><span class="id" title="binder">Γ</span></a> <a id="f4d65b6bcd05efc58bcca9e0e74193a2" class="idref" href="#f4d65b6bcd05efc58bcca9e0e74193a2"><span class="id" title="binder">Γ'</span></a> :<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="ISL.Environments.html#c91bc42e648d459a7dfac8df37a90ce6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="ISL.Environments.html#f4d65b6bcd05efc58bcca9e0e74193a2"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#c91bc42e648d459a7dfac8df37a90ce6"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="ISL.Environments.html#f4d65b6bcd05efc58bcca9e0e74193a2"><span class="id" title="variable">Γ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;reprove&nbsp;the&nbsp;following&nbsp;principles,&nbsp;proved&nbsp;in&nbsp;stdpp&nbsp;for&nbsp;Prop,&nbsp;but<br/>
&nbsp;&nbsp;&nbsp;we&nbsp;need&nbsp;them&nbsp;in&nbsp;Type&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_choose_or_empty" class="idref" href="#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> (<a id="X:139" class="idref" href="#X:139"><span class="id" title="binder">X</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="x:140" class="idref" href="#x:140"><span class="id" title="binder">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#x:140"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#X:139"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><a class="idref" href="ISL.Environments.html#X:139"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">HX</span>; [<span class="id" title="tactic">right</span>|<span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">gmultiset_elem_of_elements</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;need&nbsp;this&nbsp;induction&nbsp;principle&nbsp;in&nbsp;type.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_rec" class="idref" href="#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a> (<a id="P:141" class="idref" href="#P:141"><span class="id" title="binder">P</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#P:141"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:142" class="idref" href="#x:142"><span class="id" title="binder">x</span></a> <a id="X:143" class="idref" href="#X:143"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#P:141"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#X:143"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Environments.html#P:141"><span class="id" title="variable">P</span></a> (<span class="id" title="notation">{[+</span> <a class="idref" href="ISL.Environments.html#x:142"><span class="id" title="variable">x</span></a> <span class="id" title="notation">+]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#X:143"><span class="id" title="variable">X</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="X:144" class="idref" href="#X:144"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#P:141"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#X:144"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hemp</span> <span class="id" title="var">Hinsert</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="lemma">gmultiset_wf</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.Environments.html#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>]| -&gt;]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference'</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinsert</span>, <span class="id" title="var">IH</span>; <span class="id" title="var">multiset_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_include" class="idref" href="#difference_include"><span class="id" title="lemma">difference_include</span></a> <a id="45ebcae18439f764311d26f232223a5a" class="idref" href="#45ebcae18439f764311d26f232223a5a"><span class="id" title="binder">θ</span></a> <a id="b7ce1eb4f5bae5af002021be0a052584" class="idref" href="#b7ce1eb4f5bae5af002021be0a052584"><span class="id" title="binder">θ'</span></a> (<a id="aed4eed4a6bfe3fa5b31e534b43b7e93" class="idref" href="#aed4eed4a6bfe3fa5b31e534b43b7e93"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#b7ce1eb4f5bae5af002021be0a052584"><span class="id" title="variable">θ'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#aed4eed4a6bfe3fa5b31e534b43b7e93"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#45ebcae18439f764311d26f232223a5a"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#aed4eed4a6bfe3fa5b31e534b43b7e93"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#b7ce1eb4f5bae5af002021be0a052584"><span class="id" title="variable">θ'</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#45ebcae18439f764311d26f232223a5a"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#aed4eed4a6bfe3fa5b31e534b43b7e93"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <span class="id" title="notation">{[</span><span class="id" title="var">θ'</span><span class="id" title="notation">]}</span>).<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span>. <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="rm" class="idref" href="#rm"><span class="id" title="definition">rm</span></a> <a id="x:148" class="idref" href="#x:148"><span class="id" title="binder">x</span></a> <a id="l:149" class="idref" href="#l:149"><span class="id" title="binder">l</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#l:149"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="ISL.Environments.html#x:148"><span class="id" title="variable">x</span></a> <span class="id" title="var">h</span> <span class="id" title="keyword">then</span> <span class="id" title="var">t</span> <span class="id" title="keyword">else</span> <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm:150"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Environments.html#x:148"><span class="id" title="variable">x</span></a> <span class="id" title="var">t</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_rm" class="idref" href="#in_rm"><span class="id" title="lemma">in_rm</span></a> <a id="l:152" class="idref" href="#l:152"><span class="id" title="binder">l</span></a> <a id="x:153" class="idref" href="#x:153"><span class="id" title="binder">x</span></a> <a id="y:154" class="idref" href="#y:154"><span class="id" title="binder">y</span></a>: <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ISL.Environments.html#x:153"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Environments.html#y:154"><span class="id" title="variable">y</span></a> <a class="idref" href="ISL.Environments.html#l:152"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ISL.Environments.html#x:153"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#l:152"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>. <span class="id" title="tactic">tauto</span>. <span class="id" title="tactic">firstorder</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="remove_include" class="idref" href="#remove_include"><span class="id" title="lemma">remove_include</span></a> <a id="8db6539793676f5b4e2d1f39115347c2" class="idref" href="#8db6539793676f5b4e2d1f39115347c2"><span class="id" title="binder">θ</span></a> <a id="c78a33484e24002eee1c4741fa0fa5ce" class="idref" href="#c78a33484e24002eee1c4741fa0fa5ce"><span class="id" title="binder">θ'</span></a> <a id="865702c63590ceb5264a037d192ae87e" class="idref" href="#865702c63590ceb5264a037d192ae87e"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#c78a33484e24002eee1c4741fa0fa5ce"><span class="id" title="variable">θ'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#865702c63590ceb5264a037d192ae87e"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#8db6539793676f5b4e2d1f39115347c2"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Environments.html#c78a33484e24002eee1c4741fa0fa5ce"><span class="id" title="variable">θ'</span></a> <a class="idref" href="ISL.Environments.html#865702c63590ceb5264a037d192ae87e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#8db6539793676f5b4e2d1f39115347c2"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#865702c63590ceb5264a037d192ae87e"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="ISL.Environments.html#in_rm"><span class="id" title="lemma">in_rm</span></a>, <span class="id" title="lemma">elem_of_list_In</span>, <span class="id" title="var">Hin</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;technical&nbsp;lemma&nbsp;:&nbsp;one&nbsp;can&nbsp;constructively&nbsp;find&nbsp;whether&nbsp;an&nbsp;environment&nbsp;contains<br/>
&nbsp;&nbsp;&nbsp;an&nbsp;element&nbsp;satisfying&nbsp;a&nbsp;decidable&nbsp;property&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="decide_in" class="idref" href="#decide_in"><span class="id" title="lemma">decide_in</span></a> (<a id="P:158" class="idref" href="#P:158"><span class="id" title="binder">P</span></a> : <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="00fa08a48618f45bbe35fe42185c5c1e" class="idref" href="#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="e95d2176f352825d7e1918b1fec3e227" class="idref" href="#e95d2176f352825d7e1918b1fec3e227"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#e95d2176f352825d7e1918b1fec3e227"><span class="id" title="variable">φ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="3aeabcdef85378301bd7dac2876ce8f8" class="idref" href="#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="binder">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Environments.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><span class="id" title="notation">forall</span> <a id="e97778aaf3d88fd5578b5ed988982285" class="idref" href="#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Environments.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#e97778aaf3d88fd5578b5ed988982285"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> φ <span class="id" title="var">H</span>φ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>φ.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHΓ</span> <span class="id" title="keyword">as</span> [(φ&amp;<span class="id" title="var">H</span>φ) | <span class="id" title="var">HF</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> (<span class="id" title="var">HP</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_L" class="idref" href="#union_difference_L"><span class="id" title="lemma">union_difference_L</span></a> (<a id="e13fd54a03223b3dca3e4ccd9cb6b4d8" class="idref" href="#e13fd54a03223b3dca3e4ccd9cb6b4d8"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="1eeb063a6a89022fd6e8e0bf026382c2" class="idref" href="#1eeb063a6a89022fd6e8e0bf026382c2"><span class="id" title="binder">Δ</span></a> <a id="7b0573bd76c9c70a871d13a7486d2b6d" class="idref" href="#7b0573bd76c9c70a871d13a7486d2b6d"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="ISL.Environments.html#7b0573bd76c9c70a871d13a7486d2b6d"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#e13fd54a03223b3dca3e4ccd9cb6b4d8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#e13fd54a03223b3dca3e4ccd9cb6b4d8"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#1eeb063a6a89022fd6e8e0bf026382c2"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#7b0573bd76c9c70a871d13a7486d2b6d"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#e13fd54a03223b3dca3e4ccd9cb6b4d8"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#7b0573bd76c9c70a871d13a7486d2b6d"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#1eeb063a6a89022fd6e8e0bf026382c2"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_R" class="idref" href="#union_difference_R"><span class="id" title="lemma">union_difference_R</span></a> (<a id="612ccdfb9614510cc025f5f344f765fe" class="idref" href="#612ccdfb9614510cc025f5f344f765fe"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="9d5d9d68a105d672888ae8b6d728ac51" class="idref" href="#9d5d9d68a105d672888ae8b6d728ac51"><span class="id" title="binder">Δ</span></a> <a id="468f3ed1f673bb158c41d688e33914ee" class="idref" href="#468f3ed1f673bb158c41d688e33914ee"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="ISL.Environments.html#468f3ed1f673bb158c41d688e33914ee"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#9d5d9d68a105d672888ae8b6d728ac51"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#612ccdfb9614510cc025f5f344f765fe"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#9d5d9d68a105d672888ae8b6d728ac51"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#468f3ed1f673bb158c41d688e33914ee"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#612ccdfb9614510cc025f5f344f765fe"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#9d5d9d68a105d672888ae8b6d728ac51"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#468f3ed1f673bb158c41d688e33914ee"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="equiv_assoc" class="idref" href="#equiv_assoc"><span class="id" title="instance">equiv_assoc</span></a> : @<span class="id" title="class">Assoc</span> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <span class="id" title="definition">equiv</span> <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_difference" class="idref" href="#proper_difference"><span class="id" title="instance">proper_difference</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">difference</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="var_not_in_env" class="idref" href="#var_not_in_env"><span class="id" title="definition">var_not_in_env</span></a> <a id="p:169" class="idref" href="#p:169"><span class="id" title="binder">p</span></a> (<a id="cf9ed6d8a61ce68e821384f5f41630c7" class="idref" href="#cf9ed6d8a61ce68e821384f5f41630c7"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>):=  (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="0afafa8ea5dc6012c19cc5e5af5938ba" class="idref" href="#0afafa8ea5dc6012c19cc5e5af5938ba"><span class="id" title="binder">φ0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#0afafa8ea5dc6012c19cc5e5af5938ba"><span class="id" title="variable">φ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#cf9ed6d8a61ce68e821384f5f41630c7"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#p:169"><span class="id" title="variable">p</span></a> <a class="idref" href="ISL.Environments.html#0afafa8ea5dc6012c19cc5e5af5938ba"><span class="id" title="variable">φ0</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h2 class="section">Tactics</h2>

</div>
<div class="code">
<span class="comment">(*&nbsp;helper&nbsp;tactic&nbsp;split&nbsp;cases&nbsp;given&nbsp;an&nbsp;assumption&nbsp;about&nbsp;belonging&nbsp;to&nbsp;a&nbsp;multiset&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Environments.html#GeneralEnvironments"><span class="id" title="section">GeneralEnvironments</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Ltac</span> <span class="id" title="var">in_tac</span> :=<br/>
<span class="id" title="tactic">repeat</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ1</span><span class="id" title="notation">;</span> ?<span class="id" title="var">θ2</span><span class="id" title="notation">]}</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">Δ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ'</span><span class="id" title="notation">]}</span><span class="id" title="notation">)</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">d</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> ?<span class="id" title="var">θ2</span><span class="id" title="notation">)</span>] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Environments.html#env_in_add"><span class="id" title="lemma">env_in_add</span></a> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span> ?<span class="id" title="var">θ2</span> <span class="id" title="notation">]}</span>] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Immediate</span> <span class="id" title="var">equiv_assoc</span> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="open_box" class="idref" href="#open_box"><span class="id" title="definition">open_box</span></a> {<a id="K:172" class="idref" href="#K:172"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="209c60abc07683d3d9901701a49716bf" class="idref" href="#209c60abc07683d3d9901701a49716bf"><span class="id" title="binder">φ</span></a> : @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K:172"><span class="id" title="variable">K</span></a>) : @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K:172"><span class="id" title="variable">K</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#209c60abc07683d3d9901701a49716bf"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ =&gt; <a class="idref" href="ISL.Environments.html#209c60abc07683d3d9901701a49716bf"><span class="id" title="variable">φ</span></a><br/>
| φ =&gt; <a class="idref" href="ISL.Environments.html#209c60abc07683d3d9901701a49716bf"><span class="id" title="variable">φ</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;inefficient&nbsp;conversion&nbsp;from&nbsp;multisets&nbsp;to&nbsp;lists&nbsp;and&nbsp;back&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="open_boxes" class="idref" href="#open_boxes"><span class="id" title="definition">open_boxes</span></a> {<a id="K:175" class="idref" href="#K:175"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="dd29608376d32c01cb947fcc1b16b126" class="idref" href="#dd29608376d32c01cb947fcc1b16b126"><span class="id" title="binder">Γ</span></a> : @<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ISL.Environments.html#K:175"><span class="id" title="variable">K</span></a>) : @<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="ISL.Environments.html#K:175"><span class="id" title="variable">K</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#dd29608376d32c01cb947fcc1b16b126"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="324ee050da821ba5ae035c28136d140a" class="idref" href="#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">&quot;</span></a>⊙ φ" := (<a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> φ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>
<span class="id" title="keyword">Notation</span> <a id="ea7b322b05c6af494383fa784c2b0124" class="idref" href="#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">&quot;</span></a>⊗ Γ" := (<a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="var">Γ</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Modal" class="idref" href="#Modal"><span class="id" title="section">Modal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> {<a id="Modal.K" class="idref" href="#Modal.K"><span class="id" title="variable">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_open_boxes" class="idref" href="#proper_open_boxes"><span class="id" title="instance">proper_open_boxes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_empty" class="idref" href="#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a> : <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_disj_union" class="idref" href="#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> <a id="dc1356b602fe68110656293f361bcd12" class="idref" href="#dc1356b602fe68110656293f361bcd12"><span class="id" title="binder">Γ</span></a> <a id="a5864ddeb9f164c613bec934bdcd6f16" class="idref" href="#a5864ddeb9f164c613bec934bdcd6f16"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> (<a class="idref" href="ISL.Environments.html#dc1356b602fe68110656293f361bcd12"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#a5864ddeb9f164c613bec934bdcd6f16"><span class="id" title="variable">Δ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#dc1356b602fe68110656293f361bcd12"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#a5864ddeb9f164c613bec934bdcd6f16"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_elements_disj_union</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span>).<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_to_set_disj_app</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_singleton" class="idref" href="#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> <a id="6bac152cec15c49a478e72b6363d6ced" class="idref" href="#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <a class="idref" href="ISL.Environments.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elements</span>, <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singleton</span>, <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singletonMS</span>, <span class="id" title="definition">disj_union</span>, <a class="idref" href="ISL.Environments.html#empty"><span class="id" title="definition">empty</span></a>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="instance">gmultiset_disj_union_right_id</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_add" class="idref" href="#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a> (<a id="bec8080d891bb4c9bb44cd1cc5bbd275" class="idref" href="#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="ed4c3056bb7f869b700b4c5e0f0a3a40" class="idref" href="#ed4c3056bb7f869b700b4c5e0f0a3a40"><span class="id" title="binder">φ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#ed4c3056bb7f869b700b4c5e0f0a3a40"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ISL.Environments.html#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <a class="idref" href="ISL.Environments.html#ed4c3056bb7f869b700b4c5e0f0a3a40"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Definition</span> <a id="f_inj" class="idref" href="#f_inj"><span class="id" title="definition">f_inj</span></a> {<a id="K:183" class="idref" href="#K:183"><span class="id" title="binder">K</span></a> <a id="K':184" class="idref" href="#K':184"><span class="id" title="binder">K'</span></a>: <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} {<a id="T:185" class="idref" href="#T:185"><span class="id" title="binder">T</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Type</span>} (<a id="Heq:186" class="idref" href="#Heq:186"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="ISL.Environments.html#K:183"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#K':184"><span class="id" title="variable">K'</span></a>) (<a id="913bbde52bc9d7d991fadd990a5309bb" class="idref" href="#913bbde52bc9d7d991fadd990a5309bb"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#T:185"><span class="id" title="variable">T</span></a> <a class="idref" href="ISL.Environments.html#K:183"><span class="id" title="variable">K</span></a>) : <a class="idref" href="ISL.Environments.html#T:185"><span class="id" title="variable">T</span></a> <a class="idref" href="ISL.Environments.html#K':184"><span class="id" title="variable">K'</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="ISL.Environments.html#K:183"><span class="id" title="variable">K</span></a> <a class="idref" href="ISL.Environments.html#T:185"><span class="id" title="variable">T</span></a> <a class="idref" href="ISL.Environments.html#913bbde52bc9d7d991fadd990a5309bb"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#K':184"><span class="id" title="variable">K'</span></a> <a class="idref" href="ISL.Environments.html#Heq:186"><span class="id" title="variable">Heq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Definition</span> <a id="env_inj" class="idref" href="#env_inj"><span class="id" title="definition">env_inj</span></a> {<a id="K:188" class="idref" href="#K:188"><span class="id" title="binder">K</span></a> <a id="K':189" class="idref" href="#K':189"><span class="id" title="binder">K'</span></a>: <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="Heq:190" class="idref" href="#Heq:190"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="ISL.Environments.html#K:188"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#K':189"><span class="id" title="variable">K'</span></a>) (<a id="d:191" class="idref" href="#d:191"><span class="id" title="binder">d</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (@<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K:188"><span class="id" title="variable">K</span></a>)) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (@<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K':189"><span class="id" title="variable">K'</span></a>)<br/>
:= (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="ISL.Environments.html#K:188"><span class="id" title="variable">K</span></a> (<span class="id" title="keyword">fun</span> <a id="K:192" class="idref" href="#K:192"><span class="id" title="binder">K</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (@<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#K:192"><span class="id" title="variable">K</span></a>)) <a class="idref" href="ISL.Environments.html#d:191"><span class="id" title="variable">d</span></a> <a class="idref" href="ISL.Environments.html#K':189"><span class="id" title="variable">K'</span></a> <a class="idref" href="ISL.Environments.html#Heq:190"><span class="id" title="variable">Heq</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_open_boxes" class="idref" href="#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> (<a id="eb7268b0da21ab7daacc576665020d5f" class="idref" href="#eb7268b0da21ab7daacc576665020d5f"><span class="id" title="binder">φ</span></a> : @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#Modal.K"><span class="id" title="variable">K</span></a>) <a id="ab032aca30289cebbfa2dca39d95aff5" class="idref" href="#ab032aca30289cebbfa2dca39d95aff5"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#eb7268b0da21ab7daacc576665020d5f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="ISL.Environments.html#ab032aca30289cebbfa2dca39d95aff5"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#eb7268b0da21ab7daacc576665020d5f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#ab032aca30289cebbfa2dca39d95aff5"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="HK:195" class="idref" href="#HK:195"><span class="id" title="binder">HK</span></a> : <a class="idref" href="ISL.Environments.html#Modal.K"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#f_inj"><span class="id" title="definition">f_inj</span></a> <a class="idref" href="ISL.Environments.html#HK:195"><span class="id" title="variable">HK</span></a> <a class="idref" href="ISL.Environments.html#eb7268b0da21ab7daacc576665020d5f"><span class="id" title="variable">φ</span></a><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">)</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#f_inj"><span class="id" title="definition">f_inj</span></a> <a class="idref" href="ISL.Environments.html#HK:195"><span class="id" title="variable">HK</span></a> <a class="idref" href="ISL.Environments.html#ab032aca30289cebbfa2dca39d95aff5"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">θ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>] <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">auto</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hθ</span> | <span class="id" title="var">HΔ</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> φ. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">ms</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">HΔ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span> | [<span class="id" title="var">HK</span> <span class="id" title="var">Heq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">HK</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_open_boxes" class="idref" href="#occurs_in_open_boxes"><span class="id" title="lemma">occurs_in_open_boxes</span></a> <a id="x:196" class="idref" href="#x:196"><span class="id" title="binder">x</span></a> (<a id="2316fe99f045f0569a9e0cd032c88614" class="idref" href="#2316fe99f045f0569a9e0cd032c88614"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) <a id="93f6336e81fff8ee2c80caf15acb00a7" class="idref" href="#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:196"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#2316fe99f045f0569a9e0cd032c88614"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#2316fe99f045f0569a9e0cd032c88614"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="ISL.Environments.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="f94f32fca807046d77dc0fc3d6173d28" class="idref" href="#f94f32fca807046d77dc0fc3d6173d28"><span class="id" title="binder">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#f94f32fca807046d77dc0fc3d6173d28"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:196"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#f94f32fca807046d77dc0fc3d6173d28"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>φ <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>φ|[<span class="id" title="var">HK</span> <span class="id" title="var">H</span>φ]]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#f_inj"><span class="id" title="definition">f_inj</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_map_open_box" class="idref" href="#occurs_in_map_open_box"><span class="id" title="lemma">occurs_in_map_open_box</span></a> <a id="x:200" class="idref" href="#x:200"><span class="id" title="binder">x</span></a> (<a id="0b81a37303376dce96a1a7978229992f" class="idref" href="#0b81a37303376dce96a1a7978229992f"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) <a id="788a31649f3eaaf49bc9643027f6db3d" class="idref" href="#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:200"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#0b81a37303376dce96a1a7978229992f"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#0b81a37303376dce96a1a7978229992f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="ISL.Environments.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="55a0c4765bbb21b11f88bb3a581b3ef5" class="idref" href="#55a0c4765bbb21b11f88bb3a581b3ef5"><span class="id" title="binder">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#55a0c4765bbb21b11f88bb3a581b3ef5"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:200"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#55a0c4765bbb21b11f88bb3a581b3ef5"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>φ <span class="id" title="keyword">as</span> [ψ [<span class="id" title="var">H</span>φ <span class="id" title="var">Hin</span>]]; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="tactic">exists</span> ψ. <span class="id" title="tactic">split</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> ψ; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_remove" class="idref" href="#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a> <a id="4528c44f6a9a8b29b3b50e8b6265970b" class="idref" href="#4528c44f6a9a8b29b3b50e8b6265970b"><span class="id" title="binder">Γ</span></a> <a id="ed9fce029c1304a1c20a6716fcc8e5d5" class="idref" href="#ed9fce029c1304a1c20a6716fcc8e5d5"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#ed9fce029c1304a1c20a6716fcc8e5d5"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#4528c44f6a9a8b29b3b50e8b6265970b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <span class="id" title="notation">(⊗</span> <span class="id" title="notation">(</span><span class="id" title="notation">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[φ]}))</span> <span class="id" title="notation">((⊗</span> <span class="id" title="notation">Γ</span><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[⊙</span> <span class="id" title="notation">φ]})</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> φ <span class="id" title="var">Hin</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>  <span class="id" title="tactic">at</span> 2.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_box" class="idref" href="#is_box"><span class="id" title="definition">is_box</span></a> (<a id="361dc4dd02400eb70497f808bfe3ab8e" class="idref" href="#361dc4dd02400eb70497f808bfe3ab8e"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#361dc4dd02400eb70497f808bfe3ab8e"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_not_box_open_box" class="idref" href="#is_not_box_open_box"><span class="id" title="lemma">is_not_box_open_box</span></a> <a id="5491936cc5eac4cc68fc1e9208491f26" class="idref" href="#5491936cc5eac4cc68fc1e9208491f26"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="ISL.Environments.html#5491936cc5eac4cc68fc1e9208491f26"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a><a class="idref" href="ISL.Environments.html#5491936cc5eac4cc68fc1e9208491f26"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#5491936cc5eac4cc68fc1e9208491f26"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> φ; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">discriminate</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_spec'" class="idref" href="#open_boxes_spec'"><span class="id" title="lemma">open_boxes_spec'</span></a> <a id="21e98b4c4dad7c214c9e9d952f07989c" class="idref" href="#21e98b4c4dad7c214c9e9d952f07989c"><span class="id" title="binder">Γ</span></a> <a id="bc84a5e32bc7f48df597a58b30bca812" class="idref" href="#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#21e98b4c4dad7c214c9e9d952f07989c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="ISL.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="HK:211" class="idref" href="#HK:211"><span class="id" title="binder">HK</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Environments.html#Modal.K"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Environments.html#f_inj"><span class="id" title="definition">f_inj</span></a> <a class="idref" href="ISL.Environments.html#HK:211"><span class="id" title="variable">HK</span></a> <a class="idref" href="ISL.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#f_inj"><span class="id" title="definition">f_inj</span></a> <a class="idref" href="ISL.Environments.html#HK:211"><span class="id" title="variable">HK</span></a> <a class="idref" href="ISL.Environments.html#21e98b4c4dad7c214c9e9d952f07989c"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#bc84a5e32bc7f48df597a58b30bca812"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#21e98b4c4dad7c214c9e9d952f07989c"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> [[<span class="id" title="var">Hin</span> <span class="id" title="var">Heq</span>] | [<span class="id" title="var">HK</span> <span class="id" title="var">Hin</span>]];<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span>, <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>.<br/>
- <span class="id" title="tactic">exists</span> φ. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#is_not_box_open_box"><span class="id" title="lemma">is_not_box_open_box</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>,  <span class="id" title="lemma">gmultiset_elem_of_elements</span>.<br/>
- <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> (<a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>,  <span class="id" title="lemma">gmultiset_elem_of_elements</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="In_open_boxes" class="idref" href="#In_open_boxes"><span class="id" title="lemma">In_open_boxes</span></a> (<a id="5a8dc7e3a6d5df1731c8d68c52569ee1" class="idref" href="#5a8dc7e3a6d5df1731c8d68c52569ee1"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="bba34f20cf25aef66479b20c2c650241" class="idref" href="#bba34f20cf25aef66479b20c2c650241"><span class="id" title="binder">φ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#bba34f20cf25aef66479b20c2c650241"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5a8dc7e3a6d5df1731c8d68c52569ee1"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="ISL.Environments.html#bba34f20cf25aef66479b20c2c650241"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#5a8dc7e3a6d5df1731c8d68c52569ee1"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>,  <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="Proper_elements" class="idref" href="#Proper_elements"><span class="id" title="instance">Proper_elements</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡ₚ)</span>) ((<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="cbb8026ca4570b0fe105459ae2f2dbb5" class="idref" href="#cbb8026ca4570b0fe105459ae2f2dbb5"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="instance">gmultiset_elements</span> <a class="idref" href="ISL.Environments.html#cbb8026ca4570b0fe105459ae2f2dbb5"><span class="id" title="variable">Γ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">apply</span> <span class="id" title="instance">AntiSymm_instance_0</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_submseteq</span>; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_open_boxes" class="idref" href="#elements_open_boxes"><span class="id" title="lemma">elements_open_boxes</span></a> <a id="28c45abaa76414f8959c23cb3a19ee26" class="idref" href="#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="binder">Γ</span></a>: <span class="id" title="definition">elements</span> (<a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ISL.Environments.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="var">remember</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heql</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">l</span>].<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">gmultiset_elements_disj_union</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">gmultiset_elements_singleton</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_env_add" class="idref" href="#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <a id="8bdeaee5f38e966f72c7833a02f5d52c" class="idref" href="#8bdeaee5f38e966f72c7833a02f5d52c"><span class="id" title="binder">Δ</span></a> <a id="v:217" class="idref" href="#v:217"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="ISL.Environments.html#8bdeaee5f38e966f72c7833a02f5d52c"><span class="id" title="variable">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#v:217"><span class="id" title="variable">v</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#v:217"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#8bdeaee5f38e966f72c7833a02f5d52c"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_rm" class="idref" href="#list_to_set_disj_rm"><span class="id" title="lemma">list_to_set_disj_rm</span></a> <a id="5dfc2c668a03609b13e69f6cacddbc32" class="idref" href="#5dfc2c668a03609b13e69f6cacddbc32"><span class="id" title="binder">Δ</span></a> <a id="v:219" class="idref" href="#v:219"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="ISL.Environments.html#5dfc2c668a03609b13e69f6cacddbc32"><span class="id" title="variable">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#v:219"><span class="id" title="variable">v</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Environments.html#v:219"><span class="id" title="variable">v</span></a> <a class="idref" href="ISL.Environments.html#5dfc2c668a03609b13e69f6cacddbc32"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>]; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">case</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHΔ</span>. <span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">v</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set_disj</span> <span class="id" title="var">Δ</span>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span>)).<br/>
- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#union_difference_R"><span class="id" title="lemma">union_difference_R</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_elements_list_to_set_disj" class="idref" href="#gmultiset_elements_list_to_set_disj"><span class="id" title="lemma">gmultiset_elements_list_to_set_disj</span></a> (<a id="l:220" class="idref" href="#l:220"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="instance">gmultiset_elements</span>(<span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="ISL.Environments.html#l:220"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">≡ₚ</span> <a class="idref" href="ISL.Environments.html#l:220"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">x</span> <span class="id" title="var">l</span>]; [<span class="id" title="var">ms</span>|].<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#Proper_elements"><span class="id" title="instance">Proper_elements</span></a>; [|<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a>].<br/>
<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ISL.Environments.html#elements_env_add"><span class="id" title="lemma">elements_env_add</span></a>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_to_set_disj_open_boxes" class="idref" href="#list_to_set_disj_open_boxes"><span class="id" title="lemma">list_to_set_disj_open_boxes</span></a> <a id="5f09906f78485ef9771cb96ecf96be8c" class="idref" href="#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="binder">Δ</span></a>: (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> <a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">(</span></a><span class="id" title="definition">list_to_set_disj</span> <a class="idref" href="ISL.Environments.html#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="ISL.Environments.html#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="variable">Δ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="instance">list_to_set_disj_perm</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Sorting.Permutation.html#Permutation_map'"><span class="id" title="instance">Permutation_map'</span></a>, <a class="idref" href="ISL.Environments.html#gmultiset_elements_list_to_set_disj"><span class="id" title="lemma">gmultiset_elements_list_to_set_disj</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Environments.html#Modal"><span class="id" title="section">Modal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">In_open_boxes</span> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="ISL.Environments.html#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="ISL.Environments.html#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a>) : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> (@<a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a>): <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">open_boxes_spec'</span> : <span class="id" title="var">proof</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
