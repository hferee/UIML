<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/hferee/UIML">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="./demo.html"> Demo </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
</div>

<div class="doc">
<a id="lab38"></a><h1 class="section">Simplifications for formulas and contexts</h1>


<div class="paragraph"> </div>

This file defines the main simplifications for formulas and contexts,
maintaining intuitionistic equivalence.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#"><span class="id" title="library">Coq.Classes.RelationClasses</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Sequents.html#"><span class="id" title="library">ISL.Sequents</span></a> <a class="idref" href="ISL.SequentProps.html#"><span class="id" title="library">ISL.SequentProps</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Order.html#"><span class="id" title="library">ISL.Order</span></a> <a class="idref" href="ISL.DecisionProcedure.html#"><span class="id" title="library">ISL.DecisionProcedure</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Cut.html#"><span class="id" title="library">ISL.Cut</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Optimizations.html#"><span class="id" title="library">ISL.Optimizations</span></a>. <span class="comment">(*&nbsp;NB&nbsp;This&nbsp;import&nbsp;must&nbsp;come&nbsp;last.&nbsp;*)</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Simplifications.html#"><span class="id" title="library">ISL.Simplifications</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="S" class="idref" href="#S"><span class="id" title="module">S</span></a> &lt;: <a class="idref" href="ISL.Simplifications.html#SimpT"><span class="id" title="module">SimpT</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab39"></a><h2 class="section">Applicability of rules</h2>


<div class="paragraph"> </div>

  This section provides definitions for checking the applicability of various
  logical rules within a given context (list of formulas).
  The definitions use decidable existence checks to determine if specific
  patterns of formulas are present in the context.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_AndL" class="idref" href="#S.applicable_AndL"><span class="id" title="definition">applicable_AndL</span></a> {<a id="K:1" class="idref" href="#K:1"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="da7a5918a812e0216f4a54d21f7406c4" class="idref" href="#da7a5918a812e0216f4a54d21f7406c4"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="aaf5c9bf07deefd202c722a418ef3cf3" class="idref" href="#aaf5c9bf07deefd202c722a418ef3cf3"><span class="id" title="binder">ψ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="65430dd3f16f8d24b4d54c91daeb455a" class="idref" href="#65430dd3f16f8d24b4d54c91daeb455a"><span class="id" title="binder">ψ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <a class="idref" href="ISL.Simp_env.html#aaf5c9bf07deefd202c722a418ef3cf3"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="ISL.Simp_env.html#65430dd3f16f8d24b4d54c91daeb455a"><span class="id" title="variable">ψ2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#da7a5918a812e0216f4a54d21f7406c4"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="ab0511416d071f20121ac40aa56848d4" class="idref" href="#ab0511416d071f20121ac40aa56848d4"><span class="id" title="binder">ψ1</span></a> <a id="183e2ff7f995f6208261fd8c444df566" class="idref" href="#183e2ff7f995f6208261fd8c444df566"><span class="id" title="binder">ψ2</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <a class="idref" href="ISL.Simp_env.html#ab0511416d071f20121ac40aa56848d4"><span class="id" title="variable">ψ1</span></a> <a class="idref" href="ISL.Simp_env.html#183e2ff7f995f6208261fd8c444df566"><span class="id" title="variable">ψ2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#da7a5918a812e0216f4a54d21f7406c4"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">fA</span> := (<span class="id" title="keyword">fun</span> <a id="e2bc72d4322e2a1b9ff936dc7f806d8a" class="idref" href="#e2bc72d4322e2a1b9ff936dc7f806d8a"><span class="id" title="binder"><span id="f176788ac0942f0bc949ea062f230c37" class="id">θ</span></span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#e2bc72d4322e2a1b9ff936dc7f806d8a"><span class="id" title="variable">θ</span></a> <span class="id" title="keyword">with</span> |<a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="var">fA</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">θ</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hθ</span>) | <span class="id" title="var">Hf</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">fA</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>. 3: { <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:  <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> ψ1 ψ2 <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">subst</span> <span class="id" title="var">fA</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_ImpLVar" class="idref" href="#S.applicable_ImpLVar"><span class="id" title="definition">applicable_ImpLVar</span></a> {<a id="K:11" class="idref" href="#K:11"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="7adcac760179e19a0bb37c9e1720bc22" class="idref" href="#7adcac760179e19a0bb37c9e1720bc22"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="q:13" class="idref" href="#q:13"><span class="id" title="binder">q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="06cf58f7ddfa1bb5ba5fd7636ec046f7" class="idref" href="#06cf58f7ddfa1bb5ba5fd7636ec046f7"><span class="id" title="binder">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:13"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#7adcac760179e19a0bb37c9e1720bc22"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:13"><span class="id" title="variable">q</span></a>) <a class="idref" href="ISL.Simp_env.html#06cf58f7ddfa1bb5ba5fd7636ec046f7"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#7adcac760179e19a0bb37c9e1720bc22"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="q:15" class="idref" href="#q:15"><span class="id" title="binder">q</span></a> <a id="4cb0c3ea5194bcab33314441a836c0d5" class="idref" href="#4cb0c3ea5194bcab33314441a836c0d5"><span class="id" title="binder">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:15"><span class="id" title="variable">q</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#7adcac760179e19a0bb37c9e1720bc22"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:15"><span class="id" title="variable">q</span></a>) <a class="idref" href="ISL.Simp_env.html#4cb0c3ea5194bcab33314441a836c0d5"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#7adcac760179e19a0bb37c9e1720bc22"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">fIp</span> :=<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="p:17" class="idref" href="#p:17"><span class="id" title="binder"><span id="p:20" class="id">p</span></span></a> <a id="70da1412efa2306baf72efe69d4c4901" class="idref" href="#70da1412efa2306baf72efe69d4c4901"><span class="id" title="binder"><span id="542a81395f87f24665a1316acac50ce8" class="id">θ</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#70da1412efa2306baf72efe69d4c4901"><span class="id" title="variable">θ</span></a> <span class="id" title="keyword">with</span> | <a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">q</span>) <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.Simp_env.html#p:17"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">fp</span>:= (<span class="id" title="keyword">fun</span> <a id="d6d240b908a6b36119d478f8b6e793d5" class="idref" href="#d6d240b908a6b36119d478f8b6e793d5"><span class="id" title="binder"><span id="e4b7713ce5c6c62736083e500ca82653" class="id">θ</span></span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#d6d240b908a6b36119d478f8b6e793d5"><span class="id" title="variable">θ</span></a> <span class="id" title="keyword">with</span> |<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">p</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> (<span class="id" title="var">fIp</span> <span class="id" title="var">p</span>) <span class="id" title="var">Γ</span>) <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="var">fp</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">θ</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hθ</span>) | <span class="id" title="var">Hf</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">fp</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>. 2-6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="keyword">as</span> [(ψ &amp;<span class="id" title="var">Hin</span>ψ &amp; <span class="id" title="var">H</span>ψ)|] <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>; [|<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">fIp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">destruct</span> ψ. 1-4, 6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ψ1. 2-6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">case</span> <span class="id" title="definition">decide</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ; [|<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>ψ, <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">q</span> ψ <span class="id" title="var">Hp</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>, <span class="id" title="var">H</span>ψ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">fp</span> <span class="id" title="var">fIp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hf'</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">Hf'</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>ψ). <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">decide_True</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_ImpLAnd" class="idref" href="#S.applicable_ImpLAnd"><span class="id" title="definition">applicable_ImpLAnd</span></a> {<a id="K:27" class="idref" href="#K:27"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="6e093fd9af49d42270cd626602782b21" class="idref" href="#6e093fd9af49d42270cd626602782b21"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="5faf077e59e98248d5a53078fcd6fd49" class="idref" href="#5faf077e59e98248d5a53078fcd6fd49"><span class="id" title="binder">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="cdc16ab31e9de953c281c8a84e6197a1" class="idref" href="#cdc16ab31e9de953c281c8a84e6197a1"><span class="id" title="binder">φ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="01c2d19a64302314ae8c13f9ebfc2f8e" class="idref" href="#01c2d19a64302314ae8c13f9ebfc2f8e"><span class="id" title="binder">φ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <a class="idref" href="ISL.Simp_env.html#5faf077e59e98248d5a53078fcd6fd49"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Simp_env.html#cdc16ab31e9de953c281c8a84e6197a1"><span class="id" title="variable">φ2</span></a>) <a class="idref" href="ISL.Simp_env.html#01c2d19a64302314ae8c13f9ebfc2f8e"><span class="id" title="variable">φ3</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#6e093fd9af49d42270cd626602782b21"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="b8de6efe9a87970fa1574ea3c0a8abf8" class="idref" href="#b8de6efe9a87970fa1574ea3c0a8abf8"><span class="id" title="binder">φ1</span></a> <a id="93c39f585cdb6e369d7181e448e217b3" class="idref" href="#93c39f585cdb6e369d7181e448e217b3"><span class="id" title="binder">φ2</span></a> <a id="6f862629000ed3677f068253f9cdefec" class="idref" href="#6f862629000ed3677f068253f9cdefec"><span class="id" title="binder">φ3</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <a class="idref" href="ISL.Simp_env.html#b8de6efe9a87970fa1574ea3c0a8abf8"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Simp_env.html#93c39f585cdb6e369d7181e448e217b3"><span class="id" title="variable">φ2</span></a>) <a class="idref" href="ISL.Simp_env.html#6f862629000ed3677f068253f9cdefec"><span class="id" title="variable">φ3</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#6e093fd9af49d42270cd626602782b21"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">fII</span> := (<span class="id" title="keyword">fun</span> <a id="b104375ae41945cebf5bcc8aca5e02ad" class="idref" href="#b104375ae41945cebf5bcc8aca5e02ad"><span class="id" title="binder"><span id="8393a2441f7910e278661bb86a633f4c" class="id">θ</span></span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#b104375ae41945cebf5bcc8aca5e02ad"><span class="id" title="variable">θ</span></a> <span class="id" title="keyword">with</span> |<a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#And"><span class="id" title="constructor">And</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="var">fII</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">θ</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hθ</span>) | <span class="id" title="var">Hf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">fII</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>. 1-4, 6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ1</span>. 1-2,4-6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> ψ1 ψ2 ψ3 <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">subst</span> <span class="id" title="var">fII</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_ImpLOr" class="idref" href="#S.applicable_ImpLOr"><span class="id" title="definition">applicable_ImpLOr</span></a> {<a id="K:39" class="idref" href="#K:39"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="2fa7cd36545270b450a92047d029dc99" class="idref" href="#2fa7cd36545270b450a92047d029dc99"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="63c69e618fecc23dd3092fac3fdecf97" class="idref" href="#63c69e618fecc23dd3092fac3fdecf97"><span class="id" title="binder">φ1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="eccd041b399f0913ba167d124aceab01" class="idref" href="#eccd041b399f0913ba167d124aceab01"><span class="id" title="binder">φ2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="58731825006306a97678948867baf214" class="idref" href="#58731825006306a97678948867baf214"><span class="id" title="binder">φ3</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a>  <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Or"><span class="id" title="constructor">Or</span></a> <a class="idref" href="ISL.Simp_env.html#63c69e618fecc23dd3092fac3fdecf97"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Simp_env.html#eccd041b399f0913ba167d124aceab01"><span class="id" title="variable">φ2</span></a>) <a class="idref" href="ISL.Simp_env.html#58731825006306a97678948867baf214"><span class="id" title="variable">φ3</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#2fa7cd36545270b450a92047d029dc99"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="9856795564739053d436b7379d6a5b3e" class="idref" href="#9856795564739053d436b7379d6a5b3e"><span class="id" title="binder">φ1</span></a> <a id="f694d6e8467d197df2d196df6fce0b50" class="idref" href="#f694d6e8467d197df2d196df6fce0b50"><span class="id" title="binder">φ2</span></a> <a id="943608e3a244c3c2aa86fd40f2f18018" class="idref" href="#943608e3a244c3c2aa86fd40f2f18018"><span class="id" title="binder">φ3</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Or"><span class="id" title="constructor">Or</span></a> <a class="idref" href="ISL.Simp_env.html#9856795564739053d436b7379d6a5b3e"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Simp_env.html#f694d6e8467d197df2d196df6fce0b50"><span class="id" title="variable">φ2</span></a>) <a class="idref" href="ISL.Simp_env.html#943608e3a244c3c2aa86fd40f2f18018"><span class="id" title="variable">φ3</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#2fa7cd36545270b450a92047d029dc99"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">fII</span> := (<span class="id" title="keyword">fun</span> <a id="6f80152d169b6e244d9bb80d7287cd6b" class="idref" href="#6f80152d169b6e244d9bb80d7287cd6b"><span class="id" title="binder"><span id="8fee1c42ce2a493916c887afbd28922f" class="id">θ</span></span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#6f80152d169b6e244d9bb80d7287cd6b"><span class="id" title="variable">θ</span></a> <span class="id" title="keyword">with</span> |<a class="idref" href="ISL.Formulas.html#Implies"><span class="id" title="constructor">Implies</span></a> (<a class="idref" href="ISL.Formulas.html#Or"><span class="id" title="constructor">Or</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> <span class="id" title="var">fII</span> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [(<span class="id" title="var">θ</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hθ</span>) | <span class="id" title="var">Hf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">fII</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>. 1-4, 6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ1</span>. 1-3, 5-6: <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> ψ1 ψ2 ψ3 <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">subst</span> <span class="id" title="var">fII</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>ψ. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Probably&nbsp;very&nbsp;costly&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_strong_weakening" class="idref" href="#S.applicable_strong_weakening"><span class="id" title="definition">applicable_strong_weakening</span></a> {<a id="K:51" class="idref" href="#K:51"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} (<a id="60ffb00576919416289d5bb12a3b56d1" class="idref" href="#60ffb00576919416289d5bb12a3b56d1"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="4ced456ea641b41e7dd609c8a379f5fb" class="idref" href="#4ced456ea641b41e7dd609c8a379f5fb"><span class="id" title="binder">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#4ced456ea641b41e7dd609c8a379f5fb"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#60ffb00576919416289d5bb12a3b56d1"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> : <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#4ced456ea641b41e7dd609c8a379f5fb"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#60ffb00576919416289d5bb12a3b56d1"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="ISL.Sequents.html#417d4f8793ef9552198c889adf95d0f2"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ISL.Simp_env.html#4ced456ea641b41e7dd609c8a379f5fb"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <span class="id" title="notation">True</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="772bc84a81c4525400b2d7aca7035ca6" class="idref" href="#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="binder">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#60ffb00576919416289d5bb12a3b56d1"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><span class="id" title="var">_</span> : <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#60ffb00576919416289d5bb12a3b56d1"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="ISL.Sequents.html#417d4f8793ef9552198c889adf95d0f2"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ISL.Simp_env.html#772bc84a81c4525400b2d7aca7035ca6"><span class="id" title="variable">φ</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">False</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="ac51094cc4b65e3dd8a5369ad6030692" class="idref" href="#ac51094cc4b65e3dd8a5369ad6030692"><span class="id" title="binder"><span id="a033b02b217ff454b48ea4271fc1fec4" class="id">φ</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">if</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#ac51094cc4b65e3dd8a5369ad6030692"><span class="id" title="variable">φ</span></a> <span class="id" title="var">Γ</span>) <a class="idref" href="ISL.Simp_env.html#ac51094cc4b65e3dd8a5369ad6030692"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="var">Γ</span>) <span class="id" title="keyword">as</span> [[φ [<span class="id" title="var">Hin</span> <span class="id" title="var">H</span>φ]]| <span class="id" title="var">Hf</span>].<br/>
- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> φ <span class="id" title="var">Γ</span><a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> φ). <span class="id" title="tactic">trivial</span>. <span class="id" title="var">contradict</span> <span class="id" title="var">H</span>φ.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hin</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> (<span class="id" title="var">Hf</span> φ). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> φ <span class="id" title="var">Γ</span><a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> φ). <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab40"></a><h2 class="section">Ternary if notation</h2>

  This section defines a set of functions and notations for handling ternary
  conditional logic. The functions <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.sumor_bind0"><span class="id" title="definition">sumor_bind0</span></a></span>, <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.sumor_bind1"><span class="id" title="definition">sumor_bind1</span></a></span>, <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.sumor_bind2"><span class="id" title="definition">sumor_bind2</span></a></span>, and
  <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.sumor_bind3"><span class="id" title="definition">sumor_bind3</span></a></span> provide a way to handle different levels of nested dependent sums and
  propositions. Each function takes a sum type and applies a function to the left component
  if it exists, or returns a default value otherwise. The notations
  `cond '?' A '⋮₀' B`, `cond '?' A '⋮₁' B`, `cond '?' A '⋮₂' B`, and `cond '?' A '⋮₃' B`
  are provided to simplify the usage of these functions.
  This notation is used in the definition of <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_env"><span class="id" title="axiom">simp_env</span></a></span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="S.sumor_bind0" class="idref" href="#S.sumor_bind0"><span class="id" title="definition">sumor_bind0</span></a> {<a id="A:57" class="idref" href="#A:57"><span class="id" title="binder">A</span></a>} {<a id="B:58" class="idref" href="#B:58"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Prop</span>} {<a id="C:59" class="idref" href="#C:59"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#A:57"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ISL.Simp_env.html#B:58"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#A:57"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:59"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:59"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:59"><span class="id" title="variable">C</span></a> :=<br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="qH:60" class="idref" href="#qH:60"><span class="id" title="binder">qH</span></a> <a id="f:61" class="idref" href="#f:61"><span class="id" title="binder">f</span></a> <a id="c:62" class="idref" href="#c:62"><span class="id" title="binder">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#qH:60"><span class="id" title="variable">qH</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">a</span> =&gt; <a class="idref" href="ISL.Simp_env.html#f:61"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ISL.Simp_env.html#c:62"><span class="id" title="variable">c</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.sumor_bind1" class="idref" href="#S.sumor_bind1"><span class="id" title="definition">sumor_bind1</span></a> {<a id="A:64" class="idref" href="#A:64"><span class="id" title="binder">A</span></a> <a id="A':65" class="idref" href="#A':65"><span class="id" title="binder">A'</span></a>} {<a id="B:66" class="idref" href="#B:66"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Prop</span>} {<a id="C:67" class="idref" href="#C:67"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="q:68" class="idref" href="#q:68"><span class="id" title="binder">q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A:64"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#A':65"><span class="id" title="variable">A'</span></a> <a class="idref" href="ISL.Simp_env.html#q:68"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ISL.Simp_env.html#B:66"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:69" class="idref" href="#x:69"><span class="id" title="binder">x</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="ISL.Simp_env.html#A':65"><span class="id" title="variable">A'</span></a> <a class="idref" href="ISL.Simp_env.html#x:69"><span class="id" title="variable">x</span></a><span class="id" title="notation">),</span> <a class="idref" href="ISL.Simp_env.html#C:67"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:67"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:67"><span class="id" title="variable">C</span></a> :=<br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="qH:70" class="idref" href="#qH:70"><span class="id" title="binder">qH</span></a> <a id="f:71" class="idref" href="#f:71"><span class="id" title="binder">f</span></a> <a id="c:72" class="idref" href="#c:72"><span class="id" title="binder">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#qH:70"><span class="id" title="variable">qH</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">q</span> <span class="id" title="var">Hq</span>) =&gt; <a class="idref" href="ISL.Simp_env.html#f:71"><span class="id" title="variable">f</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hq</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ISL.Simp_env.html#c:72"><span class="id" title="variable">c</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.sumor_bind2" class="idref" href="#S.sumor_bind2"><span class="id" title="definition">sumor_bind2</span></a> {<a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a> <a id="A':75" class="idref" href="#A':75"><span class="id" title="binder">A'</span></a> <a id="A'':76" class="idref" href="#A'':76"><span class="id" title="binder">A''</span></a>} {<a id="B:77" class="idref" href="#B:77"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Prop</span>} {<a id="C:78" class="idref" href="#C:78"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="q:79" class="idref" href="#q:79"><span class="id" title="binder">q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A:74"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="r:80" class="idref" href="#r:80"><span class="id" title="binder">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A':75"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#A'':76"><span class="id" title="variable">A''</span></a> <a class="idref" href="ISL.Simp_env.html#q:79"><span class="id" title="variable">q</span></a> <a class="idref" href="ISL.Simp_env.html#r:80"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ISL.Simp_env.html#B:77"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:81" class="idref" href="#x:81"><span class="id" title="binder">x</span></a> <a id="y:82" class="idref" href="#y:82"><span class="id" title="binder">y</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="ISL.Simp_env.html#A'':76"><span class="id" title="variable">A''</span></a> <a class="idref" href="ISL.Simp_env.html#x:81"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#y:82"><span class="id" title="variable">y</span></a><span class="id" title="notation">),</span> <a class="idref" href="ISL.Simp_env.html#C:78"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:78"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:78"><span class="id" title="variable">C</span></a> :=<br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="qH:83" class="idref" href="#qH:83"><span class="id" title="binder">qH</span></a> <a id="f:84" class="idref" href="#f:84"><span class="id" title="binder">f</span></a> <a id="c:85" class="idref" href="#c:85"><span class="id" title="binder">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#qH:83"><span class="id" title="variable">qH</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">q</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">r</span> <span class="id" title="var">Hq</span>)) =&gt; <a class="idref" href="ISL.Simp_env.html#f:84"><span class="id" title="variable">f</span></a> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">Hq</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ISL.Simp_env.html#c:85"><span class="id" title="variable">c</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.sumor_bind3" class="idref" href="#S.sumor_bind3"><span class="id" title="definition">sumor_bind3</span></a> {<a id="A:87" class="idref" href="#A:87"><span class="id" title="binder">A</span></a> <a id="A':88" class="idref" href="#A':88"><span class="id" title="binder">A'</span></a> <a id="A'':89" class="idref" href="#A'':89"><span class="id" title="binder">A''</span></a> <a id="A''':90" class="idref" href="#A''':90"><span class="id" title="binder">A'''</span></a>} {<a id="B:91" class="idref" href="#B:91"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Prop</span>} {<a id="C:92" class="idref" href="#C:92"><span class="id" title="binder">C</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="q:93" class="idref" href="#q:93"><span class="id" title="binder">q</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A:87"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">{</span></a><a id="r:94" class="idref" href="#r:94"><span class="id" title="binder">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A':88"><span class="id" title="variable">A'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a> <a id="s:95" class="idref" href="#s:95"><span class="id" title="binder">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Simp_env.html#A'':89"><span class="id" title="variable">A''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#A''':90"><span class="id" title="variable">A'''</span></a> <a class="idref" href="ISL.Simp_env.html#q:93"><span class="id" title="variable">q</span></a> <a class="idref" href="ISL.Simp_env.html#r:94"><span class="id" title="variable">r</span></a> <a class="idref" href="ISL.Simp_env.html#s:95"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#cc5e56ba3765e2d6b17e66d19b966f1d"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a> <a class="idref" href="ISL.Simp_env.html#B:91"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:96" class="idref" href="#x:96"><span class="id" title="binder">x</span></a> <a id="y:97" class="idref" href="#y:97"><span class="id" title="binder">y</span></a> <a id="z:98" class="idref" href="#z:98"><span class="id" title="binder">z</span></a> (<span class="id" title="var">_</span> : <a class="idref" href="ISL.Simp_env.html#A''':90"><span class="id" title="variable">A'''</span></a> <a class="idref" href="ISL.Simp_env.html#x:96"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#y:97"><span class="id" title="variable">y</span></a> <a class="idref" href="ISL.Simp_env.html#z:98"><span class="id" title="variable">z</span></a><span class="id" title="notation">),</span> <a class="idref" href="ISL.Simp_env.html#C:92"><span class="id" title="variable">C</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:92"><span class="id" title="variable">C</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Simp_env.html#C:92"><span class="id" title="variable">C</span></a> :=<br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="qH:99" class="idref" href="#qH:99"><span class="id" title="binder">qH</span></a> <a id="f:100" class="idref" href="#f:100"><span class="id" title="binder">f</span></a> <a id="c:101" class="idref" href="#c:101"><span class="id" title="binder">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Simp_env.html#qH:99"><span class="id" title="variable">qH</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">q</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">r</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">s</span> <span class="id" title="var">Hq</span>))) =&gt; <a class="idref" href="ISL.Simp_env.html#f:100"><span class="id" title="variable">f</span></a> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span> <span class="id" title="var">Hq</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="ISL.Simp_env.html#c:101"><span class="id" title="variable">c</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="f1e0e9ba0be86f4e0b5e13e07b5d62a9" class="idref" href="#f1e0e9ba0be86f4e0b5e13e07b5d62a9"><span class="id" title="notation">&quot;</span></a>cond '?' A '⋮₀' B" := (<a class="idref" href="ISL.Simp_env.html#S.sumor_bind0"><span class="id" title="definition">sumor_bind0</span></a> <span class="id" title="var">cond</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="5554fcb75b6cab10d79488a194a000ab" class="idref" href="#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">&quot;</span></a>cond '?' A '⋮₁' B" := (<a class="idref" href="ISL.Simp_env.html#S.sumor_bind1"><span class="id" title="definition">sumor_bind1</span></a> <span class="id" title="var">cond</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="5c84f665e09767deef6203fe8a7315ab" class="idref" href="#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">&quot;</span></a>cond '?' A '⋮₂' B" := (<a class="idref" href="ISL.Simp_env.html#S.sumor_bind2"><span class="id" title="definition">sumor_bind2</span></a> <span class="id" title="var">cond</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="6ffcb7e43d3401e8305ae2f88646d23f" class="idref" href="#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">&quot;</span></a>cond '?' A '⋮₃' B" := (<a class="idref" href="ISL.Simp_env.html#S.sumor_bind3"><span class="id" title="definition">sumor_bind3</span></a> <span class="id" title="var">cond</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 150, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Local Notation</span> <a id="aea3e6356d11abe8bb90914e6edad6d6" class="idref" href="#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">&quot;</span></a>Δ '•' φ" := (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> φ <span class="id" title="var">Δ</span>) : <span class="id" title="var">list_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab41"></a><h2 class="section">Definition of contextual simplification</h2>

<div class="paragraph"> </div>

 The <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a></span> function performs contextual simplification on a
  given formula <span class="inlinecode">φ</span> within a context <span class="inlinecode"><span class="id" title="var">Δ</span></span>.
  It recursively simplifies conjunctions, disjunctions, and implications by
  considering the context in which each subformula appears.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a id="S.contextual_simp_form" class="idref" href="#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> {<a id="K:103" class="idref" href="#K:103"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> :=<br/>
| <a class="idref" href="ISL.Simp_env.html#f9984910b3dfe016133ce06768010329"><span class="id" title="variable">Δ</span></a>, <a class="idref" href="ISL.Simp_env.html#768747ad823170d85f51863bb8e936b0"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Simp_env.html#44a07adb1cecbbe2094e67d4e61ebf95"><span class="id" title="variable">φ2</span></a> := <span class="id" title="keyword">let</span> <a id="cffaa28a17683e04191a43cb8a69b98f" class="idref" href="#cffaa28a17683e04191a43cb8a69b98f"><span class="id" title="binder">φ2'</span></a> := (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>) φ2) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Optimizations.html#choose_conj"><span class="id" title="definition">choose_conj</span></a> (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Simp_env.html#cffaa28a17683e04191a43cb8a69b98f"><span class="id" title="variable">φ2'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>) φ1) <a class="idref" href="ISL.Simp_env.html#cffaa28a17683e04191a43cb8a69b98f"><span class="id" title="variable">φ2'</span></a>;<br/>
| <a class="idref" href="ISL.Simp_env.html#f4afae4c60ced6ff1c05aee1830e5299"><span class="id" title="variable">Δ</span></a>, <a class="idref" href="ISL.Simp_env.html#336f09f3b74300500c9c54f12f46d16b"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Simp_env.html#c9ecf6e1add4f2ddf94e0af024d1bf61"><span class="id" title="variable">φ2</span></a> := <a class="idref" href="ISL.Optimizations.html#choose_disj"><span class="id" title="definition">choose_disj</span></a> (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> <span class="id" title="var">Δ</span> φ1) (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> <span class="id" title="var">Δ</span> φ2);<br/>
| <a class="idref" href="ISL.Simp_env.html#822d01a139bb816c6ecc3e14a3ea3d66"><span class="id" title="variable">Δ</span></a>, <a class="idref" href="ISL.Simp_env.html#1d8bdb714ef714745a83ea2442671419"><span class="id" title="variable">φ1</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#34f67c12eb9c1365b81cb44d8f04ef07"><span class="id" title="variable">φ2</span></a> := <a class="idref" href="ISL.Optimizations.html#choose_impl"><span class="id" title="definition">choose_impl</span></a> (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> <span class="id" title="var">Δ</span> φ1) (<a class="idref" href="ISL.Simp_env.html#contextual_simp_form:104"><span class="id" title="definition">contextual_simp_form</span></a> (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>) φ2)<br/>
| <a class="idref" href="ISL.Simp_env.html#bbabf351a4e1160eb2b905aeacd371f5"><span class="id" title="variable">Δ</span></a>, <a class="idref" href="ISL.Simp_env.html#d0edcf98138e778df84ebad8627677a7"><span class="id" title="variable">φ</span></a> =&gt; <span class="id" title="keyword">if</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> φ) <span class="id" title="keyword">then</span> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a> <span class="id" title="keyword">else</span> φ <span class="comment">(*&nbsp;TODO:&nbsp;simplify&nbsp;under&nbsp;box&nbsp;*)</span><br/>
.<br/>

<br/>
</div>

<div class="doc">
<a id="lab42"></a><h2 class="section">Weight lemmas</h2>

  This section contains several lemmas related to the properties of logical formulas
  and their weights in the context of the Lindenbaum-Tarski preorder. The lemmas
  are used to reason about the relationship between the weights of formulas and
  their simplified forms.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="S.contextual_simp_form_weight" class="idref" href="#S.contextual_simp_form_weight"><span class="id" title="lemma">contextual_simp_form_weight</span></a> {<a id="K:128" class="idref" href="#K:128"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="aa1d69f314ff860a19d571fa0b6bb4d3" class="idref" href="#aa1d69f314ff860a19d571fa0b6bb4d3"><span class="id" title="binder">Δ</span></a> (<a id="03cf88d97992a4e31aea79bed564cd0d" class="idref" href="#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="binder">φ</span></a> : @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Simp_env.html#K:128"><span class="id" title="variable">K</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#aa1d69f314ff860a19d571fa0b6bb4d3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Heq:131" class="idref" href="#Heq:131"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="ISL.Simp_env.html#K:128"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="ISL.Simp_env.html#K:128"><span class="id" title="variable">K</span></a> (<span class="id" title="keyword">fun</span> <a id="K:132" class="idref" href="#K:132"><span class="id" title="binder">K</span></a> =&gt; @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Simp_env.html#K:132"><span class="id" title="variable">K</span></a>) <a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a> <a class="idref" href="ISL.Simp_env.html#Heq:131"><span class="id" title="variable">Heq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="v:133" class="idref" href="#v:133"><span class="id" title="binder">v</span></a> : <a class="idref" href="ISL.Formulas.html#variable"><span class="id" title="definition">variable</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Simp_env.html#v:133"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="Heq:134" class="idref" href="#Heq:134"><span class="id" title="binder">Heq</span></a> : <a class="idref" href="ISL.Simp_env.html#K:128"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> <a class="idref" href="ISL.Simp_env.html#K:128"><span class="id" title="variable">K</span></a> (<span class="id" title="keyword">fun</span> <a id="K:135" class="idref" href="#K:135"><span class="id" title="binder">K</span></a> =&gt; @<a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Simp_env.html#K:135"><span class="id" title="variable">K</span></a>) <a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#Modal"><span class="id" title="constructor">Modal</span></a> <a class="idref" href="ISL.Simp_env.html#Heq:134"><span class="id" title="variable">Heq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Simp_env.html#v:133"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#aa1d69f314ff860a19d571fa0b6bb4d3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#03cf88d97992a4e31aea79bed564cd0d"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">induction</span> φ; <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>; <span class="id" title="tactic">simpl</span>.<br/>
1, 2: (<span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">simpl</span>; [<span class="id" title="tactic">left</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">eauto</span>| <span class="id" title="tactic">right</span>; <span class="id" title="var">lia</span>]).<br/>
1-3:<span class="id" title="tactic">right</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ1); <span class="id" title="tactic">try</span> <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ2).<br/>
- <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> φ1) φ2) <span class="id" title="keyword">as</span> φ2'.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ1 (φ2' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq1</span> <span class="id" title="var">_</span>]| <span class="id" title="var">Hle1</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ2 (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq2</span> <span class="id" title="var">_</span>]| <span class="id" title="var">Hle2</span>];<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">Heq1</span>, ?<span class="id" title="var">Heq2</span>; <span class="id" title="tactic">subst</span> φ2'.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ISL.Optimizations.html#choose_conj_topL"><span class="id" title="lemma">choose_conj_topL</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq1</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Optimizations.html#choose_conj"><span class="id" title="definition">choose_conj</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="ISL.Optimizations.html#obviously_smaller"><span class="id" title="definition">obviously_smaller</span></a> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>) φ2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="var">contradict</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#obviously_smaller_top_not_Eq"><span class="id" title="lemma">obviously_smaller_top_not_Eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ2 (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)); <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="ISL.Optimizations.html#choose_conj_topL"><span class="id" title="lemma">choose_conj_topL</span></a>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ1); <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ1 (<a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">e</span> <span class="id" title="var">_</span>]|]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Optimizations.html#choose_conj"><span class="id" title="definition">choose_conj</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Optimizations.html#obviously_smaller"><span class="id" title="definition">obviously_smaller</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ1 <span class="id" title="var">Δ</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq1</span> <span class="id" title="var">_</span>] | <span class="id" title="var">Hle1</span>]; <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ2 <span class="id" title="var">Δ</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq2</span> <span class="id" title="var">_</span>] | <span class="id" title="var">Hle2</span>];<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">Heq1</span>, ?<span class="id" title="var">Heq2</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Optimizations.html#choose_disj"><span class="id" title="definition">choose_disj</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Optimizations.html#obviously_smaller_compatible_LT"><span class="id" title="lemma">obviously_smaller_compatible_LT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">).2</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">case_eq</span> (<a class="idref" href="ISL.Optimizations.html#obviously_smaller"><span class="id" title="definition">obviously_smaller</span></a> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> <span class="id" title="var">Δ</span> φ2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="var">contradict</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#obviously_smaller_top_not_Eq"><span class="id" title="lemma">obviously_smaller_top_not_Eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Optimizations.html#obviously_smaller_compatible_LT"><span class="id" title="lemma">obviously_smaller_compatible_LT</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><span class="id" title="notation">).2</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Optimizations.html#obviously_smaller"><span class="id" title="definition">obviously_smaller</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ1). <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ2).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ1 <span class="id" title="var">Δ</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq1</span> <span class="id" title="var">_</span>] | <span class="id" title="var">Hle1</span>];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span>φ2 (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Heq2</span> <span class="id" title="var">_</span>] | <span class="id" title="var">Hle2</span>];<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">Heq1</span>, ?<span class="id" title="var">Heq2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_impl_top_weight"><span class="id" title="lemma">choose_impl_top_weight</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_impl_top_weight"><span class="id" title="lemma">choose_impl_top_weight</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Optimizations.html#choose_impl"><span class="id" title="definition">choose_impl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Optimizations.html#obviously_smaller_compatible_LT"><span class="id" title="lemma">obviously_smaller_compatible_LT</span></a> <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a><span class="id" title="notation">).2</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_impl_weight"><span class="id" title="lemma">choose_impl_weight</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">destruction</span> φ.<br/>
&nbsp;&nbsp;3-5:<span class="id" title="tactic">right</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ1); <span class="id" title="tactic">try</span> <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ2);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">simpl</span>; [| <span class="id" title="tactic">right</span>; <span class="id" title="var">now</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">simpl</span>; [| <span class="id" title="tactic">right</span>; <span class="id" title="var">now</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">simpl</span>; [| <span class="id" title="tactic">right</span>; <span class="id" title="var">now</span> <span class="id" title="var">lia</span>]. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ). <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab43"></a><h2 class="section">Simplifying environments</h2>


<div class="paragraph"> </div>

This section contains the function <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_env"><span class="id" title="axiom">simp_env</span></a></span>, which simplifies an environment (context) Δ.
If none of the left rules are applicable anymore to Δ, then the function calls
<span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.applicable_contextual_simp_form"><span class="id" title="definition">applicable_contextual_simp_form</span></a></span> to find a simplification for one of the formulas in Δ, given
the fact that it appears in context Δ.
We also define <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_form"><span class="id" title="axiom">simp_form</span></a></span>, which tries to simplify a formula in the empty context.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.applicable_contextual_simp_form" class="idref" href="#S.applicable_contextual_simp_form"><span class="id" title="definition">applicable_contextual_simp_form</span></a> {<a id="K:136" class="idref" href="#K:136"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="1b09f1b8051ddd2fc00aa92cf65c07ed" class="idref" href="#1b09f1b8051ddd2fc00aa92cf65c07ed"><span class="id" title="binder">Δ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="f681d02708c2759d6ad7ee493464dedc" class="idref" href="#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="binder">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="0da6814cdae430ac4d0c04c11a842e78" class="idref" href="#0da6814cdae430ac4d0c04c11a842e78"><span class="id" title="binder">φ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#1b09f1b8051ddd2fc00aa92cf65c07ed"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Simp_env.html#0da6814cdae430ac4d0c04c11a842e78"><span class="id" title="variable">φ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#1b09f1b8051ddd2fc00aa92cf65c07ed"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#0da6814cdae430ac4d0c04c11a842e78"><span class="id" title="variable">φ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#f681d02708c2759d6ad7ee493464dedc"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="c612fad6b902207a0f4f3a5cf20e562f" class="idref" href="#c612fad6b902207a0f4f3a5cf20e562f"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Simp_env.html#c612fad6b902207a0f4f3a5cf20e562f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#1b09f1b8051ddd2fc00aa92cf65c07ed"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a>(<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#c612fad6b902207a0f4f3a5cf20e562f"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#1b09f1b8051ddd2fc00aa92cf65c07ed"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#c612fad6b902207a0f4f3a5cf20e562f"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8.html#d62fe7eb16bd9315a9b7758d6f907270"><span class="id" title="notation">≥</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#c612fad6b902207a0f4f3a5cf20e562f"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="comment">(*&nbsp;try&nbsp;not&nbsp;to&nbsp;do&nbsp;the&nbsp;simplification&nbsp;twice.&nbsp;*)</span><br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hs</span>: <span class="id" title="notation">forall</span> <a id="18db665908d5502a7e950956abebea07" class="idref" href="#18db665908d5502a7e950956abebea07"><span class="id" title="binder"><span id="04ae5a60ca3a8cf5eb06875ae4483237" class="id">φ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="411adafd705fa7466e37c31193597da7" class="idref" href="#411adafd705fa7466e37c31193597da7"><span class="id" title="binder"><span id="94748473740f9c768750273366ff19d1" class="id">φ'</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Simp_env.html#411adafd705fa7466e37c31193597da7"><span class="id" title="variable">φ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a> <span class="id" title="var">Δ</span>) <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#411adafd705fa7466e37c31193597da7"><span class="id" title="variable">φ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a>(<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a> <span class="id" title="var">Δ</span>) <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8.html#d62fe7eb16bd9315a9b7758d6f907270"><span class="id" title="notation">≥</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#18db665908d5502a7e950956abebea07"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>).<br/>
{ <span class="id" title="tactic">intros</span> φ. <span class="id" title="var">remember</span> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> φ <span class="id" title="var">Δ</span>) φ) <span class="id" title="keyword">as</span> φ'.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> φ' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> φ)).<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hlt</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ'. <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="var">lia</span>.<br/>
}<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.DecisionProcedure.html#exists_dec"><span class="id" title="definition">exists_dec</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="873fa2dce517be94104af1d99863441e" class="idref" href="#873fa2dce517be94104af1d99863441e"><span class="id" title="binder"><span id="c9fb0d4cfb90f3cd18ac576f5bff5be1" class="id">φ</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">if</span> <span class="id" title="var">Hs</span> <a class="idref" href="ISL.Simp_env.html#873fa2dce517be94104af1d99863441e"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <span class="id" title="var">Δ</span>) <span class="id" title="keyword">as</span> [[φ [<span class="id" title="var">Hin</span> <span class="id" title="var">HH</span>]]| <span class="id" title="var">Hf</span>].<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hs</span> φ) <span class="id" title="keyword">as</span> [[φ' [<span class="id" title="var">Heq</span> <span class="id" title="var">Hw</span>]]| <span class="id" title="var">Hf</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ. <span class="id" title="tactic">exists</span> φ'. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">contradict</span> <span class="id" title="var">HH</span>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hs</span> φ) <span class="id" title="keyword">as</span> [|<span class="id" title="var">Hf'</span>]. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hf'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Local Obligation</span> <span class="id" title="keyword">Tactic</span> := (<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="var">order_tac</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="S.SimpEnv" class="idref" href="#S.SimpEnv"><span class="id" title="section">SimpEnv</span></a>.<br/>
<span class="id" title="keyword">Context</span> {<a id="S.SimpEnv.K" class="idref" href="#S.SimpEnv.K"><span class="id" title="variable">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} .<br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="S.simp_env" class="idref" href="#S.simp_env"><span class="id" title="definition">simp_env</span></a> (<a id="7fcd83ef4afdb7daf7c07b45a7ffdae4" class="idref" href="#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) {<span class="id" title="keyword">wf</span> <a class="idref" href="ISL.Order.html#env_order"><span class="id" title="definition">env_order</span></a> <span class="id" title="var">Δ</span>} : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;invertible&nbsp;left&nbsp;rules&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_AndL"><span class="id" title="definition">applicable_AndL</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="cb187ee733c0caea312181447a3177d4" class="idref" href="#cb187ee733c0caea312181447a3177d4"><span class="id" title="binder">δ₁</span></a> <a id="cdef748a2094abac5e269f8b6cf04b23" class="idref" href="#cdef748a2094abac5e269f8b6cf04b23"><span class="id" title="binder">δ₂</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Simp_env.html#cb187ee733c0caea312181447a3177d4"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Simp_env.html#cdef748a2094abac5e269f8b6cf04b23"><span class="id" title="variable">δ₂</span></a>) <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a><a class="idref" href="ISL.Simp_env.html#cb187ee733c0caea312181447a3177d4"><span class="id" title="variable">δ₁</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)•</span></a><a class="idref" href="ISL.Simp_env.html#cdef748a2094abac5e269f8b6cf04b23"><span class="id" title="variable">δ₂</span></a>) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLVar"><span class="id" title="definition">applicable_ImpLVar</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="q:152" class="idref" href="#q:152"><span class="id" title="binder">q</span></a> <a id="128d67888d34e55fee17aa25d60b4e0e" class="idref" href="#128d67888d34e55fee17aa25d60b4e0e"><span class="id" title="binder">ψ</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a> ((<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:152"><span class="id" title="variable">q</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#128d67888d34e55fee17aa25d60b4e0e"><span class="id" title="variable">ψ</span></a>) <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#128d67888d34e55fee17aa25d60b4e0e"><span class="id" title="variable">ψ</span></a>)) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLAnd"><span class="id" title="definition">applicable_ImpLAnd</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="db890bfe1bfaf28ce853e1e4a7d9befb" class="idref" href="#db890bfe1bfaf28ce853e1e4a7d9befb"><span class="id" title="binder">δ₁</span></a> <a id="16d6449a816b546ee149ae23e2ce17d5" class="idref" href="#16d6449a816b546ee149ae23e2ce17d5"><span class="id" title="binder">δ₂</span></a> <a id="05131f4d396e36bf42be037e6ed3d438" class="idref" href="#05131f4d396e36bf42be037e6ed3d438"><span class="id" title="binder">δ₃</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a> ((<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#db890bfe1bfaf28ce853e1e4a7d9befb"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Simp_env.html#16d6449a816b546ee149ae23e2ce17d5"><span class="id" title="variable">δ₂</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)→</span></a> <a class="idref" href="ISL.Simp_env.html#05131f4d396e36bf42be037e6ed3d438"><span class="id" title="variable">δ₃</span></a>) <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#db890bfe1bfaf28ce853e1e4a7d9befb"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#16d6449a816b546ee149ae23e2ce17d5"><span class="id" title="variable">δ₂</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#05131f4d396e36bf42be037e6ed3d438"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a>)) <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">₃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLOr"><span class="id" title="definition">applicable_ImpLOr</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="8c493279915aa0460331994f4992a340" class="idref" href="#8c493279915aa0460331994f4992a340"><span class="id" title="binder">δ₁</span></a> <a id="67c4a526b8bcdb0f0e2eeffd0ef2f7bf" class="idref" href="#67c4a526b8bcdb0f0e2eeffd0ef2f7bf"><span class="id" title="binder">δ₂</span></a> <a id="9007e9992071500b5d53bbd7ecb8d4d9" class="idref" href="#9007e9992071500b5d53bbd7ecb8d4d9"><span class="id" title="binder">δ₃</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#8c493279915aa0460331994f4992a340"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Simp_env.html#67c4a526b8bcdb0f0e2eeffd0ef2f7bf"><span class="id" title="variable">δ₂</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)→</span></a> <a class="idref" href="ISL.Simp_env.html#9007e9992071500b5d53bbd7ecb8d4d9"><span class="id" title="variable">δ₃</span></a>) <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#8c493279915aa0460331994f4992a340"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#9007e9992071500b5d53bbd7ecb8d4d9"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#67c4a526b8bcdb0f0e2eeffd0ef2f7bf"><span class="id" title="variable">δ₂</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#9007e9992071500b5d53bbd7ecb8d4d9"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a>) <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">₃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remove&nbsp;redundant&nbsp;assumptions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_strong_weakening"><span class="id" title="definition">applicable_strong_weakening</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="e95d2176f352825d7e1918b1fec3e227" class="idref" href="#e95d2176f352825d7e1918b1fec3e227"><span class="id" title="binder">φ</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#e95d2176f352825d7e1918b1fec3e227"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">₁</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;simplify&nbsp;individual&nbsp;formulas&nbsp;in&nbsp;their&nbsp;context.&nbsp;should&nbsp;be&nbsp;done&nbsp;earlier&nbsp;?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;is&nbsp;probably&nbsp;quite&nbsp;costly&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_contextual_simp_form"><span class="id" title="definition">applicable_contextual_simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="3aeabcdef85378301bd7dac2876ce8f8" class="idref" href="#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="binder">φ</span></a> <a id="d964928568b628669e26f4094b648027" class="idref" href="#d964928568b628669e26f4094b648027"><span class="id" title="binder">φ'</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#simp_env:149"><span class="id" title="definition">simp_env</span></a>(<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#3aeabcdef85378301bd7dac2876ce8f8"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#d964928568b628669e26f4094b648027"><span class="id" title="variable">φ'</span></a>) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#7fcd83ef4afdb7daf7c07b45a7ffdae4"><span class="id" title="variable">Δ</span></a><br/>
.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Program.Wf.html#measure_wf"><span class="id" title="lemma">Wf.measure_wf</span></a>, <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Lemma</span> <a id="S.simp_env_eq" class="idref" href="#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a> (<a id="df741f1932b64d046f79345362bbbe0f" class="idref" href="#df741f1932b64d046f79345362bbbe0f"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;invertible&nbsp;left&nbsp;rules&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_AndL"><span class="id" title="definition">applicable_AndL</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="c1f9b3857906a6229a815107af7b1fae" class="idref" href="#c1f9b3857906a6229a815107af7b1fae"><span class="id" title="binder">δ₁</span></a> <a id="b54086727d401f448948d1a2caa9542f" class="idref" href="#b54086727d401f448948d1a2caa9542f"><span class="id" title="binder">δ₂</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Simp_env.html#c1f9b3857906a6229a815107af7b1fae"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Simp_env.html#b54086727d401f448948d1a2caa9542f"><span class="id" title="variable">δ₂</span></a>) <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a><a class="idref" href="ISL.Simp_env.html#c1f9b3857906a6229a815107af7b1fae"><span class="id" title="variable">δ₁</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)•</span></a><a class="idref" href="ISL.Simp_env.html#b54086727d401f448948d1a2caa9542f"><span class="id" title="variable">δ₂</span></a>) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLVar"><span class="id" title="definition">applicable_ImpLVar</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="q:166" class="idref" href="#q:166"><span class="id" title="binder">q</span></a> <a id="9b2ee9768fd5bd06db4acc9c8102f64c" class="idref" href="#9b2ee9768fd5bd06db4acc9c8102f64c"><span class="id" title="binder">ψ</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> ((<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Simp_env.html#q:166"><span class="id" title="variable">q</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#9b2ee9768fd5bd06db4acc9c8102f64c"><span class="id" title="variable">ψ</span></a>) <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#9b2ee9768fd5bd06db4acc9c8102f64c"><span class="id" title="variable">ψ</span></a>)) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLAnd"><span class="id" title="definition">applicable_ImpLAnd</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="22c1ab645fed41ebdcb5f58effc66000" class="idref" href="#22c1ab645fed41ebdcb5f58effc66000"><span class="id" title="binder">δ₁</span></a> <a id="c048f3febc081d789c59a3676dde52b5" class="idref" href="#c048f3febc081d789c59a3676dde52b5"><span class="id" title="binder">δ₂</span></a> <a id="91eb9c44cb45b1d665ab0bb7d53348a3" class="idref" href="#91eb9c44cb45b1d665ab0bb7d53348a3"><span class="id" title="binder">δ₃</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> ((<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#22c1ab645fed41ebdcb5f58effc66000"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Simp_env.html#c048f3febc081d789c59a3676dde52b5"><span class="id" title="variable">δ₂</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)→</span></a> <a class="idref" href="ISL.Simp_env.html#91eb9c44cb45b1d665ab0bb7d53348a3"><span class="id" title="variable">δ₃</span></a>) <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#22c1ab645fed41ebdcb5f58effc66000"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#c048f3febc081d789c59a3676dde52b5"><span class="id" title="variable">δ₂</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#91eb9c44cb45b1d665ab0bb7d53348a3"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a>)) <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">₃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_ImpLOr"><span class="id" title="definition">applicable_ImpLOr</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="fd556e9e6cce8d46d23e8a6b35a47bc6" class="idref" href="#fd556e9e6cce8d46d23e8a6b35a47bc6"><span class="id" title="binder">δ₁</span></a> <a id="4a1358ed03512cd8edfd50f768341b3e" class="idref" href="#4a1358ed03512cd8edfd50f768341b3e"><span class="id" title="binder">δ₂</span></a> <a id="aebcc04d4ff95b4f109de1c31cccd84f" class="idref" href="#aebcc04d4ff95b4f109de1c31cccd84f"><span class="id" title="binder">δ₃</span></a>  <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (<a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#fd556e9e6cce8d46d23e8a6b35a47bc6"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Simp_env.html#4a1358ed03512cd8edfd50f768341b3e"><span class="id" title="variable">δ₂</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)→</span></a> <a class="idref" href="ISL.Simp_env.html#aebcc04d4ff95b4f109de1c31cccd84f"><span class="id" title="variable">δ₃</span></a>) <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#fd556e9e6cce8d46d23e8a6b35a47bc6"><span class="id" title="variable">δ₁</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#aebcc04d4ff95b4f109de1c31cccd84f"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#4a1358ed03512cd8edfd50f768341b3e"><span class="id" title="variable">δ₂</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Simp_env.html#aebcc04d4ff95b4f109de1c31cccd84f"><span class="id" title="variable">δ₃</span></a><a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">)</span></a>) <a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">₃</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remove&nbsp;redundant&nbsp;assumptions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#S.applicable_strong_weakening"><span class="id" title="definition">applicable_strong_weakening</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="b4b32d1bee66dae54d38f724fd6ea733" class="idref" href="#b4b32d1bee66dae54d38f724fd6ea733"><span class="id" title="binder">φ</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#b4b32d1bee66dae54d38f724fd6ea733"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5554fcb75b6cab10d79488a194a000ab"><span class="id" title="notation">₁</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#S.applicable_contextual_simp_form"><span class="id" title="definition">applicable_contextual_simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">?</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="31ed67d7b8100e791a08b3025d54d958" class="idref" href="#31ed67d7b8100e791a08b3025d54d958"><span class="id" title="binder">φ</span></a> <a id="9020a1b388f721df7367d2003c01440c" class="idref" href="#9020a1b388f721df7367d2003c01440c"><span class="id" title="binder">φ'</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a>(<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#31ed67d7b8100e791a08b3025d54d958"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#aea3e6356d11abe8bb90914e6edad6d6"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#9020a1b388f721df7367d2003c01440c"><span class="id" title="variable">φ'</span></a>) <a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">⋮</span></a><a class="idref" href="ISL.Simp_env.html#5c84f665e09767deef6203fe8a7315ab"><span class="id" title="notation">₂</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Simp_env.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a><a class="idref" href="ISL.Simp_env.html#6ffcb7e43d3401e8305ae2f88646d23f"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Program.Wf.html#WfExtensionality.fix_sub_eq_ext"><span class="id" title="lemma">Wf.WfExtensionality.fix_sub_eq_ext</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Simp_env.html#S.SimpEnv"><span class="id" title="section">SimpEnv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="S.simp_form" class="idref" href="#S.simp_form"><span class="id" title="definition">simp_form</span></a> {<a id="K:177" class="idref" href="#K:177"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="ae45f5346fb8097702c2c72d45f99bbb" class="idref" href="#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="binder">φ</span></a>:= <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ISL.Simp_env.html#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="variable">φ</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Simplification&nbsp;of&nbsp;formulas&nbsp;always&nbsp;decreases&nbsp;the&nbsp;weight.<br/>
&nbsp;&nbsp;This&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;only&nbsp;formulas&nbsp;with&nbsp;lower&nbsp;weight&nbsp;than&nbsp;⊤<br/>
&nbsp;&nbsp;are&nbsp;⊥,&nbsp;v,&nbsp;□⊥,&nbsp;□v,&nbsp;which&nbsp;are&nbsp;not&nbsp;tautologies&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="S.simp_form_weight" class="idref" href="#S.simp_form_weight"><span class="id" title="lemma">simp_form_weight</span></a> {<a id="K:179" class="idref" href="#K:179"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="6bac152cec15c49a478e72b6363d6ced" class="idref" href="#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a>(<a class="idref" href="ISL.Simp_env.html#S.simp_form"><span class="id" title="definition">simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> <a class="idref" href="ISL.Simp_env.html#6bac152cec15c49a478e72b6363d6ced"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Simp_env.html#S.simp_form"><span class="id" title="definition">simp_form</span></a>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form_weight"><span class="id" title="lemma">contextual_simp_form_weight</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> φ) <span class="id" title="keyword">as</span> [(<span class="id" title="var">_</span> &amp; [<span class="id" title="var">Hbot</span>|[[<span class="id" title="var">HK</span> <span class="id" title="var">Hbox</span>]|[<span class="id" title="var">v</span> [<span class="id" title="var">Ht</span> | [<span class="id" title="var">HK</span> <span class="id" title="var">Hb</span>]]]]] )|<span class="id" title="var">Hw</span>];<br/>
<span class="id" title="tactic">subst</span>; <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; [|<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>]. <span class="id" title="tactic">intros</span> (<span class="id" title="var">Hf</span>&amp;<span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#bot_not_tautology"><span class="id" title="lemma">bot_not_tautology</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Eqdep.html#EqdepTheory.eq_rect_eq"><span class="id" title="lemma">Eqdep.EqdepTheory.eq_rect_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbox</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hf</span>&amp;<span class="id" title="var">_</span>)|]; [|<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#box_bot_not_tautology"><span class="id" title="lemma">box_bot_not_tautology</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
- <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hf</span>&amp;<span class="id" title="var">_</span>)|]; [|<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.SequentProps.html#var_not_tautology"><span class="id" title="lemma">var_not_tautology</span></a> <span class="id" title="var">v</span>). <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Eqdep.html#EqdepTheory.eq_rect_eq"><span class="id" title="lemma">Eqdep.EqdepTheory.eq_rect_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a> <span class="id" title="keyword">as</span> [(<span class="id" title="var">Hf</span>&amp;<span class="id" title="var">_</span>)|]; [|<span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.SequentProps.html#box_var_not_tautology"><span class="id" title="lemma">box_var_not_tautology</span></a> <span class="id" title="var">v</span>). <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab44"></a><h2 class="section">Simplification and the weight ordering</h2>


<div class="paragraph"> </div>

In <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_env_order"><span class="id" title="axiom">simp_env_order</span></a></span>, we show that the simplification <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_env"><span class="id" title="axiom">simp_env</span></a></span> always
decreases the weight of a context. We introduce a tactic <span class="inlinecode"><span class="id" title="var">simp_env_tac</span></span>
for this, which is also used later.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simp_env_tac</span> :=<br/>
<span class="id" title="keyword">let</span> <span class="id" title="var">Hf</span> := <span class="id" title="tactic">fresh</span> "Hf" <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| |- <span class="id" title="keyword">context</span>[<a class="idref" href="ISL.Simp_env.html#S.sumor_bind2"><span class="id" title="definition">sumor_bind2</span></a> ?<span class="id" title="var">cond</span> ?<span class="id" title="var">A</span> ?<span class="id" title="var">B</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> φ1 := <span class="id" title="tactic">fresh</span> "φ1" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> φ2 := <span class="id" title="tactic">fresh</span> "φ2" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">Hc</span> := <span class="id" title="tactic">fresh</span> "Hc" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cond</span> <span class="id" title="keyword">as</span> [(φ1 &amp; φ2 &amp; <span class="id" title="var">Hc</span>) | <span class="id" title="var">Hf</span>]<br/>
| |- <span class="id" title="keyword">context</span>[<a class="idref" href="ISL.Simp_env.html#S.sumor_bind3"><span class="id" title="definition">sumor_bind3</span></a> ?<span class="id" title="var">cond</span> ?<span class="id" title="var">A</span> ?<span class="id" title="var">B</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> φ1 := <span class="id" title="tactic">fresh</span> "φ1" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> φ2 := <span class="id" title="tactic">fresh</span> "φ2" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> φ3 := <span class="id" title="tactic">fresh</span> "φ3" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">Hc</span> := <span class="id" title="tactic">fresh</span> "Hc" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cond</span> <span class="id" title="keyword">as</span> [(φ1 &amp; φ2 &amp; φ3 &amp; <span class="id" title="var">Hc</span>) | <span class="id" title="var">Hf</span>]<br/>
| |- <span class="id" title="keyword">context</span>[<a class="idref" href="ISL.Simp_env.html#S.sumor_bind1"><span class="id" title="definition">sumor_bind1</span></a> ?<span class="id" title="var">cond</span> ?<span class="id" title="var">A</span> ?<span class="id" title="var">B</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> φ1 := <span class="id" title="tactic">fresh</span> "φ1" <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> <span class="id" title="var">Hc</span> := <span class="id" title="tactic">fresh</span> "Hc" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cond</span> <span class="id" title="keyword">as</span> [(φ1 &amp; <span class="id" title="var">Hc</span>) | <span class="id" title="var">Hf</span>]<br/>
<span class="id" title="keyword">end</span>; <span class="id" title="tactic">simpl</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="S.simp_env_order" class="idref" href="#S.simp_env_order"><span class="id" title="lemma">simp_env_order</span></a> {<a id="K:181" class="idref" href="#K:181"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="e7e3bd9ae25c58ea3389e3988bf4faa7" class="idref" href="#e7e3bd9ae25c58ea3389e3988bf4faa7"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Order.html#env_order_refl"><span class="id" title="definition">env_order_refl</span></a> (<a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#e7e3bd9ae25c58ea3389e3988bf4faa7"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#e7e3bd9ae25c58ea3389e3988bf4faa7"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Wf.html#well_founded_induction_type"><span class="id" title="lemma">well_founded_induction_type</span></a> <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>).<br/>
{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hf</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#bot_not_tautology"><span class="id" title="lemma">bot_not_tautology</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_order_refl"><span class="id" title="definition">env_order_refl</span></a>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Order.html#env_weight_add"><span class="id" title="lemma">env_weight_add</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Formulas.html#weight_pos"><span class="id" title="lemma">weight_pos</span></a> φ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> 5 <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 5<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#81fd94e251a61ee523cdd7855774ae7c"><span class="id" title="notation">^</span></a>1) <span class="id" title="tactic">at</span> 1 <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_le_mono"><span class="id" title="lemma">Nat.add_le_mono</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.pow_le_mono_r"><span class="id" title="lemma">Nat.pow_le_mono_r</span></a>; <span class="id" title="var">lia</span>.<br/>
}<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hbot</span>.<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="var">simp_env_tac</span>.<br/>
<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_env_order_refl"><span class="id" title="lemma">env_order_env_order_refl</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Order.html#env_order_le_lt_trans"><span class="id" title="lemma">env_order_le_lt_trans</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>|]; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order_tac</span>).<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#env_order_self"><span class="id" title="lemma">env_order_self</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="S.simp_env_nil" class="idref" href="#S.simp_env_nil"><span class="id" title="lemma">simp_env_nil</span></a> {<a id="K:183" class="idref" href="#K:183"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} : <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Ho</span> := <a class="idref" href="ISL.Simp_env.html#S.simp_env_order"><span class="id" title="lemma">simp_env_order</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="keyword">as</span> [|φ <span class="id" title="var">Δ</span>].<br/>
<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="var">contradict</span> <span class="id" title="var">Ho</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_order_refl"><span class="id" title="definition">env_order_refl</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Order.html#env_weight_add"><span class="id" title="lemma">env_weight_add</span></a>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.lt_nge"><span class="id" title="lemma">Nat.lt_nge</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Order.html#env_weight"><span class="id" title="definition">env_weight</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">pose</span>(<a class="idref" href="ISL.Order.html#pow5_gt_0"><span class="id" title="lemma">Order.pow5_gt_0</span></a> (<a class="idref" href="ISL.Formulas.html#weight"><span class="id" title="definition">weight</span></a> φ)). <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Simp_env.html#S"><span class="id" title="module">S</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab45"></a><h2 class="section">Simplification is provably equivalent</h2>


<div class="paragraph"> </div>

The goal in this section is to prove that the simplification of a formula
(in context) is equivalent to the original.
We prove in <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#SoundS.contextual_simp_form_spec"><span class="id" title="lemma">contextual_simp_form_spec</span></a></span> that the function <span class="inlinecode"><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a></span>
creates equivalent formulas (in context).
This lets us then prove in <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SoundSimpT.equiv_env_simp_env"><span class="id" title="axiom">equiv_env_simp_env</span></a></span> that <span class="inlinecode"><a class="idref" href="ISL.Simplifications.html#SimpT.simp_env"><span class="id" title="axiom">simp_env</span></a></span> also creates
equivalent contexts.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="SoundS" class="idref" href="#SoundS"><span class="id" title="module">SoundS</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Simp_env.html#S"><span class="id" title="module">S</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="SoundS.Equivalence" class="idref" href="#SoundS.Equivalence"><span class="id" title="section">Equivalence</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">peapply'</span> <span class="id" title="var">th</span> := (<span class="id" title="var">erewrite</span> <a class="idref" href="ISL.Sequents.html#proper_Provable"><span class="id" title="instance">proper_Provable</span></a>;  [| |<span class="id" title="tactic">reflexivity</span>]);  [<span class="id" title="tactic">eapply</span> <span class="id" title="var">th</span>|<span class="id" title="var">equiv_tac</span>].<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">l_tac'</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#list_to_set_disj_open_boxes"><span class="id" title="lemma">list_to_set_disj_open_boxes</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Sequents.html#proper_Provable"><span class="id" title="instance">proper_Provable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#symmetry"><span class="id" title="definition">symmetry</span></a> (<a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)<br/>
|| <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Sequents.html#proper_Provable"><span class="id" title="instance">proper_Provable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#symmetry"><span class="id" title="definition">symmetry</span></a> (<a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)<br/>
|| <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Sequents.html#proper_Provable"><span class="id" title="instance">proper_Provable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#symmetry"><span class="id" title="definition">symmetry</span></a> (<a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)))) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)<br/>
|| <span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Sequents.html#proper_Provable"><span class="id" title="instance">proper_Provable</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a>(<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> (<a class="idref" href="ISL.Environments.html#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.RelationClasses.html#symmetry"><span class="id" title="definition">symmetry</span></a> (<a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))))) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SoundS.contextual_simp_form_spec" class="idref" href="#SoundS.contextual_simp_form_spec"><span class="id" title="lemma">contextual_simp_form_spec</span></a> {<a id="K:184" class="idref" href="#K:184"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="6c47ab78a6e5e3bed39dd19a10492bea" class="idref" href="#6c47ab78a6e5e3bed39dd19a10492bea"><span class="id" title="binder">Δ</span></a> <a id="e78a17b7316163d3e15451bc2db45a2e" class="idref" href="#e78a17b7316163d3e15451bc2db45a2e"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Simp_env.html#e78a17b7316163d3e15451bc2db45a2e"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#6c47ab78a6e5e3bed39dd19a10492bea"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Simplifications.html#equiv_env"><span class="id" title="definition">equiv_env</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#e78a17b7316163d3e15451bc2db45a2e"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#6c47ab78a6e5e3bed39dd19a10492bea"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Order.html#b25409afef98c1d6201f91f261503319"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <a class="idref" href="ISL.Simp_env.html#e78a17b7316163d3e15451bc2db45a2e"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Simp_env.html#6c47ab78a6e5e3bed39dd19a10492bea"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#e78a17b7316163d3e15451bc2db45a2e"><span class="id" title="variable">φ</span></a>) <a class="idref" href="ISL.Simp_env.html#6c47ab78a6e5e3bed39dd19a10492bea"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">induction</span> φ; <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hin</span>; <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>; <span class="id" title="tactic">simpl</span>;<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>. <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#top_provable"><span class="id" title="lemma">top_provable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ <span class="id" title="var">H</span>φ. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">peapply</span> (<a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">H</span>φ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">equiv_tac</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>; <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">equiv_tac</span>.<br/>
- <span class="id" title="tactic">case</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>. <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#top_provable"><span class="id" title="lemma">top_provable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ <span class="id" title="var">H</span>φ. <span class="id" title="var">peapply</span> (<a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">H</span>φ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">equiv_tac</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>; <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">equiv_tac</span>.<br/>
- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (φ2' := <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span> <a class="idref" href="ISL.Order.html#b25409afef98c1d6201f91f261503319"><span class="id" title="notation">•</span></a> φ1) φ2).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin2</span> : φ2 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin1</span> : φ1 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> φ2' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#AndL"><span class="id" title="constructor">AndL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HH</span> := <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span><span class="id" title="notation">).1</span>). <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="var">exch</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">HH</span> := <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span><span class="id" title="notation">).1</span>). <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_conj_sound_L"><span class="id" title="lemma">choose_conj_sound_L</span></a>; [|<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>]; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="tactic">subst</span> φ2'. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (φ2' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span>) φ1<a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span>) φ2<a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_weakeningL"><span class="id" title="lemma">generalised_weakeningL</span></a>. <span class="id" title="var">peapply</span> <a class="idref" href="ISL.Optimizations.html#choose_conj_equiv_R"><span class="id" title="lemma">choose_conj_equiv_R</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>, <a class="idref" href="ISL.Sequents.html#AndL"><span class="id" title="constructor">AndL</span></a>. <span class="id" title="var">exch</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin2'</span> : φ2' <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ2' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span> <a class="idref" href="ISL.Order.html#b25409afef98c1d6201f91f261503319"><span class="id" title="notation">•</span></a> φ2') φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span><span class="id" title="notation">).2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">case</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; [|<span class="id" title="tactic">tauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="var">exch</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span><span class="id" title="notation">).2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; <span class="id" title="tactic">case</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>; [|<span class="id" title="tactic">tauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#AndL_rev"><span class="id" title="lemma">AndL_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin1</span> : φ1 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin2</span> : φ2 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#OrL"><span class="id" title="constructor">OrL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">peapply'</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span><span class="id" title="notation">).1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]. <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_disj_sound_L1"><span class="id" title="lemma">choose_disj_sound_L1</span></a>, <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">peapply'</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span><span class="id" title="notation">).1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]. <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_disj_sound_L2"><span class="id" title="lemma">choose_disj_sound_L2</span></a>, <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> φ2) <span class="id" title="var">Δ</span>) φ1<a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> φ2) <span class="id" title="var">Δ</span>) φ2<a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_weakeningL"><span class="id" title="lemma">generalised_weakeningL</span></a>. <span class="id" title="var">peapply</span> <a class="idref" href="ISL.Optimizations.html#choose_disj_equiv_R"><span class="id" title="lemma">choose_disj_equiv_R</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.SequentProps.html#OrL_rev"><span class="id" title="lemma">OrL_rev</span></a> (<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> φ2) <span class="id" title="var">Δ</span>)) φ1 φ2 φ) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hp1</span> <span class="id" title="var">Hp2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#OrL"><span class="id" title="constructor">OrL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">peapply</span> (<span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]; <span class="id" title="var">ms</span>]. <span class="id" title="var">peapply</span> <span class="id" title="var">Hp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">peapply</span> (<span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[| <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]; <span class="id" title="var">ms</span>]. <span class="id" title="var">peapply</span> <span class="id" title="var">Hp2</span>.<br/>
- <span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin1</span> : φ1 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin2</span> : φ2 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>φ2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2) <span class="id" title="var">Δ</span><span class="id" title="notation">)</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">trivial</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> ( <a class="idref" href="ISL.Optimizations.html#choose_impl"><span class="id" title="definition">choose_impl</span></a> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2) <span class="id" title="var">Δ</span>) φ1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2) <span class="id" title="var">Δ</span> <a class="idref" href="ISL.Order.html#b25409afef98c1d6201f91f261503319"><span class="id" title="notation">•</span></a> φ1) φ2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_impl_sound_R"><span class="id" title="lemma">choose_impl_sound_R</span></a>, <a class="idref" href="ISL.Sequents.html#ImpR"><span class="id" title="constructor">ImpR</span></a>. <span class="id" title="var">exch</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hp1</span>:=<span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span><span class="id" title="notation">).2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp1</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp1</span>; [|<span class="id" title="tactic">tauto</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpR_rev"><span class="id" title="lemma">ImpR_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp1</span>. <span class="id" title="var">l_tac'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpR"><span class="id" title="constructor">ImpR</span></a>, <a class="idref" href="ISL.SequentProps.html#ImpL"><span class="id" title="lemma">ImpL</span></a>. <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span><span class="id" title="notation">).1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]. <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#choose_impl_sound_L"><span class="id" title="lemma">choose_impl_sound_L</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpR"><span class="id" title="constructor">ImpR</span></a>. <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpL"><span class="id" title="lemma">ImpL</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ1 <span class="id" title="var">_</span> <span class="id" title="var">Hin1</span><span class="id" title="notation">).1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">l_tac</span>. <span class="id" title="var">peapply'</span> <span class="id" title="notation">(</span><span class="id" title="var">IH</span>φ2 <span class="id" title="var">_</span> <span class="id" title="var">Hin2</span><span class="id" title="notation">).2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#generalised_axiom"><span class="id" title="lemma">generalised_axiom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">simpl</span> <a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a>; [|<span class="id" title="tactic">tauto</span> ]. <span class="id" title="var">equiv_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">exch</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdec</span>|<span class="id" title="var">Hdec</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ0 <span class="id" title="var">Hp</span>. <span class="id" title="var">exhibit</span> <span class="id" title="var">Hin</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="ISL.Formulas.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#top_provable"><span class="id" title="lemma">top_provable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> φ0 <span class="id" title="var">H</span>φ. <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ). <span class="id" title="tactic">exact</span> <span class="id" title="var">Hdec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">H</span>φ.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ0 <span class="id" title="var">Hp</span>; <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">equiv_tac</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">elem_of_list_to_set_disj</span> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SoundS.equiv_env_simp_env" class="idref" href="#SoundS.equiv_env_simp_env"><span class="id" title="lemma">equiv_env_simp_env</span></a> {<a id="K:187" class="idref" href="#K:187"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="55e8c2481e8ecaaabd24e2b89382ab72" class="idref" href="#55e8c2481e8ecaaabd24e2b89382ab72"><span class="id" title="binder">Δ</span></a>: <a class="idref" href="ISL.Simplifications.html#equiv_env"><span class="id" title="definition">equiv_env</span></a> (<a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#55e8c2481e8ecaaabd24e2b89382ab72"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="ISL.Simp_env.html#55e8c2481e8ecaaabd24e2b89382ab72"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Wf.html#well_founded_induction_type"><span class="id" title="lemma">well_founded_induction_type</span></a> <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>).<br/>
{ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#exfalso"><span class="id" title="lemma">exfalso</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">peapply</span> (<a class="idref" href="ISL.Sequents.html#ExFalso"><span class="id" title="constructor">ExFalso</span></a> <span class="id" title="notation">∅</span>).<br/>
}<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hbot</span>.<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="var">simp_env_tac</span>; (<span class="id" title="tactic">try</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="ISL.Simplifications.html#equiv_env_trans"><span class="id" title="lemma">equiv_env_trans</span></a>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="var">order_tac</span>|])).<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#AndL"><span class="id" title="constructor">AndL</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#AndL_rev"><span class="id" title="lemma">AndL_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc1</span> <span class="id" title="var">Hc2</span>]. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc1</span>, <span class="id" title="var">Hc2</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hc3</span>: <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> φ1 <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="definition">list_to_set_disj</span> <span class="id" title="var">Δ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span>φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2<span class="id" title="notation">]}</span> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#in_difference"><span class="id" title="lemma">in_difference</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">HF</span>. <span class="id" title="tactic">discriminate</span> <span class="id" title="var">HF</span>. <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc2</span> 0. <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc3</span> 1. <span class="id" title="var">peapply</span> <a class="idref" href="ISL.Sequents.html#ImpLVar"><span class="id" title="constructor">ImpLVar</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>. <span class="id" title="var">peapply'</span> (<a class="idref" href="ISL.SequentProps.html#ImpLVar_rev"><span class="id" title="lemma">ImpLVar_rev</span></a> (<span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> φ1 (<a class="idref" href="ISL.Environments.html#rm"><span class="id" title="definition">rm</span></a> (φ1 <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> φ2) <span class="id" title="var">Δ</span>))) φ1 φ2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc0</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpLAnd"><span class="id" title="constructor">ImpLAnd</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpLAnd_rev"><span class="id" title="lemma">ImpLAnd_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
-  <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc0</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpLOr"><span class="id" title="constructor">ImpLOr</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpLOr_rev"><span class="id" title="lemma">ImpLOr_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc0</span> <span class="id" title="var">H</span>φ1]. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc0</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> φ0. <span class="id" title="tactic">trivial</span>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span> [<span class="id" title="var">Heq</span> <span class="id" title="var">Hw</span>]]. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Simp_env.html#SoundS.contextual_simp_form_spec"><span class="id" title="lemma">contextual_simp_form_spec</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span>.<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpLAnd"><span class="id" title="constructor">ImpLAnd</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpLAnd_rev"><span class="id" title="lemma">ImpLAnd_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
-  <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Sequents.html#ImpLOr"><span class="id" title="constructor">ImpLOr</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="var">l_tac'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#ImpLOr_rev"><span class="id" title="lemma">ImpLOr_rev</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span> <span class="id" title="var">H</span>φ1]. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> φ <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="var">exhibit</span> <span class="id" title="var">Hc</span> 0. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.SequentProps.html#weakening"><span class="id" title="lemma">weakening</span></a>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Cut.html#additive_cut"><span class="id" title="lemma">additive_cut</span></a> <span class="id" title="keyword">with</span> φ1. <span class="id" title="tactic">trivial</span>. <span class="id" title="var">peapply'</span> <span class="id" title="var">Hp</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Simplifications.html#equiv_env_refl"><span class="id" title="lemma">equiv_env_refl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SoundS.equiv_form_simp_form" class="idref" href="#SoundS.equiv_form_simp_form"><span class="id" title="lemma">equiv_form_simp_form</span></a> {<a id="K:189" class="idref" href="#K:189"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="fd16858260bdb4f4014cee7bf1ad7fc6" class="idref" href="#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Simplifications.html#equiv_form"><span class="id" title="definition">equiv_form</span></a> (<a class="idref" href="ISL.Simp_env.html#S.simp_form"><span class="id" title="definition">simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="variable">φ</span></a>) <a class="idref" href="ISL.Simp_env.html#fd16858260bdb4f4014cee7bf1ad7fc6"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span>φ := <a class="idref" href="ISL.Simp_env.html#SoundS.contextual_simp_form_spec"><span class="id" title="lemma">contextual_simp_form_spec</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>φ<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> φ).<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ; [|<span class="id" title="tactic">tauto</span>].<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Simplifications.html#equiv_env_equiv_form"><span class="id" title="lemma">equiv_env_equiv_form</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Simp_env.html#SoundS.Equivalence"><span class="id" title="section">Equivalence</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="SoundS.Variables" class="idref" href="#SoundS.Variables"><span class="id" title="section">Variables</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab46"></a><h2 class="section">Simplification does not introduce new variables</h2>


<div class="paragraph"> </div>

We show that simplifying a context or formula does not introduce any new variables.
This is important for the application to Pitts' algorithm, where one of the correctness properties
is an upper bound on the variables that may be used in the constructed formula.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">occ</span> <span class="id" title="var">p</span> := <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span> ||<br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">Hnin</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="5e3db4283f696926da79020e054230db" class="idref" href="#5e3db4283f696926da79020e054230db"><span class="id" title="binder"><span id="9ced693a0f2c898e1f2c82d8cd4fec6a" class="id">φ0</span></span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Simp_env.html#5e3db4283f696926da79020e054230db"><span class="id" title="variable">φ0</span></a> <span class="id" title="notation">∈</span> ?<span class="id" title="var">Γ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">p</span> <a class="idref" href="ISL.Simp_env.html#5e3db4283f696926da79020e054230db"><span class="id" title="variable">φ0</span></a>  |- <span class="id" title="var">_</span> =&gt;<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hin</span> := <span class="id" title="tactic">fresh</span> "Hin" <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |<span class="id" title="var">Hocc</span> : ?<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> ?<span class="id" title="var">Γ</span> |- <span class="id" title="var">_</span> =&gt;   <span class="id" title="keyword">let</span> <span class="id" title="var">Hocc'</span> := <span class="id" title="tactic">fresh</span> "Hocc" <span class="id" title="tactic">in</span> <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hocc'</span> := <span class="id" title="var">Hnin</span> <span class="id" title="var">_</span> <span class="id" title="var">Hocc</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc'</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">Hin'</span> := <span class="id" title="tactic">fresh</span> "Hinx" <span class="id" title="tactic">in</span> <span class="id" title="tactic">assert</span>(<span class="id" title="var">Hin'</span> := <a class="idref" href="ISL.Environments.html#In_open_boxes"><span class="id" title="lemma">In_open_boxes</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hocc</span>); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a> <span class="id" title="tactic">in</span> * <span class="id" title="tactic">by</span> <span class="id" title="tactic">trivial</span>  <span class="id" title="keyword">end</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#env_in_add"><span class="id" title="lemma">env_in_add</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span>|[<span class="id" title="var">Hin</span>|<span class="id" title="var">Hin</span>]] ||<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span>|<span class="id" title="var">Hin</span>]);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; [|<span class="id" title="tactic">assumption</span>]);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnin</span>)<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span>  <a id="SoundS.occurs_in_contextual_simp_form" class="idref" href="#SoundS.occurs_in_contextual_simp_form"><span class="id" title="lemma">occurs_in_contextual_simp_form</span></a> {<a id="K:193" class="idref" href="#K:193"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="x:194" class="idref" href="#x:194"><span class="id" title="binder">x</span></a> <a id="c1e64c7a1c7e26de38e06a913561f083" class="idref" href="#c1e64c7a1c7e26de38e06a913561f083"><span class="id" title="binder">Δ</span></a> <a id="2b00bd4c6914345964d9d0a65873e65f" class="idref" href="#2b00bd4c6914345964d9d0a65873e65f"><span class="id" title="binder">φ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:194"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#c1e64c7a1c7e26de38e06a913561f083"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Simp_env.html#2b00bd4c6914345964d9d0a65873e65f"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:194"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#2b00bd4c6914345964d9d0a65873e65f"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">induction</span> φ; <span class="id" title="tactic">intro</span> <span class="id" title="var">Δ</span>; <span class="id" title="var">simp</span> <span class="id" title="var">contextual_simp_form</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec"><span class="id" title="lemma">Provable_dec</span></a>;<br/>
<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#occurs_in_choose_conj"><span class="id" title="lemma">occurs_in_choose_conj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">pose</span> (φ2' := <a class="idref" href="ISL.Simp_env.html#S.contextual_simp_form"><span class="id" title="definition">contextual_simp_form</span></a> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.Order.html#b25409afef98c1d6201f91f261503319"><span class="id" title="notation">•</span></a> φ1) φ2).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ1 (φ2' <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)); <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ2 (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)). <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#occurs_in_choose_disj"><span class="id" title="lemma">occurs_in_choose_disj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ1 <span class="id" title="var">Δ</span>); <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ2 <span class="id" title="var">Δ</span>). <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Optimizations.html#occurs_in_choose_impl"><span class="id" title="lemma">occurs_in_choose_impl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ1 <span class="id" title="var">Δ</span>); <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span>φ2 (φ1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>)). <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SoundS.equiv_env_vars" class="idref" href="#SoundS.equiv_env_vars"><span class="id" title="lemma">equiv_env_vars</span></a> {<a id="K:197" class="idref" href="#K:197"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="93f6336e81fff8ee2c80caf15acb00a7" class="idref" href="#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="binder">Δ</span></a> <a id="x:199" class="idref" href="#x:199"><span class="id" title="binder">x</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="d4eaba6e802ce72aec8f49cd9c4f62be" class="idref" href="#d4eaba6e802ce72aec8f49cd9c4f62be"><span class="id" title="binder">θ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#d4eaba6e802ce72aec8f49cd9c4f62be"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:199"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#d4eaba6e802ce72aec8f49cd9c4f62be"><span class="id" title="variable">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="ebe04dbce5ae5aae84e972502e369b85" class="idref" href="#ebe04dbce5ae5aae84e972502e369b85"><span class="id" title="binder">θ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Simp_env.html#ebe04dbce5ae5aae84e972502e369b85"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Simp_env.html#93f6336e81fff8ee2c80caf15acb00a7"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:199"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#ebe04dbce5ae5aae84e972502e369b85"><span class="id" title="variable">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">refine</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Wf.html#well_founded_induction_type"><span class="id" title="lemma">well_founded_induction_type</span></a> <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a> <span class="id" title="var">Δ</span>).<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>).<br/>
{ <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> [<span class="id" title="var">θ</span> [<span class="id" title="var">Hin</span> <span class="id" title="var">Hocc</span>]]. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">contradict</span> <span class="id" title="var">Hocc</span>. }<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hbot</span>.<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="var">simp_env_tac</span>; <span class="id" title="tactic">trivial</span>.<br/>

<br/>
<span class="id" title="var">all</span>:(<span class="id" title="var">decompose</span> <span class="id" title="var">record</span> <span class="id" title="var">Hc</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">decompose</span> <span class="id" title="var">record</span> <span class="id" title="var">Hc0</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hocc</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>; [|<span class="id" title="var">order_tac</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hocc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">θ</span> [<span class="id" title="var">Hin</span> <span class="id" title="var">Hocc</span>]];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- ?<a class="idref" href="ISL.Environments.html#list_to_set_disj_env_add"><span class="id" title="lemma">list_to_set_disj_env_add</span></a>, <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> ((<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span>, <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="ISL.Environments.html#in_rm"><span class="id" title="lemma">in_rm</span></a>, <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Simp_env.html#SoundS.occurs_in_contextual_simp_form"><span class="id" title="lemma">occurs_in_contextual_simp_form</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span>[<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span> || <span class="id" title="tactic">tauto</span>]) ||<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin</span> | <span class="id" title="var">Hin</span>] ||<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">Hin</span> : ?<span class="id" title="var">a</span> <span class="id" title="notation">∈</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">tauto</span> <span class="id" title="keyword">end</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="SoundS.occurs_in_simp_form" class="idref" href="#SoundS.occurs_in_simp_form"><span class="id" title="lemma">occurs_in_simp_form</span></a> {<a id="K:202" class="idref" href="#K:202"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="x:203" class="idref" href="#x:203"><span class="id" title="binder">x</span></a> <a id="b8ce66a24bbaf47a23138b90a28018e2" class="idref" href="#b8ce66a24bbaf47a23138b90a28018e2"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:203"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Simp_env.html#S.simp_form"><span class="id" title="definition">simp_form</span></a> <a class="idref" href="ISL.Simp_env.html#b8ce66a24bbaf47a23138b90a28018e2"><span class="id" title="variable">φ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Simp_env.html#x:203"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Simp_env.html#b8ce66a24bbaf47a23138b90a28018e2"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Simp_env.html#SoundS.occurs_in_contextual_simp_form"><span class="id" title="lemma">occurs_in_contextual_simp_form</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Simp_env.html#SoundS.Variables"><span class="id" title="section">Variables</span></a>.<br/>

<br/>
</div>

<div class="doc">
The simp_env function is idempotent. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="SoundS.simp_env_idempotent" class="idref" href="#SoundS.simp_env_idempotent"><span class="id" title="lemma">simp_env_idempotent</span></a> {<a id="K:205" class="idref" href="#K:205"><span class="id" title="binder">K</span></a> : <a class="idref" href="ISL.Formulas.html#Kind"><span class="id" title="class">Kind</span></a>} <a id="e1931aaf4589155c4f591d340f69fae8" class="idref" href="#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="binder">Δ</span></a>: <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> (<a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Simp_env.html#S.simp_env"><span class="id" title="definition">simp_env</span></a> <a class="idref" href="ISL.Simp_env.html#e1931aaf4589155c4f591d340f69fae8"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Wf.html#well_founded_induction_type"><span class="id" title="lemma">well_founded_induction_type</span></a> <a class="idref" href="ISL.Order.html#wf_env_order"><span class="id" title="definition">wf_env_order</span></a>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a> <span class="id" title="var">Δ</span>).<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>).<br/>
{ <span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a>. <span class="id" title="tactic">case</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>). <span class="id" title="tactic">trivial</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="var">contradict</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">peapply</span> (<a class="idref" href="ISL.Sequents.html#ExFalso"><span class="id" title="constructor">ExFalso</span></a> <span class="id" title="notation">∅</span>). }<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hbot</span>.<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="var">simp_env_tac</span>; (<span class="id" title="tactic">try</span> (<span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hind</span>; <span class="id" title="var">order_tac</span>)).<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Simp_env.html#S.simp_env_eq"><span class="id" title="lemma">simp_env_eq</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="var">Δ</span> <a class="idref" href="ISL.DecisionProcedure.html#91e367ffb5695e33d98691261c516937"><span class="id" title="notation">⊢?</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>); [<span class="id" title="tactic">intros</span> [<span class="id" title="var">He</span> <span class="id" title="var">_</span>]; <span class="id" title="tactic">tauto</span>| <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>].<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="var">simp_env_tac</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hc</span>); <span class="id" title="var">contradict</span> <span class="id" title="var">Hc</span>; <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">eauto</span>); <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.le_ngt"><span class="id" title="lemma">Nat.le_ngt</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hf1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.PeanoNat.html#Nat.le_ngt"><span class="id" title="lemma">Nat.le_ngt</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hf1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hf4</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.DecisionProcedure.html#Provable_dec_of_Prop"><span class="id" title="lemma">Provable_dec_of_Prop</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.Simp_env.html#SoundS"><span class="id" title="module">SoundS</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
