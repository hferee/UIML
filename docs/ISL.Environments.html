<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/hferee/UIML">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="./demo.html"> Demo </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ISL.Environments</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Overview: Environments</h1>


<div class="paragraph"> </div>

  An environment is a multiset of formulas. We rely on stdpp multisets
  mostly for their powerful multiset equivalence tactic.
<div class="paragraph"> </div>

 Notion of wellfoundedness 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Wf.html#"><span class="id" title="library">Coq.Program.Wf</span></a>.<br/>

<br/>
</div>

<div class="doc">
Stdpp implementation of multisets 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">stdpp.gmultiset</span>.<br/>

<br/>
</div>

<div class="doc">
Our propositional formulas, including their countability. 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="ISL.Formulas.html#"><span class="id" title="library">ISL.Formulas</span></a>.<br/>

<br/>
</div>

<div class="doc">
An environment is defined as a finite multiset of formulas
(in the sense of the stdpp library).
This requires decidable equality and countability of the underlying set. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="env" class="idref" href="#env"><span class="id" title="definition">env</span></a> := @<span class="id" title="record">gmultiset</span> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="ISL.Formulas.html#form_count"><span class="id" title="instance">form_count</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singleton" class="idref" href="#singleton"><span class="id" title="instance">singleton</span></a> : <span class="id" title="class">Singleton</span> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="instance">gmultiset_singleton</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="singletonMS" class="idref" href="#singletonMS"><span class="id" title="instance">singletonMS</span></a> : <span class="id" title="class">SingletonMS</span> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="definition">base.singleton</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a> <span class="id" title="definition">empty</span> <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">singleton</span></a> <span class="id" title="definition">union</span> <span class="id" title="definition">intersection</span> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> : <span class="id" title="var">mset</span>.<br/>
<span class="comment">(*&nbsp;useful&nbsp;notations&nbsp;:<br/>
&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"></span>}&nbsp;:&nbsp;singleton<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊎&nbsp;:&nbsp;disjoint&nbsp;union<br/>
&nbsp;&nbsp;&nbsp;\:&nbsp;difference&nbsp;(setminus)<br/>
&nbsp;&nbsp;&nbsp;{<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode"></span>}&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode">{[+</span> <span class="inlinecode"><span class="id" title="var">x</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>;</span> <span class="inlinecode">…</span> <span class="inlinecode">+]}</span>&nbsp;*disjoint*&nbsp;union&nbsp;of&nbsp;singletons<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⊂@&nbsp;:&nbsp;include<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="empty" class="idref" href="#empty"><span class="id" title="definition">empty</span></a> := <span class="id" title="notation">∅</span> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ms</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.empty</span>, <span class="id" title="instance">gmultiset_empty</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="var">autounfold</span> <span class="id" title="keyword">with</span> <span class="id" title="var">mset</span>; <span class="id" title="var">multiset_solver</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_elem_of" class="idref" href="#proper_elem_of"><span class="id" title="instance">proper_elem_of</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(=)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> <a id="x:1" class="idref" href="#x:1"><span class="id" title="binder">x</span></a> <a id="y:2" class="idref" href="#y:2"><span class="id" title="binder">y</span></a> =&gt; <a class="idref" href="ISL.Environments.html#x:1"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ISL.Environments.html#y:2"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a>) <span class="id" title="definition">elem_of</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> φ φ' <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_disj_union" class="idref" href="#proper_disj_union"><span class="id" title="instance">proper_disj_union</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Δ'</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Notation</span> <a id="71ca1960dd16f5a2fd2bf72245ca13b9" class="idref" href="#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">&quot;</span></a>Γ • φ" := (<span class="id" title="definition">disj_union</span> <span class="id" title="var">Γ</span> (<span class="id" title="definition">base.singletonMS</span> φ)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 105, φ <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h1 class="section">Multiset utilities</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="multeq_meq" class="idref" href="#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a> (<a id="M:3" class="idref" href="#M:3"><span class="id" title="binder">M</span></a> <a id="N:4" class="idref" href="#N:4"><span class="id" title="binder">N</span></a>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:3"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:4"><span class="id" title="variable">N</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#M:3"><span class="id" title="variable">M</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="ISL.Environments.html#N:4"><span class="id" title="variable">N</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">multiset_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_mult" class="idref" href="#diff_mult"><span class="id" title="lemma">diff_mult</span></a> (<a id="M:6" class="idref" href="#M:6"><span class="id" title="binder">M</span></a> <a id="N:7" class="idref" href="#N:7"><span class="id" title="binder">N</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="x:8" class="idref" href="#x:8"><span class="id" title="binder">x</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>):<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:8"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#M:6"><span class="id" title="variable">M</span></a> <span class="id" title="notation">∖</span> <a class="idref" href="ISL.Environments.html#N:7"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:8"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:6"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:8"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:7"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_difference</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_mult" class="idref" href="#union_mult"><span class="id" title="lemma">union_mult</span></a> <a id="M:9" class="idref" href="#M:9"><span class="id" title="binder">M</span></a> <a id="N:10" class="idref" href="#N:10"><span class="id" title="binder">N</span></a> (<a id="x:11" class="idref" href="#x:11"><span class="id" title="binder">x</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:11"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#M:9"><span class="id" title="variable">M</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#N:10"><span class="id" title="variable">N</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:11"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#M:9"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:11"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#N:10"><span class="id" title="variable">N</span></a>)%<span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_disj_union</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_in" class="idref" href="#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a> (<a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> <a id="y:13" class="idref" href="#y:13"><span class="id" title="binder">y</span></a>: <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <a class="idref" href="ISL.Environments.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#y:13"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:12"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#y:13"><span class="id" title="variable">y</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="singleton_mult_notin" class="idref" href="#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a> (<a id="x:14" class="idref" href="#x:14"><span class="id" title="binder">x</span></a> <a id="y:15" class="idref" href="#y:15"><span class="id" title="binder">y</span></a>: <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <a class="idref" href="ISL.Environments.html#x:14"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="ISL.Environments.html#y:15"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">multiplicity</span> <a class="idref" href="ISL.Environments.html#x:14"><span class="id" title="variable">x</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#y:15"><span class="id" title="variable">y</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">multiplicity_singleton_ne</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Two&nbsp;useful&nbsp;basic&nbsp;facts&nbsp;about&nbsp;multisets&nbsp;containing&nbsp;(or&nbsp;not)&nbsp;certain&nbsp;elements.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_replace" class="idref" href="#env_replace"><span class="id" title="lemma">env_replace</span></a> {<a id="a2b47ff948e41f039782f954507c588d" class="idref" href="#a2b47ff948e41f039782f954507c588d"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} <a id="cf2bafe08dc6a1e0f9e48d8c55d06dab" class="idref" href="#cf2bafe08dc6a1e0f9e48d8c55d06dab"><span class="id" title="binder">φ</span></a> {<a id="08be11f92c1f14b07d68ee6b4c3bf731" class="idref" href="#08be11f92c1f14b07d68ee6b4c3bf731"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#08be11f92c1f14b07d68ee6b4c3bf731"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#a2b47ff948e41f039782f954507c588d"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#a2b47ff948e41f039782f954507c588d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#cf2bafe08dc6a1e0f9e48d8c55d06dab"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#08be11f92c1f14b07d68ee6b4c3bf731"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#a2b47ff948e41f039782f954507c588d"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#08be11f92c1f14b07d68ee6b4c3bf731"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#cf2bafe08dc6a1e0f9e48d8c55d06dab"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">θ</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>, <a class="idref" href="ISL.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="ISL.Environments.html#union_mult"><span class="id" title="lemma">union_mult</span></a>, <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Arith.PeanoNat.html#Nat.add_sub_swap"><span class="id" title="lemma">PeanoNat.Nat.add_sub_swap</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">θ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#singleton_mult_in"><span class="id" title="lemma">singleton_mult_in</span></a>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#singleton_mult_notin"><span class="id" title="lemma">singleton_mult_notin</span></a>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="diff_not_in" class="idref" href="#diff_not_in"><span class="id" title="lemma">diff_not_in</span></a> (<a id="d2f974a479ebcd81c5829843a3f7c760" class="idref" href="#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="409487d9ba8c2c07cac621d64c242e1e" class="idref" href="#409487d9ba8c2c07cac621d64c242e1e"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#409487d9ba8c2c07cac621d64c242e1e"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="ISL.Environments.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#409487d9ba8c2c07cac621d64c242e1e"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#multeq_meq"><span class="id" title="lemma">multeq_meq</span></a>. <span class="id" title="tactic">intros</span> ψ.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#diff_mult"><span class="id" title="lemma">diff_mult</span></a>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">elem_of_multiplicity</span> φ <span class="id" title="var">Γ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hf</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Nat.html#mul"><span class="id" title="definition">mult</span></a>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (φ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> ψ)).<br/>
- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="lemma">multiplicity_singleton_ne</span> ψ φ); <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h1 class="section">Conjunction, disjunction, and implication</h1>
 In the construction of propositional quantifiers, we often want to take the conjunction, disjunction, or implication of a (multi)set of formulas. The following results give some small optimizations of this process, by reducing "obvious" conjunctions such as ⊤ ∧ ϕ, ⊥ ∧ ϕ, etc. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="irreducible" class="idref" href="#irreducible"><span class="id" title="definition">irreducible</span></a> (<a id="57d703d05664bc6befa1a1f25e729927" class="idref" href="#57d703d05664bc6befa1a1f25e729927"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="p:22" class="idref" href="#p:22"><span class="id" title="binder">p</span></a> <a id="7232aa770a8277aafc66777e1f8de7ed" class="idref" href="#7232aa770a8277aafc66777e1f8de7ed"><span class="id" title="binder">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Environments.html#p:22"><span class="id" title="variable">p</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Environments.html#7232aa770a8277aafc66777e1f8de7ed"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <a class="idref" href="ISL.Environments.html#p:22"><span class="id" title="variable">p</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="33c8ef2ac05940dc89a8c1627bb5cbd9" class="idref" href="#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="binder">φ</span></a> <a id="54053db614d8560a9b0fceb78ac56195" class="idref" href="#54053db614d8560a9b0fceb78ac56195"><span class="id" title="binder">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Environments.html#54053db614d8560a9b0fceb78ac56195"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#33c8ef2ac05940dc89a8c1627bb5cbd9"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#69989fa7eceaf90171daa1151728e2a6"><span class="id" title="notation">∨</span></a> <a class="idref" href="ISL.Environments.html#54053db614d8560a9b0fceb78ac56195"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#57d703d05664bc6befa1a1f25e729927"><span class="id" title="variable">Γ</span></a>.<br/>

<br/>
</div>

<div class="doc">
To be noted: we remove duplicates first 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="conjunction" class="idref" href="#conjunction"><span class="id" title="definition">conjunction</span></a> <a id="l:26" class="idref" href="#l:26"><span class="id" title="binder">l</span></a> := <span class="id" title="definition">foldl</span> <a class="idref" href="ISL.Formulas.html#make_conj"><span class="id" title="definition">make_conj</span></a> (<a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#nodup"><span class="id" title="definition">nodup</span></a> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="ISL.Environments.html#l:26"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="477b8e4d1694e4a1d705e8bc8b366a21" class="idref" href="#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">&quot;</span></a>⋀" := <a class="idref" href="ISL.Environments.html#conjunction"><span class="id" title="definition">conjunction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="disjunction" class="idref" href="#disjunction"><span class="id" title="definition">disjunction</span></a> <a id="l:27" class="idref" href="#l:27"><span class="id" title="binder">l</span></a> := <span class="id" title="definition">foldl</span> <a class="idref" href="ISL.Formulas.html#make_disj"><span class="id" title="definition">make_disj</span></a> <a class="idref" href="ISL.Formulas.html#1a3a4fd597219ab65145ec13c238adc3"><span class="id" title="notation">⊥</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#nodup"><span class="id" title="definition">nodup</span></a> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <a class="idref" href="ISL.Environments.html#l:27"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="9392c2b2890c2b7f46c695283fb6e03f" class="idref" href="#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">&quot;</span></a>⋁" := <a class="idref" href="ISL.Environments.html#disjunction"><span class="id" title="definition">disjunction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="occurs_in_list" class="idref" href="#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <a id="x:28" class="idref" href="#x:28"><span class="id" title="binder">x</span></a> (<a id="l:29" class="idref" href="#l:29"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> (<a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:28"><span class="id" title="variable">x</span></a>) <a class="idref" href="ISL.Environments.html#l:29"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="decidable_occurs_in_list" class="idref" href="#decidable_occurs_in_list"><span class="id" title="instance">decidable_occurs_in_list</span></a> <a id="x:30" class="idref" href="#x:30"><span class="id" title="binder">x</span></a> <a id="l:31" class="idref" href="#l:31"><span class="id" title="binder">l</span></a>: <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <a class="idref" href="ISL.Environments.html#x:30"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#l:31"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="instance">list.Exists_dec</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="variables_conjunction" class="idref" href="#variables_conjunction"><span class="id" title="lemma">variables_conjunction</span></a> <a id="x:32" class="idref" href="#x:32"><span class="id" title="binder">x</span></a> <a id="l:33" class="idref" href="#l:33"><span class="id" title="binder">l</span></a> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:32"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">⋀</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">l</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <a class="idref" href="ISL.Environments.html#x:32"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#l:33"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#conjunction"><span class="id" title="definition">conjunction</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="4ec1ce917b9bde490905060cadfd8ac2" class="idref" href="#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="binder"><span id="a0fcf3e821e776492e9f1853fa107353" class="id">ψ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">x</span> (<span class="id" title="definition">foldl</span> <a class="idref" href="ISL.Formulas.html#make_conj"><span class="id" title="definition">make_conj</span></a> <a class="idref" href="ISL.Environments.html#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="variable">ψ</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#nodup"><span class="id" title="definition">nodup</span></a> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">x</span> <a class="idref" href="ISL.Environments.html#4ec1ce917b9bde490905060cadfd8ac2"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ISL.Environments.html#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>).<br/>
{<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">a</span> <span class="id" title="var">l</span> <span class="id" title="var">IHl</span>]; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">intros</span> ψ <span class="id" title="var">Hocc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hocc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx</span>|<span class="id" title="var">Hin</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Formulas.html#occurs_in_make_conj"><span class="id" title="lemma">occurs_in_make_conj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx</span>|<span class="id" title="var">Hx</span>]; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
}<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="variables_disjunction" class="idref" href="#variables_disjunction"><span class="id" title="lemma">variables_disjunction</span></a> <a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a> <a id="l:37" class="idref" href="#l:37"><span class="id" title="binder">l</span></a> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:36"><span class="id" title="variable">x</span></a> (<a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">⋁</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">l</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <a class="idref" href="ISL.Environments.html#x:36"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#l:37"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#disjunction"><span class="id" title="definition">disjunction</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="ddd245c1acdcca94398ffd171856d37e" class="idref" href="#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="binder"><span id="68a32975a994cfa7e966f43c2f83b29b" class="id">ψ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">x</span> (<span class="id" title="definition">foldl</span> <a class="idref" href="ISL.Formulas.html#make_disj"><span class="id" title="definition">make_disj</span></a> <a class="idref" href="ISL.Environments.html#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="variable">ψ</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#nodup"><span class="id" title="definition">nodup</span></a> <a class="idref" href="ISL.Formulas.html#form_eq_dec"><span class="id" title="instance">form_eq_dec</span></a> <span class="id" title="var">l</span>))<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">x</span> <a class="idref" href="ISL.Environments.html#ddd245c1acdcca94398ffd171856d37e"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ISL.Environments.html#occurs_in_list"><span class="id" title="definition">occurs_in_list</span></a> <span class="id" title="var">x</span> <span class="id" title="var">l</span>).<br/>
{<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>.<br/>
- <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="tactic">intros</span> ψ <span class="id" title="var">Hocc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_dec"><span class="id" title="lemma">in_dec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hocc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx</span>|<span class="id" title="var">Hx</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Formulas.html#occurs_in_make_disj"><span class="id" title="lemma">occurs_in_make_disj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hx</span>|<span class="id" title="var">Hx</span>]; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
}<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hocc</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab4"></a><h1 class="section">A dependent version of `map`</h1>

</div>
<div class="code">
<span class="comment">(*&nbsp;a&nbsp;dependent&nbsp;map&nbsp;on&nbsp;lists,&nbsp;with&nbsp;knowledge&nbsp;that&nbsp;we&nbsp;are&nbsp;on&nbsp;that&nbsp;list&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;should&nbsp;work&nbsp;with&nbsp;any&nbsp;set-like&nbsp;type&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="dep_in_map_aux" class="idref" href="#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> {<a id="A:40" class="idref" href="#A:40"><span class="id" title="binder">A</span></a> <a id="B:41" class="idref" href="#B:41"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="18bf8c43a60891738d0d6115aa956824" class="idref" href="#18bf8c43a60891738d0d6115aa956824"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#A:40"><span class="id" title="variable">A</span></a>) (<a id="f:44" class="idref" href="#f:44"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="b21a593cc5a463973aa52c2cb99622b5" class="idref" href="#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#b21a593cc5a463973aa52c2cb99622b5"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#18bf8c43a60891738d0d6115aa956824"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#B:41"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;<a id="856513e222f83a9ce3fb086e4a901b8f" class="idref" href="#856513e222f83a9ce3fb086e4a901b8f"><span class="id" title="binder">Γ'</span></a> (<a id="81212f0e735220848022f7916413901f" class="idref" href="#81212f0e735220848022f7916413901f"><span class="id" title="binder">HΓ'</span></a> : <a class="idref" href="ISL.Environments.html#856513e222f83a9ce3fb086e4a901b8f"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="ISL.Environments.html#18bf8c43a60891738d0d6115aa956824"><span class="id" title="variable">Γ</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#B:41"><span class="id" title="variable">B</span></a>:=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#856513e222f83a9ce3fb086e4a901b8f"><span class="id" title="variable">Γ'</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">Γ'</span> =&gt; <a class="idref" href="ISL.Environments.html#f:44"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="ISL.Environments.html#dep_in_map_aux:47"><span class="id" title="definition">dep_in_map_aux</span></a> <a class="idref" href="ISL.Environments.html#18bf8c43a60891738d0d6115aa956824"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:44"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#856513e222f83a9ce3fb086e4a901b8f"><span class="id" title="variable">Γ'</span></a> <span class="id" title="var">_</span><br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dep_in_map" class="idref" href="#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> {<a id="A:49" class="idref" href="#A:49"><span class="id" title="binder">A</span></a> <a id="B:50" class="idref" href="#B:50"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f82dd08e39371d88da60b669e12500e0" class="idref" href="#f82dd08e39371d88da60b669e12500e0"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#A:49"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;(<a id="f:53" class="idref" href="#f:53"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <a id="61a02e58de2729ebf34d706c72aaf4b0" class="idref" href="#61a02e58de2729ebf34d706c72aaf4b0"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#61a02e58de2729ebf34d706c72aaf4b0"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#f82dd08e39371d88da60b669e12500e0"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#B:50"><span class="id" title="variable">B</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.Environments.html#B:50"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <a class="idref" href="ISL.Environments.html#f82dd08e39371d88da60b669e12500e0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:53"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#f82dd08e39371d88da60b669e12500e0"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;generalises&nbsp;to&nbsp;any&nbsp;type.&nbsp;decidability&nbsp;of&nbsp;equality&nbsp;over&nbsp;this&nbsp;type&nbsp;is&nbsp;necessary&nbsp;for&nbsp;a&nbsp;result&nbsp;in&nbsp;"Type"&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_in_map" class="idref" href="#in_in_map"><span class="id" title="lemma">in_in_map</span></a> {<a id="A:54" class="idref" href="#A:54"><span class="id" title="binder">A</span></a> <a id="B:55" class="idref" href="#B:55"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:58" class="idref" href="#HD:58"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:56" class="idref" href="#a:56"><span class="id" title="binder">a</span></a> <a id="b:57" class="idref" href="#b:57"><span class="id" title="binder">b</span></a> : <a class="idref" href="ISL.Environments.html#B:55"><span class="id" title="variable">B</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#a:56"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#b:57"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;<a id="8c3656d4563d72755a783e1c7660c397" class="idref" href="#8c3656d4563d72755a783e1c7660c397"><span class="id" title="binder">Γ</span></a> (<a id="f:61" class="idref" href="#f:61"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="a6907591c18ff9049e8f912ac42d7ac7" class="idref" href="#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#A:54"><span class="id" title="variable">A</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#a6907591c18ff9049e8f912ac42d7ac7"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#8c3656d4563d72755a783e1c7660c397"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#B:55"><span class="id" title="variable">B</span></a>) <a id="34384e26597da7484e2b7368df1adaed" class="idref" href="#34384e26597da7484e2b7368df1adaed"><span class="id" title="binder">ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#34384e26597da7484e2b7368df1adaed"><span class="id" title="variable">ψ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#8c3656d4563d72755a783e1c7660c397"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:61"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="757e0ff99bd1d9d24cc3dc54cc696e43" class="idref" href="#757e0ff99bd1d9d24cc3dc54cc696e43"><span class="id" title="binder">ψ0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin:64" class="idref" href="#Hin:64"><span class="id" title="binder">Hin</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#34384e26597da7484e2b7368df1adaed"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#f:61"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#757e0ff99bd1d9d24cc3dc54cc696e43"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin:64"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="d6d8463184c91de5f4467896d457571c" class="idref" href="#d6d8463184c91de5f4467896d457571c"><span class="id" title="binder"><span id="919d90cef4a534312d1ea3660a62680e" class="id">Γ'</span></span></a> (<a id="905a03590b890a2b1ab4cd8dc58935e6" class="idref" href="#905a03590b890a2b1ab4cd8dc58935e6"><span class="id" title="binder"><span id="84b54d572f1b00cc7a498fce5699eac5" class="id">HΓ'</span></span></a> : <a class="idref" href="ISL.Environments.html#d6d8463184c91de5f4467896d457571c"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span><span class="id" title="notation">),</span> ψ <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#d6d8463184c91de5f4467896d457571c"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#905a03590b890a2b1ab4cd8dc58935e6"><span class="id" title="variable">HΓ'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a><a id="6b376ce2d2ea3812d51cff4d429f9118" class="idref" href="#6b376ce2d2ea3812d51cff4d429f9118"><span class="id" title="binder"><span id="e3067d317264c3a3f3c8cef1562da686" class="id">ψ0</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="Hin:68" class="idref" href="#Hin:68"><span class="id" title="binder"><span id="Hin:72" class="id">Hin</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Environments.html#6b376ce2d2ea3812d51cff4d429f9118"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> ψ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#6b376ce2d2ea3812d51cff4d429f9118"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin:68"><span class="id" title="variable">Hin</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>); [|<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcut</span>].<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> <span class="id" title="var">Hin</span>.<br/>
- <span class="id" title="var">contradict</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">elem_of_nil</span>.<br/>
- <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">H</span> : ψ <span class="id" title="notation">∈</span> ?<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">HΓ''</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)); [| <span class="id" title="tactic">pose</span> (<span class="id" title="var">myHΓ'</span> := <span class="id" title="var">HΓ''</span>)] <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">myHΓ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Definition</span> <a id="in_subset" class="idref" href="#in_subset"><span class="id" title="definition">in_subset</span></a> {<a id="240819cd2e04415031aa8ca633621322" class="idref" href="#240819cd2e04415031aa8ca633621322"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} {<a id="d9f7d271dd22a6e3b424659af6502b41" class="idref" href="#d9f7d271dd22a6e3b424659af6502b41"><span class="id" title="binder">Γ'</span></a>} (<a id="Hi:75" class="idref" href="#Hi:75"><span class="id" title="binder">Hi</span></a> : <a class="idref" href="ISL.Environments.html#d9f7d271dd22a6e3b424659af6502b41"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#240819cd2e04415031aa8ca633621322"><span class="id" title="variable">Γ</span></a>) {<a id="3a1b30391d93daa46b152b2918cdea99" class="idref" href="#3a1b30391d93daa46b152b2918cdea99"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:77" class="idref" href="#Hin:77"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.Environments.html#3a1b30391d93daa46b152b2918cdea99"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#d9f7d271dd22a6e3b424659af6502b41"><span class="id" title="variable">Γ'</span></a>) : <a class="idref" href="ISL.Environments.html#3a1b30391d93daa46b152b2918cdea99"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#240819cd2e04415031aa8ca633621322"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span>,<span class="id" title="var">Hi</span>, <span class="id" title="var">Hin</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;converse&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;we&nbsp;require&nbsp;proof&nbsp;irrelevance&nbsp;for&nbsp;the&nbsp;mapped&nbsp;function&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_in" class="idref" href="#in_map_in"><span class="id" title="lemma">in_map_in</span></a> {<a id="A:78" class="idref" href="#A:78"><span class="id" title="binder">A</span></a> <a id="B:79" class="idref" href="#B:79"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} {<a id="HD:82" class="idref" href="#HD:82"><span class="id" title="binder">HD</span></a> : <span class="id" title="notation">forall</span> <a id="a:80" class="idref" href="#a:80"><span class="id" title="binder">a</span></a> <a id="b:81" class="idref" href="#b:81"><span class="id" title="binder">b</span></a> : <a class="idref" href="ISL.Environments.html#A:78"><span class="id" title="variable">A</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#a:80"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#b:81"><span class="id" title="variable">b</span></a>)}<br/>
&nbsp;&nbsp;{<a id="7f0b6c4481d58aa56d12a792961f7b07" class="idref" href="#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="binder">Γ</span></a>} {<a id="f:85" class="idref" href="#f:85"><span class="id" title="binder">f</span></a> : <span class="id" title="notation">forall</span> <span class="id" title="notation">(</span><a id="cb6ccfc86273c6948c0660f4085a8084" class="idref" href="#cb6ccfc86273c6948c0660f4085a8084"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#A:78"><span class="id" title="variable">A</span></a><span class="id" title="notation">),</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#cb6ccfc86273c6948c0660f4085a8084"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#B:79"><span class="id" title="variable">B</span></a>} {<a id="383ef03cda5d9935d8bc0f235b7553d9" class="idref" href="#383ef03cda5d9935d8bc0f235b7553d9"><span class="id" title="binder">ψ0</span></a>} (<a id="Hin:87" class="idref" href="#Hin:87"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.Environments.html#383ef03cda5d9935d8bc0f235b7553d9"><span class="id" title="variable">ψ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="variable">Γ</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':88" class="idref" href="#Hin':88"><span class="id" title="binder">Hin'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#f:85"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#383ef03cda5d9935d8bc0f235b7553d9"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin':88"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#f:85"><span class="id" title="variable">f</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a>.<br/>
<span class="id" title="tactic">assert</span>(<span class="id" title="var">Hcut</span> : <span class="id" title="notation">forall</span> <a id="4254036c99798cd7148a7d2ce196e2d7" class="idref" href="#4254036c99798cd7148a7d2ce196e2d7"><span class="id" title="binder"><span id="7f51aa536e7a2b456fa495de46ba5659" class="id">Γ'</span></span></a> (<a id="02fc4e4a49e8fb1e8e8c771e691a8637" class="idref" href="#02fc4e4a49e8fb1e8e8c771e691a8637"><span class="id" title="binder"><span id="4fc1b260a32cafa19ed24686daf328ac" class="id">HΓ'</span></span></a> : <a class="idref" href="ISL.Environments.html#4254036c99798cd7148a7d2ce196e2d7"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">⊆</span> <span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span>) <a id="42f9981b8f3762eda39f7891993b3197" class="idref" href="#42f9981b8f3762eda39f7891993b3197"><span class="id" title="binder"><span id="669d61c0b897a6d994b4546c0a636fbe" class="id">ψ0</span></span></a> (<a id="Hin:92" class="idref" href="#Hin:92"><span class="id" title="binder"><span id="Hin:97" class="id">Hin</span></span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="ISL.Environments.html#42f9981b8f3762eda39f7891993b3197"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#4254036c99798cd7148a7d2ce196e2d7"><span class="id" title="variable">Γ'</span></a><span class="id" title="notation">),</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="Hin':93" class="idref" href="#Hin':93"><span class="id" title="binder"><span id="Hin':98" class="id">Hin'</span></span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#42f9981b8f3762eda39f7891993b3197"><span class="id" title="variable">ψ0</span></a> <a class="idref" href="ISL.Environments.html#Hin':93"><span class="id" title="variable">Hin'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#4254036c99798cd7148a7d2ce196e2d7"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#02fc4e4a49e8fb1e8e8c771e691a8637"><span class="id" title="variable">HΓ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a>).<br/>
- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ'</span> ψ' <span class="id" title="var">Hin'</span>; [<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (ψ' <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hin''</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> ψ' <span class="id" title="var">Γ'</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">Hincl</span> := (<a class="idref" href="ISL.Environments.html#dep_in_map_aux_obligation_2"><span class="id" title="lemma">dep_in_map_aux_obligation_2</span></a> <span class="id" title="var">A</span> <span class="id" title="var">Γ</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ'</span>) <span class="id" title="var">HΓ'</span> <span class="id" title="var">a</span> <span class="id" title="var">Γ'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHΓ'</span> <span class="id" title="var">Hincl</span> ψ' <span class="id" title="var">Hin''</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin0</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprop</span>.<br/>
- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hcut</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">Γ</span>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">Γ</span>) ψ0) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hin'</span> <span class="id" title="var">Hprop</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hprop</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_empty" class="idref" href="#in_map_empty"><span class="id" title="lemma">in_map_empty</span></a> <a id="A:99" class="idref" href="#A:99"><span class="id" title="binder">A</span></a> <a id="B:100" class="idref" href="#B:100"><span class="id" title="binder">B</span></a> <a id="f:101" class="idref" href="#f:101"><span class="id" title="binder">f</span></a> : @<a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#A:99"><span class="id" title="variable">A</span></a> <a class="idref" href="ISL.Environments.html#B:100"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="ISL.Environments.html#f:101"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_map_ext" class="idref" href="#in_map_ext"><span class="id" title="lemma">in_map_ext</span></a> {<a id="A:102" class="idref" href="#A:102"><span class="id" title="binder">A</span></a> <a id="B:103" class="idref" href="#B:103"><span class="id" title="binder">B</span></a>} <a id="677396ac970d964cdc61bafddef2c5d5" class="idref" href="#677396ac970d964cdc61bafddef2c5d5"><span class="id" title="binder">Δ</span></a> <a id="f:105" class="idref" href="#f:105"><span class="id" title="binder">f</span></a> <a id="g:106" class="idref" href="#g:106"><span class="id" title="binder">g</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="ed678cdb7c1d8e54466c4dd1f3ef04b3" class="idref" href="#ed678cdb7c1d8e54466c4dd1f3ef04b3"><span class="id" title="binder">φ</span></a> <a id="H:108" class="idref" href="#H:108"><span class="id" title="binder">H</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#f:105"><span class="id" title="variable">f</span></a> <a class="idref" href="ISL.Environments.html#ed678cdb7c1d8e54466c4dd1f3ef04b3"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#H:108"><span class="id" title="variable">H</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#g:106"><span class="id" title="variable">g</span></a> <a class="idref" href="ISL.Environments.html#ed678cdb7c1d8e54466c4dd1f3ef04b3"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#H:108"><span class="id" title="variable">H</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#A:102"><span class="id" title="variable">A</span></a> <a class="idref" href="ISL.Environments.html#B:103"><span class="id" title="variable">B</span></a> <a class="idref" href="ISL.Environments.html#677396ac970d964cdc61bafddef2c5d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#f:105"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#677396ac970d964cdc61bafddef2c5d5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#g:106"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#dep_in_map"><span class="id" title="definition">dep_in_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span>(<span class="id" title="notation">forall</span> <a id="20b0d4460e63a61e2b7612cbaab47a2a" class="idref" href="#20b0d4460e63a61e2b7612cbaab47a2a"><span class="id" title="binder"><span id="5fed251aa58d6913e63540c17d3d6121" class="id">Γ</span></span></a> <a id="225c5aa59f3b0b2bbfebaddb02f7e1e8" class="idref" href="#225c5aa59f3b0b2bbfebaddb02f7e1e8"><span class="id" title="binder"><span id="54cd90d92460edce0ce69cc5ca6076fe" class="id">HΓ</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">f</span> <a class="idref" href="ISL.Environments.html#20b0d4460e63a61e2b7612cbaab47a2a"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="ISL.Environments.html#225c5aa59f3b0b2bbfebaddb02f7e1e8"><span class="id" title="variable">HΓ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#dep_in_map_aux"><span class="id" title="definition">dep_in_map_aux</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">g</span> <a class="idref" href="ISL.Environments.html#20b0d4460e63a61e2b7612cbaab47a2a"><span class="id" title="variable">Γ</span></a>  <a class="idref" href="ISL.Environments.html#225c5aa59f3b0b2bbfebaddb02f7e1e8"><span class="id" title="variable">HΓ</span></a>); [|<span class="id" title="tactic">trivial</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HΓ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>, <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_singleton" class="idref" href="#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> (<a id="d98860d4b8965bb75e257bb2be223db8" class="idref" href="#d98860d4b8965bb75e257bb2be223db8"><span class="id" title="binder">Δ</span></a>: <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="3edc1d4cc89f1dc0dcbd5676df1a8d66" class="idref" href="#3edc1d4cc89f1dc0dcbd5676df1a8d66"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <a class="idref" href="ISL.Environments.html#3edc1d4cc89f1dc0dcbd5676df1a8d66"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#d98860d4b8965bb75e257bb2be223db8"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#d98860d4b8965bb75e257bb2be223db8"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#d98860d4b8965bb75e257bb2be223db8"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#3edc1d4cc89f1dc0dcbd5676df1a8d66"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#3edc1d4cc89f1dc0dcbd5676df1a8d66"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="notation">{[</span>φ<span class="id" title="notation">]}</span>) <span class="id" title="tactic">at</span> 1. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_in_add" class="idref" href="#env_in_add"><span class="id" title="lemma">env_in_add</span></a> (<a id="b0a488e621cdda3663061c157ec625fe" class="idref" href="#b0a488e621cdda3663061c157ec625fe"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="10595936749fdc0c7563dc91a5ce8f69" class="idref" href="#10595936749fdc0c7563dc91a5ce8f69"><span class="id" title="binder">ϕ</span></a> <a id="deb6122a46e3b6ef2acd918391eed828" class="idref" href="#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#b0a488e621cdda3663061c157ec625fe"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#10595936749fdc0c7563dc91a5ce8f69"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#10595936749fdc0c7563dc91a5ce8f69"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="ISL.Environments.html#deb6122a46e3b6ef2acd918391eed828"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#b0a488e621cdda3663061c157ec625fe"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="var">Δ</span>), <span class="id" title="lemma">gmultiset_elem_of_singleton</span>.<br/>
<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equiv_disj_union_compat_r" class="idref" href="#equiv_disj_union_compat_r"><span class="id" title="lemma">equiv_disj_union_compat_r</span></a> {<a id="d88596c37c823f121469a4fc8512e4df" class="idref" href="#d88596c37c823f121469a4fc8512e4df"><span class="id" title="binder">Δ</span></a> <a id="dd309db2d2bc18ffaaa9f379bf073bb6" class="idref" href="#dd309db2d2bc18ffaaa9f379bf073bb6"><span class="id" title="binder">Δ'</span></a> <a id="571d9974f6ca03221ce9cfdec203110f" class="idref" href="#571d9974f6ca03221ce9cfdec203110f"><span class="id" title="binder">Δ''</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>} : <a class="idref" href="ISL.Environments.html#d88596c37c823f121469a4fc8512e4df"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#571d9974f6ca03221ce9cfdec203110f"><span class="id" title="variable">Δ''</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#d88596c37c823f121469a4fc8512e4df"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#dd309db2d2bc18ffaaa9f379bf073bb6"><span class="id" title="variable">Δ'</span></a> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#571d9974f6ca03221ce9cfdec203110f"><span class="id" title="variable">Δ''</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#dd309db2d2bc18ffaaa9f379bf073bb6"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_comm" class="idref" href="#env_add_comm"><span class="id" title="lemma">env_add_comm</span></a> (<a id="e50a66ed72ab25cb744b64f121d7df7f" class="idref" href="#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="088f20567fd2b991420264aa75ba70a8" class="idref" href="#088f20567fd2b991420264aa75ba70a8"><span class="id" title="binder">φ</span></a> <a id="7d7f9f55ef792613b15386449448ba65" class="idref" href="#7d7f9f55ef792613b15386449448ba65"><span class="id" title="binder">ϕ</span></a> : <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#088f20567fd2b991420264aa75ba70a8"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#7d7f9f55ef792613b15386449448ba65"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#e50a66ed72ab25cb744b64f121d7df7f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#7d7f9f55ef792613b15386449448ba65"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#088f20567fd2b991420264aa75ba70a8"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="in_difference" class="idref" href="#in_difference"><span class="id" title="lemma">in_difference</span></a> (<a id="eb29824735e1f9ad082baf0e09460d8c" class="idref" href="#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="2243be9c1ec54be702c0f99ca3b9346e" class="idref" href="#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="binder">φ</span></a> <a id="37d7b5506019af70688f754b3e48d13d" class="idref" href="#37d7b5506019af70688f754b3e48d13d"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Environments.html#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="ISL.Environments.html#37d7b5506019af70688f754b3e48d13d"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#2243be9c1ec54be702c0f99ca3b9346e"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#eb29824735e1f9ad082baf0e09460d8c"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#37d7b5506019af70688f754b3e48d13d"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hne</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elem_of</span>, <span class="id" title="instance">gmultiset_elem_of</span>.<br/>
<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">multiplicity_difference</span> <span class="id" title="var">Δ</span> <span class="id" title="notation">{[</span>ψ<span class="id" title="notation">]}</span> φ).<br/>
<span class="id" title="tactic">assert</span>( <span class="id" title="var">HH</span> := <span class="id" title="lemma">multiplicity_singleton_ne</span> φ ψ <span class="id" title="var">Hne</span>).<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singletonMS</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HH</span>.<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singleton</span>, <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">in_difference</span> : <span class="id" title="var">multiset</span>.<br/>

<br/>
<span class="comment">(*&nbsp;could&nbsp;be&nbsp;used&nbsp;in&nbsp;disj_inv&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv" class="idref" href="#env_add_inv"><span class="id" title="lemma">env_add_inv</span></a> (<a id="6e782b379a22be72fd8811f565d97df0" class="idref" href="#6e782b379a22be72fd8811f565d97df0"><span class="id" title="binder">Γ</span></a> <a id="72ec3418b21d584c7572487a5ff92abe" class="idref" href="#72ec3418b21d584c7572487a5ff92abe"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="b668c9d116e6fd10f514d118828e9250" class="idref" href="#b668c9d116e6fd10f514d118828e9250"><span class="id" title="binder">φ</span></a> <a id="914975410f9dfd8d03cd803808664b25" class="idref" href="#914975410f9dfd8d03cd803808664b25"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <a class="idref" href="ISL.Environments.html#b668c9d116e6fd10f514d118828e9250"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="ISL.Environments.html#914975410f9dfd8d03cd803808664b25"><span class="id" title="variable">ψ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#6e782b379a22be72fd8811f565d97df0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#b668c9d116e6fd10f514d118828e9250"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#72ec3418b21d584c7572487a5ff92abe"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#914975410f9dfd8d03cd803808664b25"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#72ec3418b21d584c7572487a5ff92abe"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#6e782b379a22be72fd8811f565d97df0"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#914975410f9dfd8d03cd803808664b25"><span class="id" title="variable">ψ</span></a><span class="id" title="notation">]}</span><a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#b668c9d116e6fd10f514d118828e9250"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="ISL.Environments.html#env_replace"><span class="id" title="lemma">env_replace</span></a>.<br/>
- <span class="id" title="var">ms</span>.<br/>
- <span class="id" title="tactic">assert</span>(ψ <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><span class="id" title="var">Γ</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> φ<span class="id" title="notation">)</span>); [<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>|]; <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_add_inv'" class="idref" href="#env_add_inv'"><span class="id" title="lemma">env_add_inv'</span></a> (<a id="176f8993380a4cc2dc0087cc17e85ccb" class="idref" href="#176f8993380a4cc2dc0087cc17e85ccb"><span class="id" title="binder">Γ</span></a> <a id="ebc8be4ebe94f97c91f2499dc0c74c06" class="idref" href="#ebc8be4ebe94f97c91f2499dc0c74c06"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="90183850e2dedf7991e982963b3a8181" class="idref" href="#90183850e2dedf7991e982963b3a8181"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>): <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#176f8993380a4cc2dc0087cc17e85ccb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#90183850e2dedf7991e982963b3a8181"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#ebc8be4ebe94f97c91f2499dc0c74c06"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#176f8993380a4cc2dc0087cc17e85ccb"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ebc8be4ebe94f97c91f2499dc0c74c06"><span class="id" title="variable">Γ'</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#90183850e2dedf7991e982963b3a8181"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="env_equiv_eq" class="idref" href="#env_equiv_eq"><span class="id" title="lemma">env_equiv_eq</span></a> (<a id="784d768ae6e85e0848ed43b713b18d98" class="idref" href="#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="binder">Γ</span></a> <a id="960b0010c3d226187d1d7d6e915cf177" class="idref" href="#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="binder">Γ'</span></a> :<a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="ISL.Environments.html#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="ISL.Environments.html#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#784d768ae6e85e0848ed43b713b18d98"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">≡</span>  <a class="idref" href="ISL.Environments.html#960b0010c3d226187d1d7d6e915cf177"><span class="id" title="variable">Γ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;reprove&nbsp;the&nbsp;following&nbsp;principles,&nbsp;proved&nbsp;in&nbsp;stdpp&nbsp;for&nbsp;Prop,&nbsp;but<br/>
&nbsp;&nbsp;&nbsp;we&nbsp;need&nbsp;them&nbsp;in&nbsp;Type&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_choose_or_empty" class="idref" href="#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> (<a id="X:136" class="idref" href="#X:136"><span class="id" title="binder">X</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a><a id="x:137" class="idref" href="#x:137"><span class="id" title="binder">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="ISL.Environments.html#x:137"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#X:136"><span class="id" title="variable">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><a class="idref" href="ISL.Environments.html#X:136"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">x</span> <span class="id" title="var">l</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">HX</span>; [<span class="id" title="tactic">right</span>|<span class="id" title="tactic">left</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elements_empty_inv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="lemma">gmultiset_elem_of_elements</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="definition">elements</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;need&nbsp;this&nbsp;induction&nbsp;principle&nbsp;in&nbsp;type.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="gmultiset_rec" class="idref" href="#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a> (<a id="P:138" class="idref" href="#P:138"><span class="id" title="binder">P</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#P:138"><span class="id" title="variable">P</span></a> <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="x:139" class="idref" href="#x:139"><span class="id" title="binder">x</span></a> <a id="X:140" class="idref" href="#X:140"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#P:138"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#X:140"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Environments.html#P:138"><span class="id" title="variable">P</span></a> (<span class="id" title="notation">{[+</span> <a class="idref" href="ISL.Environments.html#x:139"><span class="id" title="variable">x</span></a> <span class="id" title="notation">+]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#X:140"><span class="id" title="variable">X</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="X:141" class="idref" href="#X:141"><span class="id" title="binder">X</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#P:138"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#X:141"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hemp</span> <span class="id" title="var">Hinsert</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">induction</span> (<span class="id" title="lemma">gmultiset_wf</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">X</span> <span class="id" title="var">_</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ISL.Environments.html#gmultiset_choose_or_empty"><span class="id" title="lemma">gmultiset_choose_or_empty</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>]| -&gt;]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_disj_union_difference'</span> <span class="id" title="var">x</span> <span class="id" title="var">X</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinsert</span>, <span class="id" title="var">IH</span>; <span class="id" title="var">multiset_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="difference_include" class="idref" href="#difference_include"><span class="id" title="lemma">difference_include</span></a> (<a id="a7909ad2419029a75a952d5e27c052f5" class="idref" href="#a7909ad2419029a75a952d5e27c052f5"><span class="id" title="binder">θ</span></a> <a id="2d3e65a50db924591fc138b4383b291f" class="idref" href="#2d3e65a50db924591fc138b4383b291f"><span class="id" title="binder">θ'</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) (<a id="5fee564226146d676f2841929b460a36" class="idref" href="#5fee564226146d676f2841929b460a36"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#2d3e65a50db924591fc138b4383b291f"><span class="id" title="variable">θ'</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5fee564226146d676f2841929b460a36"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#a7909ad2419029a75a952d5e27c052f5"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5fee564226146d676f2841929b460a36"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#2d3e65a50db924591fc138b4383b291f"><span class="id" title="variable">θ'</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#a7909ad2419029a75a952d5e27c052f5"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#5fee564226146d676f2841929b460a36"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin'</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_disj_union_difference</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">X</span> := <span class="id" title="notation">{[</span><span class="id" title="var">θ'</span><span class="id" title="notation">]}</span>).<br/>
- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span>. <span class="id" title="tactic">tauto</span>.<br/>
- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_singleton_subseteq_l</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;technical&nbsp;lemma&nbsp;:&nbsp;one&nbsp;can&nbsp;constructively&nbsp;find&nbsp;whether&nbsp;an&nbsp;environment&nbsp;contains<br/>
&nbsp;&nbsp;&nbsp;an&nbsp;element&nbsp;satisfying&nbsp;a&nbsp;decidable&nbsp;property&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="decide_in" class="idref" href="#decide_in"><span class="id" title="lemma">decide_in</span></a> (<a id="P:145" class="idref" href="#P:145"><span class="id" title="binder">P</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>) (<a id="15e3abb8d0dc192df6f2f0d8def64744" class="idref" href="#15e3abb8d0dc192df6f2f0d8def64744"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="5894ef06d61540d92f871cfdcc371a11" class="idref" href="#5894ef06d61540d92f871cfdcc371a11"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <span class="id" title="class">Decision</span> (<a class="idref" href="ISL.Environments.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#5894ef06d61540d92f871cfdcc371a11"><span class="id" title="variable">φ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">{</span></a><a id="9b7a45ea31b1b8f6942c43ffa295cea6" class="idref" href="#9b7a45ea31b1b8f6942c43ffa295cea6"><span class="id" title="binder">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">:</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9b7a45ea31b1b8f6942c43ffa295cea6"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#15e3abb8d0dc192df6f2f0d8def64744"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Environments.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#9b7a45ea31b1b8f6942c43ffa295cea6"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#6556914db359db999889decec6a4a562"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">{</span></a><span class="id" title="notation">forall</span> <a id="c887b5a85c4d2c0d810a2eaed8f99b4f" class="idref" href="#c887b5a85c4d2c0d810a2eaed8f99b4f"><span class="id" title="binder">φ</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.Environments.html#c887b5a85c4d2c0d810a2eaed8f99b4f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#15e3abb8d0dc192df6f2f0d8def64744"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Environments.html#P:145"><span class="id" title="variable">P</span></a> <a class="idref" href="ISL.Environments.html#c887b5a85c4d2c0d810a2eaed8f99b4f"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#53e8e3b7ca0342c8b99a777b3c5faf3a"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">HP</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span> φ <span class="id" title="var">H</span>φ; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>φ.<br/>
- <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHΓ</span> <span class="id" title="keyword">as</span> [(φ&amp;<span class="id" title="var">H</span>φ) | <span class="id" title="var">HF</span>].<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">exists</span> φ. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">case</span> (<span class="id" title="var">HP</span> <span class="id" title="var">x</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">left</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>. <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">right</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_L" class="idref" href="#union_difference_L"><span class="id" title="lemma">union_difference_L</span></a> (<a id="e6a4e757b83d5f28b577435367723d9a" class="idref" href="#e6a4e757b83d5f28b577435367723d9a"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="553ebe059724afb4b113db5a46f44b23" class="idref" href="#553ebe059724afb4b113db5a46f44b23"><span class="id" title="binder">Δ</span></a> <a id="0ea44311048bc9e157ad234d8963d4a9" class="idref" href="#0ea44311048bc9e157ad234d8963d4a9"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="ISL.Environments.html#0ea44311048bc9e157ad234d8963d4a9"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#e6a4e757b83d5f28b577435367723d9a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#e6a4e757b83d5f28b577435367723d9a"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#553ebe059724afb4b113db5a46f44b23"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#0ea44311048bc9e157ad234d8963d4a9"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#e6a4e757b83d5f28b577435367723d9a"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#0ea44311048bc9e157ad234d8963d4a9"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#553ebe059724afb4b113db5a46f44b23"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="union_difference_R" class="idref" href="#union_difference_R"><span class="id" title="lemma">union_difference_R</span></a> (<a id="0b1d36bafaa941ab7a57d708cb325dca" class="idref" href="#0b1d36bafaa941ab7a57d708cb325dca"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="9ad2bf8edacaf601040a2452e0a609b6" class="idref" href="#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="binder">Δ</span></a> <a id="3c5013074ebe937bd888c7c92c5f76e2" class="idref" href="#3c5013074ebe937bd888c7c92c5f76e2"><span class="id" title="binder">ϕ</span></a>: <a class="idref" href="ISL.Environments.html#3c5013074ebe937bd888c7c92c5f76e2"><span class="id" title="variable">ϕ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#0b1d36bafaa941ab7a57d708cb325dca"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#3c5013074ebe937bd888c7c92c5f76e2"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≡</span> <a class="idref" href="ISL.Environments.html#0b1d36bafaa941ab7a57d708cb325dca"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#9ad2bf8edacaf601040a2452e0a609b6"><span class="id" title="variable">Δ</span></a> <span class="id" title="notation">∖</span><span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#3c5013074ebe937bd888c7c92c5f76e2"><span class="id" title="variable">ϕ</span></a><span class="id" title="notation">]}</span><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>). <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="equiv_assoc" class="idref" href="#equiv_assoc"><span class="id" title="instance">equiv_assoc</span></a> : @<span class="id" title="class">Assoc</span> <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> <span class="id" title="definition">equiv</span> <span class="id" title="definition">disj_union</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Hint Immediate</span> <span class="id" title="var">equiv_assoc</span> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_difference" class="idref" href="#proper_difference"><span class="id" title="instance">proper_difference</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <span class="id" title="definition">difference</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="var_not_in_env" class="idref" href="#var_not_in_env"><span class="id" title="definition">var_not_in_env</span></a> <a id="p:156" class="idref" href="#p:156"><span class="id" title="binder">p</span></a> (<a id="330ecde2ea624b4f4a3c02060519a435" class="idref" href="#330ecde2ea624b4f4a3c02060519a435"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>):=  (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="275d0e1bd28043532ba390b252b710af" class="idref" href="#275d0e1bd28043532ba390b252b710af"><span class="id" title="binder">φ0</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#275d0e1bd28043532ba390b252b710af"><span class="id" title="variable">φ0</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#330ecde2ea624b4f4a3c02060519a435"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#p:156"><span class="id" title="variable">p</span></a> <a class="idref" href="ISL.Environments.html#275d0e1bd28043532ba390b252b710af"><span class="id" title="variable">φ0</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h1 class="section">Tactics</h1>

</div>
<div class="code">
<span class="comment">(*&nbsp;helper&nbsp;tactic&nbsp;split&nbsp;cases&nbsp;given&nbsp;an&nbsp;assumption&nbsp;about&nbsp;belonging&nbsp;to&nbsp;a&nbsp;multiset&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">in_tac</span> :=<br/>
<span class="id" title="tactic">repeat</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ1</span><span class="id" title="notation">;</span> ?<span class="id" title="var">θ2</span><span class="id" title="notation">]}</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">Δ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span>?<span class="id" title="var">θ'</span><span class="id" title="notation">]}</span><span class="id" title="notation">)</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">trivial</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span>  <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span>?<span class="id" title="var">d</span> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> ?<span class="id" title="var">θ2</span><span class="id" title="notation">)</span>] |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="ISL.Environments.html#env_in_add"><span class="id" title="lemma">env_in_add</span></a> <span class="id" title="var">d</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>|<span class="id" title="var">H</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">subst</span><br/>
| <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span> [?<span class="id" title="var">θ</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">{[</span> ?<span class="id" title="var">θ2</span> <span class="id" title="notation">]}</span>] |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="open_box" class="idref" href="#open_box"><span class="id" title="definition">open_box</span></a> <a id="efc1be48acb7af7c6653e854b18939bd" class="idref" href="#efc1be48acb7af7c6653e854b18939bd"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#efc1be48acb7af7c6653e854b18939bd"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ =&gt; <a class="idref" href="ISL.Environments.html#efc1be48acb7af7c6653e854b18939bd"><span class="id" title="variable">φ</span></a><br/>
| φ =&gt; <a class="idref" href="ISL.Environments.html#efc1be48acb7af7c6653e854b18939bd"><span class="id" title="variable">φ</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;inefficient&nbsp;conversion&nbsp;from&nbsp;multisets&nbsp;to&nbsp;lists&nbsp;and&nbsp;back&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="open_boxes" class="idref" href="#open_boxes"><span class="id" title="definition">open_boxes</span></a> (<a id="60c1812e910bcee912eb74f4b2c4aecd" class="idref" href="#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a> := <span class="id" title="definition">list_to_set_disj</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> (<span class="id" title="definition">elements</span> <a class="idref" href="ISL.Environments.html#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Global Notation</span> <a id="324ee050da821ba5ae035c28136d140a" class="idref" href="#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">&quot;</span></a>⊙ φ" := (<a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> φ) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>
<span class="id" title="keyword">Global Notation</span> <a id="ea7b322b05c6af494383fa784c2b0124" class="idref" href="#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">&quot;</span></a>⊗ Γ" := (<a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="var">Γ</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 75).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="proper_open_boxes" class="idref" href="#proper_open_boxes"><span class="id" title="instance">proper_open_boxes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span>) <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Heq'</span>. <span class="id" title="var">ms</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_empty" class="idref" href="#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a> : <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">∅</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">∅</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_disj_union" class="idref" href="#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> (<a id="9694441249b61c326613811c16949842" class="idref" href="#9694441249b61c326613811c16949842"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="df741f1932b64d046f79345362bbbe0f" class="idref" href="#df741f1932b64d046f79345362bbbe0f"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> (<a class="idref" href="ISL.Environments.html#9694441249b61c326613811c16949842"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#9694441249b61c326613811c16949842"><span class="id" title="variable">Γ</span></a> <span class="id" title="notation">⊎</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#df741f1932b64d046f79345362bbbe0f"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">gmultiset_elements_disj_union</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Δ</span>).<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_to_set_disj_app</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_singleton" class="idref" href="#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> <a id="1a5316aa627b4924f70f15bb549f2f8a" class="idref" href="#1a5316aa627b4924f70f15bb549f2f8a"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#1a5316aa627b4924f70f15bb549f2f8a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">{[</span><a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a> <a class="idref" href="ISL.Environments.html#1a5316aa627b4924f70f15bb549f2f8a"><span class="id" title="variable">φ</span></a><span class="id" title="notation">]}</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>.<br/>
<span class="id" title="tactic">assert</span> (<span class="id" title="var">HH</span> := <span class="id" title="lemma">gmultiset_elements_singleton</span> φ).<br/>
<span class="id" title="tactic">unfold</span> <span class="id" title="definition">elements</span>, <span class="id" title="definition">base.singletonMS</span>, <a class="idref" href="ISL.Environments.html#singletonMS"><span class="id" title="instance">singletonMS</span></a>, <span class="id" title="definition">base.singleton</span>, <a class="idref" href="ISL.Environments.html#singleton"><span class="id" title="instance">Environments.singleton</span></a> <span class="id" title="tactic">in</span> *.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="definition">base.singletonMS</span>, <span class="id" title="definition">disj_union</span>, <a class="idref" href="ISL.Environments.html#empty"><span class="id" title="definition">empty</span></a>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="instance">gmultiset_disj_union_right_id</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_add" class="idref" href="#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a> (<a id="a52908bb5f2e5bdad21b63fa91512fb7" class="idref" href="#a52908bb5f2e5bdad21b63fa91512fb7"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) <a id="28249fc102bdcb470af92159ca40a34b" class="idref" href="#28249fc102bdcb470af92159ca40a34b"><span class="id" title="binder">φ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> (<a class="idref" href="ISL.Environments.html#a52908bb5f2e5bdad21b63fa91512fb7"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#28249fc102bdcb470af92159ca40a34b"><span class="id" title="variable">φ</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#a52908bb5f2e5bdad21b63fa91512fb7"><span class="id" title="variable">Γ</span></a> <a class="idref" href="ISL.Environments.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="ISL.Environments.html#28249fc102bdcb470af92159ca40a34b"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elem_of_open_boxes" class="idref" href="#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> <a id="6c89efe1fbd1fb954d6ddfd70f453354" class="idref" href="#6c89efe1fbd1fb954d6ddfd70f453354"><span class="id" title="binder">φ</span></a> <a id="298d15191315d12fd2f332d52f62104c" class="idref" href="#298d15191315d12fd2f332d52f62104c"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Environments.html#6c89efe1fbd1fb954d6ddfd70f453354"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="ISL.Environments.html#298d15191315d12fd2f332d52f62104c"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#6c89efe1fbd1fb954d6ddfd70f453354"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#298d15191315d12fd2f332d52f62104c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.Environments.html#6c89efe1fbd1fb954d6ddfd70f453354"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#298d15191315d12fd2f332d52f62104c"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">θ</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Hind</span>] <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#gmultiset_rec"><span class="id" title="lemma">gmultiset_rec</span></a>.<br/>
- <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">proof</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_disj_union</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hθ</span> | <span class="id" title="var">HΔ</span>].<br/>
&nbsp;&nbsp;+  <span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hθ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> φ. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>; <span class="id" title="var">ms</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">HΔ</span>); <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="occurs_in_open_boxes" class="idref" href="#occurs_in_open_boxes"><span class="id" title="lemma">occurs_in_open_boxes</span></a> <a id="x:169" class="idref" href="#x:169"><span class="id" title="binder">x</span></a> <a id="1668470898ea5c54a812f2d8767c991b" class="idref" href="#1668470898ea5c54a812f2d8767c991b"><span class="id" title="binder">φ</span></a> <a id="871f8fee5372cca301e44cff4b63ba9e" class="idref" href="#871f8fee5372cca301e44cff4b63ba9e"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:169"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#1668470898ea5c54a812f2d8767c991b"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#1668470898ea5c54a812f2d8767c991b"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a><a class="idref" href="ISL.Environments.html#871f8fee5372cca301e44cff4b63ba9e"><span class="id" title="variable">Δ</span></a><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="7ab3231eb72790673ceb30d247876202" class="idref" href="#7ab3231eb72790673ceb30d247876202"><span class="id" title="binder">θ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#7ab3231eb72790673ceb30d247876202"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#871f8fee5372cca301e44cff4b63ba9e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <a class="idref" href="ISL.Environments.html#x:169"><span class="id" title="variable">x</span></a> <a class="idref" href="ISL.Environments.html#7ab3231eb72790673ceb30d247876202"><span class="id" title="variable">θ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">Hx</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#elem_of_open_boxes"><span class="id" title="lemma">elem_of_open_boxes</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>φ. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>φ <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span>φ|<span class="id" title="var">H</span>φ]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_disj_union"><span class="id" title="lemma">open_boxes_disj_union</span></a> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_remove" class="idref" href="#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a>  <a id="c78756a1f6abcb48e68e03dbf5894050" class="idref" href="#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="binder">Γ</span></a> <a id="b4b32d1bee66dae54d38f724fd6ea733" class="idref" href="#b4b32d1bee66dae54d38f724fd6ea733"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#b4b32d1bee66dae54d38f724fd6ea733"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="notation">(≡@{</span><a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a><span class="id" title="notation">})</span> <span class="id" title="notation">(⊗</span> <span class="id" title="notation">(</span><span class="id" title="notation">Γ</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[φ]}))</span> <span class="id" title="notation">((⊗</span> <span class="id" title="notation">Γ</span><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[⊙</span> <span class="id" title="notation">φ]})</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="var">Γ</span> φ <span class="id" title="var">Hin</span>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>  <span class="id" title="tactic">at</span> 2.<br/>
<span class="id" title="tactic">rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a>. <span class="id" title="var">ms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_box" class="idref" href="#is_box"><span class="id" title="definition">is_box</span></a> <a id="31ed67d7b8100e791a08b3025d54d958" class="idref" href="#31ed67d7b8100e791a08b3025d54d958"><span class="id" title="binder">φ</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="ISL.Environments.html#31ed67d7b8100e791a08b3025d54d958"><span class="id" title="variable">φ</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_spec" class="idref" href="#open_boxes_spec"><span class="id" title="lemma">open_boxes_spec</span></a> <a id="af268844c60779e48b049eaa6fd88099" class="idref" href="#af268844c60779e48b049eaa6fd88099"><span class="id" title="binder">Γ</span></a> <a id="ae45f5346fb8097702c2c72d45f99bbb" class="idref" href="#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#af268844c60779e48b049eaa6fd88099"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="ISL.Environments.html#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#af268844c60779e48b049eaa6fd88099"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="ISL.Environments.html#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Environments.html#ae45f5346fb8097702c2c72d45f99bbb"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#af268844c60779e48b049eaa6fd88099"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>. <span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">case</span> (<span class="id" title="definition">decide</span> (<span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ<span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <span class="id" title="var">Γ</span>)).<br/>
- <span class="id" title="tactic">right</span>; <span class="id" title="tactic">trivial</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hout</span>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hin</span> &amp; <span class="id" title="var">Hy</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span>,<span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">trivial</span>);<br/>
&nbsp;&nbsp;<span class="id" title="var">contradict</span> <span class="id" title="var">Hout</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">gmultiset_elem_of_elements</span>,<span class="id" title="lemma">elem_of_list_In</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_not_box_open_box" class="idref" href="#is_not_box_open_box"><span class="id" title="lemma">is_not_box_open_box</span></a> <a id="da3a2f8c0afd145f0cd6c503623a0d21" class="idref" href="#da3a2f8c0afd145f0cd6c503623a0d21"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="ISL.Environments.html#da3a2f8c0afd145f0cd6c503623a0d21"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#324ee050da821ba5ae035c28136d140a"><span class="id" title="notation">⊙</span></a><a class="idref" href="ISL.Environments.html#da3a2f8c0afd145f0cd6c503623a0d21"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Environments.html#da3a2f8c0afd145f0cd6c503623a0d21"><span class="id" title="variable">φ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> φ; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">discriminate</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="open_boxes_spec'" class="idref" href="#open_boxes_spec'"><span class="id" title="lemma">open_boxes_spec'</span></a> <a id="574e0dfa368f4b787e0043dbc5836571" class="idref" href="#574e0dfa368f4b787e0043dbc5836571"><span class="id" title="binder">Γ</span></a> <a id="38729997f095cf8f184de56ae1de3a9b" class="idref" href="#38729997f095cf8f184de56ae1de3a9b"><span class="id" title="binder">φ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="ISL.Environments.html#38729997f095cf8f184de56ae1de3a9b"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#574e0dfa368f4b787e0043dbc5836571"><span class="id" title="variable">Γ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.Environments.html#is_box"><span class="id" title="definition">is_box</span></a> <a class="idref" href="ISL.Environments.html#38729997f095cf8f184de56ae1de3a9b"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><span class="id" title="notation">(</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> <a class="idref" href="ISL.Environments.html#38729997f095cf8f184de56ae1de3a9b"><span class="id" title="variable">φ</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#574e0dfa368f4b787e0043dbc5836571"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#38729997f095cf8f184de56ae1de3a9b"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#574e0dfa368f4b787e0043dbc5836571"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> [[<span class="id" title="var">Hin</span> <span class="id" title="var">Heq</span>] | <span class="id" title="var">Hin</span>];<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_to_set_disj</span>, <span class="id" title="lemma">elem_of_list_In</span>, <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>.<br/>
- <span class="id" title="tactic">exists</span> φ. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#is_not_box_open_box"><span class="id" title="lemma">is_not_box_open_box</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>,  <span class="id" title="lemma">gmultiset_elem_of_elements</span>.<br/>
- <span class="id" title="tactic">exists</span> (<a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□</span></a> φ). <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">trivial</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">elem_of_list_In</span>,  <span class="id" title="lemma">gmultiset_elem_of_elements</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="In_open_boxes" class="idref" href="#In_open_boxes"><span class="id" title="lemma">In_open_boxes</span></a> (<a id="74513af62dda40fc65c0991e979f48ea" class="idref" href="#74513af62dda40fc65c0991e979f48ea"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="ISL.Environments.html#env"><span class="id" title="definition">env</span></a>) (<a id="ff08f5cc2a0c8ec6905961f49583824f" class="idref" href="#ff08f5cc2a0c8ec6905961f49583824f"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#ff08f5cc2a0c8ec6905961f49583824f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#74513af62dda40fc65c0991e979f48ea"><span class="id" title="variable">Γ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> <a class="idref" href="ISL.Environments.html#ff08f5cc2a0c8ec6905961f49583824f"><span class="id" title="variable">φ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.Environments.html#open_boxes"><span class="id" title="definition">open_boxes</span></a> <a class="idref" href="ISL.Environments.html#74513af62dda40fc65c0991e979f48ea"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intro</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Environments.html#difference_singleton"><span class="id" title="lemma">difference_singleton</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>,  <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">In_open_boxes</span> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Unfold</span> <a class="idref" href="ISL.Environments.html#open_box"><span class="id" title="definition">open_box</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_empty"><span class="id" title="lemma">open_boxes_empty</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_add"><span class="id" title="lemma">open_boxes_add</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_remove"><span class="id" title="lemma">open_boxes_remove</span></a> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Rewrite</span> <a class="idref" href="ISL.Environments.html#open_boxes_singleton"><span class="id" title="lemma">open_boxes_singleton</span></a> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">open_boxes_spec'</span> : <span class="id" title="var">proof</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">open_boxes_spec</span> : <span class="id" title="var">proof</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">vars_tac</span> :=<br/>
<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>;<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">HE</span> : <span class="id" title="keyword">context</span> [<a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> ?<span class="id" title="var">x</span> (?<span class="id" title="var">E</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)], <span class="id" title="var">H</span> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> ?<span class="id" title="var">x</span> (?<span class="id" title="var">E</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
<span class="id" title="keyword">end</span>;<br/>
<span class="id" title="tactic">intuition</span>;<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:184" class="idref" href="#x:184"><span class="id" title="binder"><span id="x:185" class="id">x</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>;<br/>
<span class="id" title="tactic">intuition</span>;<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">in_tac</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">tauto</span> || <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> *|]); <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">H</span> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">_</span> (?<span class="id" title="var">a</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a>?<span class="id" title="var">b</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> ?<span class="id" title="var">c</span><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a>) |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Formulas.html#occurs_in_make_impl2"><span class="id" title="lemma">occurs_in_make_impl2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
| <span class="id" title="var">H</span> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> <span class="id" title="var">_</span> (?<span class="id" title="var">a</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> ?<span class="id" title="var">b</span>) |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Formulas.html#occurs_in_make_impl"><span class="id" title="lemma">occurs_in_make_impl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
|<span class="id" title="var">H1</span> : ?<span class="id" title="var">x0</span> <span class="id" title="notation">∈</span> <span class="id" title="notation">(</span><a class="idref" href="ISL.Environments.html#ea7b322b05c6af494383fa784c2b0124"><span class="id" title="notation">⊗</span></a> ?<span class="id" title="var">Δ</span><span class="id" title="notation">)</span>, <span class="id" title="var">H2</span> : <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">x0</span> |- <span class="id" title="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ISL.Environments.html#occurs_in_open_boxes"><span class="id" title="lemma">occurs_in_open_boxes</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span><br/>
<span class="id" title="keyword">end</span>;<br/>
<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> | <span class="id" title="var">H</span> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:186" class="idref" href="#x:186"><span class="id" title="binder"><span id="x:187" class="id">x</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>; <span class="id" title="tactic">intuition</span>;<br/>
<span class="id" title="tactic">try</span> <span class="id" title="var">multimatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
| <span class="id" title="var">H</span> : ?<span class="id" title="var">θ0</span> <span class="id" title="notation">∈</span> ?<span class="id" title="var">Δ0</span> |- <span class="id" title="keyword">context</span> [<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="da82f55fef82835e5a4113fb788a0b0b" class="idref" href="#da82f55fef82835e5a4113fb788a0b0b"><span class="id" title="binder"><span id="759a12e40e8201a1b00f9b65dbf11eb5" class="id">θ</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#da82f55fef82835e5a4113fb788a0b0b"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> ?<span class="id" title="var">Δ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="ISL.Formulas.html#occurs_in"><span class="id" title="definition">occurs_in</span></a> ?<span class="id" title="var">x</span> <a class="idref" href="ISL.Environments.html#da82f55fef82835e5a4113fb788a0b0b"><span class="id" title="variable">θ</span></a>] =&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">solve</span>[<span class="id" title="tactic">try</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">θ0</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="ISL.Environments.html#difference_include"><span class="id" title="lemma">difference_include</span></a>|<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>]; <span class="id" title="tactic">eauto</span>] <span class="id" title="keyword">end</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
