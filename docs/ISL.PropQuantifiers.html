<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/hferee/UIML">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="./demo.html"> Demo </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ISL.PropQuantifiers</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.Sequents.html#"><span class="id" title="library">ISL.Sequents</span></a> <a class="idref" href="ISL.SizedFormulas.html#"><span class="id" title="library">ISL.SizedFormulas</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="ISL.SequentProps.html#"><span class="id" title="library">ISL.SequentProps</span></a> <a class="idref" href="ISL.Order.html#"><span class="id" title="library">ISL.Order</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Program.Equality.html#"><span class="id" title="library">Coq.Program.Equality</span></a>. <span class="comment">(*&nbsp;for&nbsp;dependent&nbsp;induction&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h1 class="section">Overview: Propositional Quantifiers</h1>


<div class="paragraph"> </div>

The main theorem proved in this file was first proved as Theorem 1 in:

<div class="paragraph"> </div>

(Pitts 1992). A. M. Pitts. On an interpretation of second order quantification in first order intuitionistic propositional logic. J. Symb. Log., 57(1):33–52.
It has been further extended to handle iSL

<div class="paragraph"> </div>

It consists of two parts: 

<div class="paragraph"> </div>

1) the inductive construction of the propositional quantifiers; 

<div class="paragraph"> </div>

2) a proof of its correctness. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="UniformInterpolation" class="idref" href="#UniformInterpolation"><span class="id" title="section">UniformInterpolation</span></a>.<br/>

<br/>
</div>

<div class="doc">
Throughout the construction and proof, we fix a variable p, with respect to
  which the propositional quantifier will be computed. 
</div>
<div class="code">
<span class="id" title="keyword">Variable</span> <a id="UniformInterpolation.p" class="idref" href="#UniformInterpolation.p"><span class="id" title="variable">p</span></a> : <a class="idref" href="ISL.Formulas.html#variable"><span class="id" title="definition">variable</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab11"></a><h1 class="section">Definition of propositional quantifiers.</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="UniformInterpolation.PropQuantDefinition" class="idref" href="#UniformInterpolation.PropQuantDefinition"><span class="id" title="section">PropQuantDefinition</span></a>.<br/>

<br/>
</div>

<div class="doc">
We define the formulas Eφ and Aφ associated to any formula φ. This
  is an implementation of Pitts' Table 5, together with a (mostly automatic)
  proof that the definition terminates
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;solves&nbsp;the&nbsp;obligations&nbsp;of&nbsp;the&nbsp;following&nbsp;programs&nbsp;*)</span><br/>
<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order_tac</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="pform" class="idref" href="#pform"><span class="id" title="abbreviation">pform</span></a> := (<a class="idref" href="ISL.SizedFormulas.html#pform"><span class="id" title="definition">pform</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a><a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">:</span></a><a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">nform</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="UniformInterpolation.PropQuantDefinition.:::x_':::'_x" class="idref" href="#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">&quot;</span></a>f ::: Δ" := (<a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Δ</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_nVar" class="idref" href="#is_nVar"><span class="id" title="definition">is_nVar</span></a> (<a id="0abd7b83caa900f624b3aba380ea99e1" class="idref" href="#0abd7b83caa900f624b3aba380ea99e1"><span class="id" title="binder">n</span></a><a id="0abd7b83caa900f624b3aba380ea99e1" class="idref" href="#0abd7b83caa900f624b3aba380ea99e1"><span class="id" title="binder">φ</span></a>: <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) := <a class="idref" href="ISL.PropQuantifiers.html#0abd7b83caa900f624b3aba380ea99e1"><span class="id" title="variable">n</span></a><a class="idref" href="ISL.PropQuantifiers.html#0abd7b83caa900f624b3aba380ea99e1"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>.<br/>

<br/>
</div>

<div class="doc">
First, the implementation of the rules for calculating E. The names of the rules
  refer to the table in Pitts' paper.  note the use of  "lazy" conjunctions, disjunctions and implications 
</div>
<div class="code">
<span class="id" title="keyword">Program Definition</span> <a id="e_rule" class="idref" href="#e_rule"><span class="id" title="definition">e_rule</span></a> {<a id="70086898232ea9f35274651a64a6780a" class="idref" href="#70086898232ea9f35274651a64a6780a"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>} {<a id="2d174631838eb49a9a094319b0eb899c" class="idref" href="#2d174631838eb49a9a094319b0eb899c"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>}<br/>
&nbsp;&nbsp;(<a id="EA0:7" class="idref" href="#EA0:7"><span class="id" title="binder">EA0</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="pe:5" class="idref" href="#pe:5"><span class="id" title="binder">pe</span></a> (<a id="Hpe:6" class="idref" href="#Hpe:6"><span class="id" title="binder">Hpe</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pe:5"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.Order.html#76364ed22a942cd0c08a3d02d3963dec"><span class="id" title="notation">≺·</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#70086898232ea9f35274651a64a6780a"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#2d174631838eb49a9a094319b0eb899c"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>)<br/>
&nbsp;&nbsp;(<a id="847c5dec217f217a9af7253a3e25d420" class="idref" href="#847c5dec217f217a9af7253a3e25d420"><span class="id" title="binder">nθ</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) (<a id="Hin:9" class="idref" href="#Hin:9"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#847c5dec217f217a9af7253a3e25d420"><span class="id" title="variable">nθ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.PropQuantifiers.html#70086898232ea9f35274651a64a6780a"><span class="id" title="variable">Δ</span></a>) : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.PropQuantifiers.html#847c5dec217f217a9af7253a3e25d420"><span class="id" title="variable">nθ</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">nθ'</span> <span class="id" title="keyword">return</span> <a class="idref" href="ISL.PropQuantifiers.html#847c5dec217f217a9af7253a3e25d420"><span class="id" title="variable">nθ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.PropQuantifiers.html#d3025817dec0da8f60006b96e9c3ef5b"><span class="id" title="variable">nθ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <span class="id" title="keyword">with</span><br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n</span> <span class="id" title="var">θ</span> =&gt; <span class="id" title="keyword">fun</span> <a id="cf4bab5c73dcd964e43a086c4ccb0b88" class="idref" href="#cf4bab5c73dcd964e43a086c4ccb0b88"><span class="id" title="binder">Heqnθ</span></a> =&gt; <br/>
<span class="id" title="keyword">let</span> <a id="E:14" class="idref" href="#E:14"><span class="id" title="binder">E</span></a> <a id="4486f22a746bf7e8d11c811eaad4efd7" class="idref" href="#4486f22a746bf7e8d11c811eaad4efd7"><span class="id" title="binder">Δ</span></a> <a id="H:13" class="idref" href="#H:13"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:7"><span class="id" title="variable">EA0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#4486f22a746bf7e8d11c811eaad4efd7"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#2d174631838eb49a9a094319b0eb899c"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:13"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="A:17" class="idref" href="#A:17"><span class="id" title="binder">A</span></a> <a id="pe0:15" class="idref" href="#pe0:15"><span class="id" title="binder">pe0</span></a> <a id="H:16" class="idref" href="#H:16"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:7"><span class="id" title="variable">EA0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe0:15"><span class="id" title="variable">pe0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:16"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="a3b36fa55bbd28976f5df3c703691d2e" class="idref" href="#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="binder">Δ'</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#remove"><span class="id" title="definition">remove</span></a> (<a class="idref" href="ISL.SizedFormulas.html#nform_eq_dec"><span class="id" title="instance">nform_eq_dec</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>) <a class="idref" href="ISL.PropQuantifiers.html#847c5dec217f217a9af7253a3e25d420"><span class="id" title="variable">nθ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#70086898232ea9f35274651a64a6780a"><span class="id" title="variable">Δ</span></a> <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="var">θ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">θ'</span> <span class="id" title="tactic">in</span> (<a class="idref" href="ISL.SizedFormulas.html#nform"><span class="id" title="inductive">nform</span></a> <span class="id" title="var">n'</span>) <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n</span> <span class="id" title="var">θ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n':19"><span class="id" title="variable">n'</span></a>  <a class="idref" href="ISL.PropQuantifiers.html#2f9e68240886eae731a37a6c2dba36b2"><span class="id" title="variable">θ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>  <span class="id" title="keyword">with</span><br/>
| @<a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:21" class="idref" href="#Heq:21"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.Formulas.html#Bot"><span class="id" title="constructor">Bot</span></a>  <span class="comment">(*&nbsp;E0&nbsp;*)</span><br/>
| <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <span class="id" title="var">q</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:22" class="idref" href="#Heq:22"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>) <span class="id" title="keyword">then</span> <span class="id" title="notation">⊤</span> <span class="comment">(*&nbsp;default&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a> <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">⊼</span></a> <span class="id" title="var">q</span> <span class="comment">(*&nbsp;E1&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;E2&nbsp;*)</span><br/>
| @<a class="idref" href="ISL.SizedFormulas.html#nAnd"><span class="id" title="constructor">nAnd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">δ₁</span> <span class="id" title="var">δ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:23" class="idref" href="#Heq:23"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
<a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <span class="id" title="var">δ₂</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><br/>
<span class="comment">(*&nbsp;E3&nbsp;*)</span><br/>
| (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">∨</span></a><a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:24" class="idref" href="#Heq:24"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">⊻</span></a> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₂</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) (<span class="id" title="var">_</span> <a class="idref" href="ISL.PropQuantifiers.html#847c5dec217f217a9af7253a3e25d420"><span class="id" title="variable">nθ</span></a>)<br/>
| @<a class="idref" href="ISL.SizedFormulas.html#nImplies"><span class="id" title="constructor">nImplies</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n0</span> <span class="id" title="var">n3</span> <span class="id" title="var">δ₀</span> <span class="id" title="var">δ₃</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:25" class="idref" href="#Heq:25"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">δ₀</span> <span class="id" title="keyword">as</span> <span class="id" title="var">δ₀'</span> <span class="id" title="tactic">in</span> (<a class="idref" href="ISL.SizedFormulas.html#nform"><span class="id" title="inductive">nform</span></a> <span class="id" title="var">n0'</span>) <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">δ₀</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n0':26"><span class="id" title="variable">n0'</span></a> <a class="idref" href="ISL.PropQuantifiers.html#cda61fa039bd91fc8c0b0228d71a9277"><span class="id" title="variable">δ₀'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <span class="id" title="var">q</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':28" class="idref" href="#Heq':28"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>) <span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> <a class="idref" href="ISL.PropQuantifiers.html#is_nVar"><span class="id" title="definition">is_nVar</span></a> <a class="idref" href="ISL.PropQuantifiers.html#70086898232ea9f35274651a64a6780a"><span class="id" title="variable">Δ</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <span class="comment">(*&nbsp;E5&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="notation">⊤</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">q</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <span class="comment">(*&nbsp;E4&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;E6&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">∧</span></a><a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':29" class="idref" href="#Heq':29"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;E7&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">∨</span></a><a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':30" class="idref" href="#Heq':30"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;E8&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':31" class="idref" href="#Heq':31"><span class="id" title="binder">Heq'</span></a> =&gt; <span class="comment">(*&nbsp;TODO:&nbsp;need&nbsp;coercion?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:17"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₁</span> =&gt;  <span class="id" title="keyword">fun</span> <a id="Heq':32" class="idref" href="#Heq':32"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a>(<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹Δ'</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:17"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">δ₁</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a>(<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a3b36fa55bbd28976f5df3c703691d2e"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:33" class="idref" href="#Heq:33"><span class="id" title="binder">Heq</span></a> =&gt; <span class="id" title="notation">⊤</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>)<br/>
| <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> φ =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:34" class="idref" href="#Heq:34"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:14"><span class="id" title="variable">E</span></a> (φ <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹Δ'</span></a> ) <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">)</span></a> <span class="comment">(*&nbsp;very&nbsp;redundant&nbsp;;&nbsp;identical&nbsp;for&nbsp;each&nbsp;box&nbsp;*)</span><br/>
<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><br/>
<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
</div>

<div class="doc">
The implementation of the rules for defining A is separated into two pieces.
    Referring to Table 5 in Pitts, the definition a_rule_env handles A1-8 and A10,
    and the definition a_rule_form handles A9 and A11-13. 
</div>
<div class="code">
<span class="id" title="keyword">Program Definition</span> <a id="a_rule_env" class="idref" href="#a_rule_env"><span class="id" title="definition">a_rule_env</span></a> {<a id="fa2108c3c65d5a25bd378ddc81356e7e" class="idref" href="#fa2108c3c65d5a25bd378ddc81356e7e"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>} {<a id="e566ef19fb746ac6f2981d92fb484e65" class="idref" href="#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>}<br/>
&nbsp;&nbsp;(<a id="EA0:39" class="idref" href="#EA0:39"><span class="id" title="binder">EA0</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="pe:37" class="idref" href="#pe:37"><span class="id" title="binder">pe</span></a> (<a id="Hpe:38" class="idref" href="#Hpe:38"><span class="id" title="binder">Hpe</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pe:37"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.Order.html#76364ed22a942cd0c08a3d02d3963dec"><span class="id" title="notation">≺·</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#fa2108c3c65d5a25bd378ddc81356e7e"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>)<br/>
&nbsp;&nbsp;(<a id="b8b6242cf465d3876076b47aa518b1c0" class="idref" href="#b8b6242cf465d3876076b47aa518b1c0"><span class="id" title="binder">nθ</span></a>: <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) (<a id="Hin:41" class="idref" href="#Hin:41"><span class="id" title="binder">Hin</span></a> : (<a class="idref" href="ISL.PropQuantifiers.html#b8b6242cf465d3876076b47aa518b1c0"><span class="id" title="variable">nθ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.PropQuantifiers.html#fa2108c3c65d5a25bd378ddc81356e7e"><span class="id" title="variable">Δ</span></a>)) : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.PropQuantifiers.html#b8b6242cf465d3876076b47aa518b1c0"><span class="id" title="variable">nθ</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">nθ'</span> <span class="id" title="keyword">return</span> <a class="idref" href="ISL.PropQuantifiers.html#b8b6242cf465d3876076b47aa518b1c0"><span class="id" title="variable">nθ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a4ab230804cbf564cc8061fcabe80bc1"><span class="id" title="variable">nθ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <span class="id" title="keyword">with</span><br/>
<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n</span> <span class="id" title="var">θ</span> =&gt; <span class="id" title="keyword">fun</span> <a id="24760d9dbdceb4c691606887d4b3444b" class="idref" href="#24760d9dbdceb4c691606887d4b3444b"><span class="id" title="binder">Heqnθ</span></a> =&gt;<br/>
<span class="id" title="keyword">let</span> <a id="E:46" class="idref" href="#E:46"><span class="id" title="binder">E</span></a> <a id="588d335e7ef83ff38b48f3b650112d02" class="idref" href="#588d335e7ef83ff38b48f3b650112d02"><span class="id" title="binder">Δ</span></a> <a id="H:45" class="idref" href="#H:45"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:39"><span class="id" title="variable">EA0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#588d335e7ef83ff38b48f3b650112d02"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:45"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="A:49" class="idref" href="#A:49"><span class="id" title="binder">A</span></a> <a id="pe0:47" class="idref" href="#pe0:47"><span class="id" title="binder">pe0</span></a> <a id="H:48" class="idref" href="#H:48"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:39"><span class="id" title="variable">EA0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe0:47"><span class="id" title="variable">pe0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:48"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="136bc61cb6172a6c0c941a0741fb8b9b" class="idref" href="#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="binder">Δ'</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#remove"><span class="id" title="definition">remove</span></a> (<a class="idref" href="ISL.SizedFormulas.html#nform_eq_dec"><span class="id" title="instance">nform_eq_dec</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>) <a class="idref" href="ISL.PropQuantifiers.html#b8b6242cf465d3876076b47aa518b1c0"><span class="id" title="variable">nθ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#fa2108c3c65d5a25bd378ddc81356e7e"><span class="id" title="variable">Δ</span></a> <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">match</span> <span class="id" title="var">θ</span> <span class="id" title="keyword">as</span> <span class="id" title="var">θ'</span> <span class="id" title="tactic">in</span> (<a class="idref" href="ISL.SizedFormulas.html#nform"><span class="id" title="inductive">nform</span></a> <span class="id" title="var">n'</span>) <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n</span> <span class="id" title="var">θ</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n':51"><span class="id" title="variable">n'</span></a>  <a class="idref" href="ISL.PropQuantifiers.html#328d3e188f909cfd9065c21057f5a1d4"><span class="id" title="variable">θ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>  <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <span class="id" title="var">q</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:53" class="idref" href="#Heq:53"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ISL.SizedFormulas.html#nform_eq_dec"><span class="id" title="instance">nform_eq_dec</span></a> <span class="id" title="var">_</span> (<a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a>) <span class="id" title="keyword">then</span> <span class="id" title="notation">⊤</span> <span class="comment">(*&nbsp;A10&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="notation">⊥</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <span class="comment">(*&nbsp;A1&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;A2&nbsp;*)</span><br/>
| <span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">∧</span></a><a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:54" class="idref" href="#Heq:54"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <span class="id" title="var">δ₂</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
<span class="comment">(*&nbsp;A3&nbsp;*)</span><br/>
| <span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">∨</span></a><a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:55" class="idref" href="#Heq:55"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:46"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">⊼</span></a> <a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:46"><span class="id" title="variable">E</span></a> (<span class="id" title="var">δ₂</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">)</span></a><br/>
| @<a class="idref" href="ISL.SizedFormulas.html#nImplies"><span class="id" title="constructor">nImplies</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n0</span> <span class="id" title="var">n3</span> <span class="id" title="var">δ₀</span> <span class="id" title="var">δ₃</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:56" class="idref" href="#Heq:56"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="var">δ₀</span> <span class="id" title="keyword">as</span> <span class="id" title="var">δ₀'</span> <span class="id" title="tactic">in</span> (<a class="idref" href="ISL.SizedFormulas.html#nform"><span class="id" title="inductive">nform</span></a> <span class="id" title="var">n0'</span>) <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">δ₀</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n0':57"><span class="id" title="variable">n0'</span></a> <a class="idref" href="ISL.PropQuantifiers.html#23b653004a2a22157d976dddd9433b44"><span class="id" title="variable">δ₀'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <span class="id" title="var">q</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':59" class="idref" href="#Heq':59"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#Exists"><span class="id" title="inductive">Exists</span></a> <a class="idref" href="ISL.PropQuantifiers.html#is_nVar"><span class="id" title="definition">is_nVar</span></a> <a class="idref" href="ISL.PropQuantifiers.html#fa2108c3c65d5a25bd378ddc81356e7e"><span class="id" title="variable">Δ</span></a>) <span class="id" title="keyword">then</span> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <span class="comment">(*&nbsp;A5&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="notation">⊥</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">q</span> <a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">⊼</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <span class="comment">(*&nbsp;A4&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;A6&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">∧</span></a><a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':60" class="idref" href="#Heq':60"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A7&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">∨</span></a><a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':61" class="idref" href="#Heq':61"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;A8&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">δ₁</span><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':62" class="idref" href="#Heq':62"><span class="id" title="binder">Heq'</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:46"><span class="id" title="variable">E</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₂</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₃</span><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>  <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> (<span class="id" title="var">δ₁</span> <a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ₂</span>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">⊼</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ1</span>) =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':63" class="idref" href="#Heq':63"><span class="id" title="binder">Heq'</span></a> =&gt; <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:46"><span class="id" title="variable">E</span></a>(<span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ1</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span>  <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ1</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">δ1</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">)</span></a><a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:49"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">δ₃</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#136bc61cb6172a6c0c941a0741fb8b9b"><span class="id" title="variable">Δ'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#e566ef19fb746ac6f2981d92fb484e65"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq':64" class="idref" href="#Heq':64"><span class="id" title="binder">Heq'</span></a> =&gt; <span class="id" title="notation">⊥</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><br/>
| <span class="id" title="var">_</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:65" class="idref" href="#Heq:65"><span class="id" title="binder">Heq</span></a> =&gt; <span class="id" title="notation">⊥</span><br/>
<span class="comment">(*&nbsp;using&nbsp;⊼&nbsp;here&nbsp;breaks&nbsp;congruence&nbsp;*)</span><br/>
<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><br/>
<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;make&nbsp;sure&nbsp;that&nbsp;the&nbsp;proof&nbsp;obligations&nbsp;do&nbsp;not&nbsp;depend&nbsp;on&nbsp;EA0&nbsp;*)</span><br/>
<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">ϕ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">order_tac</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO&nbsp;HERE&nbsp;*)</span><br/>
<span class="id" title="keyword">Program Definition</span> <a id="a_rule_form" class="idref" href="#a_rule_form"><span class="id" title="definition">a_rule_form</span></a>{<a id="c7b55ee56a9ec3bd0f8d0977f6adcc89" class="idref" href="#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>} {<a id="c6ae67f8aaaeba669681daeac0b1a767" class="idref" href="#c6ae67f8aaaeba669681daeac0b1a767"><span class="id" title="binder">nϕ</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>}<br/>
&nbsp;&nbsp;(<a id="EA0:70" class="idref" href="#EA0:70"><span class="id" title="binder">EA0</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="pe:68" class="idref" href="#pe:68"><span class="id" title="binder">pe</span></a> (<a id="Hpe:69" class="idref" href="#Hpe:69"><span class="id" title="binder">Hpe</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#pe:68"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.Order.html#76364ed22a942cd0c08a3d02d3963dec"><span class="id" title="notation">≺·</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c6ae67f8aaaeba669681daeac0b1a767"><span class="id" title="variable">nϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> :=<br/>
<span class="id" title="keyword">let</span> <a id="E:73" class="idref" href="#E:73"><span class="id" title="binder">E</span></a> <a id="d:71" class="idref" href="#d:71"><span class="id" title="binder">d</span></a> <a id="H:72" class="idref" href="#H:72"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:70"><span class="id" title="variable">EA0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#d:71"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:72"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a> <a id="pe0:74" class="idref" href="#pe0:74"><span class="id" title="binder">pe0</span></a> <a id="H:75" class="idref" href="#H:75"><span class="id" title="binder">H</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA0:70"><span class="id" title="variable">EA0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe0:74"><span class="id" title="variable">pe0</span></a> <a class="idref" href="ISL.PropQuantifiers.html#H:75"><span class="id" title="variable">H</span></a>) <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="n:77" class="idref" href="#n:77"><span class="id" title="binder">n</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c6ae67f8aaaeba669681daeac0b1a767"><span class="id" title="variable">nϕ</span></a> <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">let</span> <a id="85d3c131bb52ed153b4269e7663e9b69" class="idref" href="#85d3c131bb52ed153b4269e7663e9b69"><span class="id" title="binder">ϕ</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c6ae67f8aaaeba669681daeac0b1a767"><span class="id" title="variable">nϕ</span></a> <span class="id" title="tactic">in</span><br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ISL.PropQuantifiers.html#85d3c131bb52ed153b4269e7663e9b69"><span class="id" title="variable">ϕ</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">ϕ'</span> <span class="id" title="tactic">in</span> (<a class="idref" href="ISL.SizedFormulas.html#nform"><span class="id" title="inductive">nform</span></a> <span class="id" title="var">n'</span>) <span class="id" title="keyword">return</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n:77"><span class="id" title="variable">n</span></a> <a class="idref" href="ISL.PropQuantifiers.html#85d3c131bb52ed153b4269e7663e9b69"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> <a class="idref" href="ISL.PropQuantifiers.html#n':79"><span class="id" title="variable">n'</span></a> <a class="idref" href="ISL.PropQuantifiers.html#9aecef99970fa6129f93e5946ce9e6fe"><span class="id" title="variable">ϕ'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="ISL.SizedFormulas.html#nVar"><span class="id" title="constructor">nVar</span></a> <span class="id" title="var">q</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:81" class="idref" href="#Heq:81"><span class="id" title="binder">Heq</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">decide</span> (<a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">q</span>) <span class="comment">(*&nbsp;TODO&nbsp;:&nbsp;change&nbsp;this&nbsp;to&nbsp;p∈Vars(ϕ)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="notation">⊥</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ISL.Formulas.html#Var"><span class="id" title="constructor">Var</span></a> <span class="id" title="var">q</span> <span class="comment">(*&nbsp;A9&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;A11&nbsp;*)</span><br/>
<br/>
| <span class="id" title="var">ϕ₁</span> <a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">∧</span></a><a class="idref" href="ISL.SizedFormulas.html#ec0b8a7bc8829d1e9f256e427390d747"><span class="id" title="notation">n</span></a> <span class="id" title="var">ϕ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:82" class="idref" href="#Heq:82"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#137f50a6b392a042c683ddbcfa4be3c9"><span class="id" title="notation">⊼</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">ϕ₂</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
<span class="comment">(*&nbsp;A12&nbsp;*)</span><br/>
| <span class="id" title="var">ϕ₁</span> <a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">∨</span></a><a class="idref" href="ISL.SizedFormulas.html#004f985a9e1a847dee787c0d4a462d86"><span class="id" title="notation">n</span></a> <span class="id" title="var">ϕ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:83" class="idref" href="#Heq:83"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">ϕ₁</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">⊻</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">ϕ₂</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
<span class="comment">(*&nbsp;A13&nbsp;*)</span><br/>
| <span class="id" title="var">ϕ₁</span><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">→</span></a><a class="idref" href="ISL.SizedFormulas.html#2fdafa22ff414fd1ea7f9b70b19dd461"><span class="id" title="notation">n</span></a> <span class="id" title="var">ϕ₂</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:84" class="idref" href="#Heq:84"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.PropQuantifiers.html#E:73"><span class="id" title="variable">E</span></a> (<span class="id" title="var">ϕ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a>) <span class="id" title="var">_</span> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ϕ₁</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">ϕ₂</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><br/>
| <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:85" class="idref" href="#Heq:85"><span class="id" title="binder">Heq</span></a> =&gt; <span class="id" title="notation">⊥</span><br/>
| <a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ</span> =&gt; <span class="id" title="keyword">fun</span> <a id="Heq:86" class="idref" href="#Heq:86"><span class="id" title="binder">Heq</span></a> =&gt; <a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">□(</span></a><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E:73"><span class="id" title="variable">E</span></a> (<a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a>) <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#e11a273adc0648f21ffb62a003ec5cea"><span class="id" title="notation">⇢</span></a> <a class="idref" href="ISL.PropQuantifiers.html#A:76"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#e577456e894abc035ba30b10a25f223b"><span class="id" title="notation">n</span></a> <span class="id" title="var">δ</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition.:::x_':::'_x"><span class="id" title="notation">:::</span></a> <a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">□</span></a><a class="idref" href="ISL.SizedFormulas.html#604b299435785c28461a94e94fa58697"><span class="id" title="notation">⁻¹</span></a> <a class="idref" href="ISL.PropQuantifiers.html#c7b55ee56a9ec3bd0f8d0977f6adcc89"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">δ</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span><a class="idref" href="ISL.Formulas.html#373f5348a1e56721b8e6227b079f6465"><span class="id" title="notation">)</span></a><br/>
<span class="id" title="keyword">end</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">apply</span> <a class="idref" href="ISL.Order.html#wf_pointed_order"><span class="id" title="lemma">wf_pointed_order</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;we&nbsp;can&nbsp;do&nbsp;even&nbsp;better&nbsp;by&nbsp;&nbsp;remembering&nbsp;sum_list&nbsp;*)</span><br/>
<span class="comment">(*<br/>
if&nbsp;list.Forall_dec&nbsp;(fun&nbsp;f&nbsp;=&gt;&nbsp;num_of_pform&nbsp;f&nbsp;=&nbsp;0)(nθ&nbsp;::&nbsp;&nbsp;Δ)&nbsp;then&nbsp;θ&nbsp;else<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="EA" class="idref" href="#EA"><span class="id" title="definition">EA</span></a> (<a id="pe:87" class="idref" href="#pe:87"><span class="id" title="binder">pe</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) {<span class="id" title="keyword">wf</span> (@<a class="idref" href="ISL.Order.html#pointed_senv_order"><span class="id" title="definition">pointed_senv_order</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a>) <span class="id" title="var">pe</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="88fb8fe41602825f8f1b9ac2003b3abc" class="idref" href="#88fb8fe41602825f8f1b9ac2003b3abc"><span class="id" title="binder">Δ</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">pe</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="448f78c4ddbc970b7133284b5b788ae7" class="idref" href="#448f78c4ddbc970b7133284b5b788ae7"><span class="id" title="binder">nθ</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">pe</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="instance">list.Forall_dec</span> (<span class="id" title="keyword">fun</span> <a id="f:91" class="idref" href="#f:91"><span class="id" title="binder">f</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#f:91"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0)(<a class="idref" href="ISL.PropQuantifiers.html#448f78c4ddbc970b7133284b5b788ae7"><span class="id" title="variable">nθ</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a>  <a class="idref" href="ISL.PropQuantifiers.html#88fb8fe41602825f8f1b9ac2003b3abc"><span class="id" title="variable">Δ</span></a>) <span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="a6cd1b08d9450555c7d9308fd2cb2b0c" class="idref" href="#a6cd1b08d9450555c7d9308fd2cb2b0c"><span class="id" title="binder">φ</span></a> := <a class="idref" href="ISL.Environments.html#conjunction"><span class="id" title="definition">conjunction</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ISL.SizedFormulas.html#form_of_nform'"><span class="id" title="definition">form_of_nform'</span></a> <a class="idref" href="ISL.PropQuantifiers.html#88fb8fe41602825f8f1b9ac2003b3abc"><span class="id" title="variable">Δ</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#a6cd1b08d9450555c7d9308fd2cb2b0c"><span class="id" title="variable">φ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a6cd1b08d9450555c7d9308fd2cb2b0c"><span class="id" title="variable">φ</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">→</span></a> <a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.SizedFormulas.html#form_of_nform'"><span class="id" title="definition">form_of_nform'</span></a> <a class="idref" href="ISL.PropQuantifiers.html#448f78c4ddbc970b7133284b5b788ae7"><span class="id" title="variable">nθ</span></a><a class="idref" href="ISL.Formulas.html#bb8d9050f9df35c0476eae46ff96b3be"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">⋀</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">e_rule</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">EA</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">⋁</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">a_rule_env</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">EA</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">))</span></a> <a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">⊻</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a_rule_form"><span class="id" title="definition">a_rule_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA:88"><span class="id" title="definition">EA</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="E" class="idref" href="#E"><span class="id" title="definition">E</span></a> (<a id="pe:93" class="idref" href="#pe:93"><span class="id" title="binder">pe</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#senv"><span class="id" title="definition">senv</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) := <span class="id" title="notation">(</span><a class="idref" href="ISL.PropQuantifiers.html#EA"><span class="id" title="definition">EA</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:93"><span class="id" title="variable">pe</span></a><span class="id" title="notation">).1</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="A" class="idref" href="#A"><span class="id" title="definition">A</span></a> (<a id="pe:94" class="idref" href="#pe:94"><span class="id" title="binder">pe</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Order.html#senv"><span class="id" title="definition">senv</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>) := <span class="id" title="notation">(</span><a class="idref" href="ISL.PropQuantifiers.html#EA"><span class="id" title="definition">EA</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:94"><span class="id" title="variable">pe</span></a><span class="id" title="notation">).2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pform_of_form" class="idref" href="#pform_of_form"><span class="id" title="definition">pform_of_form</span></a> (<a id="0f41ae37b5f2f6e148691ddf84146087" class="idref" href="#0f41ae37b5f2f6e148691ddf84146087"><span class="id" title="binder">φ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) : <a class="idref" href="ISL.PropQuantifiers.html#pform"><span class="id" title="abbreviation">pform</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> (@<a class="idref" href="ISL.SizedFormulas.html#nform_of_form"><span class="id" title="definition">nform_of_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.p"><span class="id" title="variable">p</span></a> φ) <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> [<span class="id" title="var">n</span>φ <span class="id" title="var">Hn</span>φ]].<br/>
<span class="id" title="tactic">exact</span> (<a class="idref" href="ISL.SizedFormulas.html#pform_of_nform"><span class="id" title="definition">pform_of_nform</span></a> <span class="id" title="var">n</span>φ).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Ef" class="idref" href="#Ef"><span class="id" title="definition">Ef</span></a> (<a id="fe1904a6ed6d8f6fcb28e6dff5336047" class="idref" href="#fe1904a6ed6d8f6fcb28e6dff5336047"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="ISL.PropQuantifiers.html#E"><span class="id" title="definition">E</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="ISL.PropQuantifiers.html#pform_of_form"><span class="id" title="definition">pform_of_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#fe1904a6ed6d8f6fcb28e6dff5336047"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a> 0 <a class="idref" href="ISL.SizedFormulas.html#nBot"><span class="id" title="constructor">nBot</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Af" class="idref" href="#Af"><span class="id" title="definition">Af</span></a> (<a id="916dff2bdb0ddecc5dd9b86cdbb5f290" class="idref" href="#916dff2bdb0ddecc5dd9b86cdbb5f290"><span class="id" title="binder">ψ</span></a> : <a class="idref" href="ISL.Formulas.html#form"><span class="id" title="inductive">form</span></a>) := <a class="idref" href="ISL.PropQuantifiers.html#A"><span class="id" title="definition">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pform_of_form"><span class="id" title="definition">pform_of_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#916dff2bdb0ddecc5dd9b86cdbb5f290"><span class="id" title="variable">ψ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Congruence lemmas: if we apply any of e_rule, a_rule_env, or a_rule_form
  to two equal environments, then they give the same results. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="e_rule_cong" class="idref" href="#e_rule_cong"><span class="id" title="lemma">e_rule_cong</span></a> <a id="f3d658e8ea0680f87a241c7b020c0499" class="idref" href="#f3d658e8ea0680f87a241c7b020c0499"><span class="id" title="binder">Δ</span></a> <a id="b5e1a2eb7c09dfbaca4e55f0a8c304cd" class="idref" href="#b5e1a2eb7c09dfbaca4e55f0a8c304cd"><span class="id" title="binder">ϕ</span></a> <a id="ba3d71e162cac6853190e08245bdc9ad" class="idref" href="#ba3d71e162cac6853190e08245bdc9ad"><span class="id" title="binder">θ</span></a> (<a id="Hin:101" class="idref" href="#Hin:101"><span class="id" title="binder">Hin</span></a> : <a class="idref" href="ISL.PropQuantifiers.html#ba3d71e162cac6853190e08245bdc9ad"><span class="id" title="variable">θ</span></a> <span class="id" title="notation">∈</span> <a class="idref" href="ISL.PropQuantifiers.html#f3d658e8ea0680f87a241c7b020c0499"><span class="id" title="variable">Δ</span></a>) <a id="EA1:102" class="idref" href="#EA1:102"><span class="id" title="binder">EA1</span></a> <a id="EA2:103" class="idref" href="#EA2:103"><span class="id" title="binder">EA2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="pe:104" class="idref" href="#pe:104"><span class="id" title="binder">pe</span></a> <a id="Hpe:105" class="idref" href="#Hpe:105"><span class="id" title="binder">Hpe</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.PropQuantifiers.html#EA1:102"><span class="id" title="variable">EA1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:104"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:105"><span class="id" title="variable">Hpe</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:103"><span class="id" title="variable">EA2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:104"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:105"><span class="id" title="variable">Hpe</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ISL.PropQuantifiers.html#e_rule"><span class="id" title="definition">e_rule</span></a> <a class="idref" href="ISL.PropQuantifiers.html#f3d658e8ea0680f87a241c7b020c0499"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#b5e1a2eb7c09dfbaca4e55f0a8c304cd"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA1:102"><span class="id" title="variable">EA1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#ba3d71e162cac6853190e08245bdc9ad"><span class="id" title="variable">θ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hin:101"><span class="id" title="variable">Hin</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="ISL.PropQuantifiers.html#e_rule"><span class="id" title="definition">e_rule</span></a> <a class="idref" href="ISL.PropQuantifiers.html#f3d658e8ea0680f87a241c7b020c0499"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#b5e1a2eb7c09dfbaca4e55f0a8c304cd"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:103"><span class="id" title="variable">EA2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#ba3d71e162cac6853190e08245bdc9ad"><span class="id" title="variable">θ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hin:101"><span class="id" title="variable">Hin</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">θ</span>]. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ1</span>); <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">case</span> <span class="id" title="definition">decide</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="a_rule_env_cong" class="idref" href="#a_rule_env_cong"><span class="id" title="lemma">a_rule_env_cong</span></a> <a id="f9f2baa53d8e6c4d685657d7461c6ad1" class="idref" href="#f9f2baa53d8e6c4d685657d7461c6ad1"><span class="id" title="binder">Δ</span></a> <a id="42853b7f92b730b62dba10ed871e836a" class="idref" href="#42853b7f92b730b62dba10ed871e836a"><span class="id" title="binder">ϕ</span></a> <a id="644a62f1f0237c2801180d2bb9484edd" class="idref" href="#644a62f1f0237c2801180d2bb9484edd"><span class="id" title="binder">θ</span></a> <a id="Hin:109" class="idref" href="#Hin:109"><span class="id" title="binder">Hin</span></a> <a id="EA1:110" class="idref" href="#EA1:110"><span class="id" title="binder">EA1</span></a> <a id="EA2:111" class="idref" href="#EA2:111"><span class="id" title="binder">EA2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="pe:112" class="idref" href="#pe:112"><span class="id" title="binder">pe</span></a> <a id="Hpe:113" class="idref" href="#Hpe:113"><span class="id" title="binder">Hpe</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.PropQuantifiers.html#EA1:110"><span class="id" title="variable">EA1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:112"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:113"><span class="id" title="variable">Hpe</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:111"><span class="id" title="variable">EA2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:112"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:113"><span class="id" title="variable">Hpe</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ISL.PropQuantifiers.html#a_rule_env"><span class="id" title="definition">a_rule_env</span></a> <a class="idref" href="ISL.PropQuantifiers.html#f9f2baa53d8e6c4d685657d7461c6ad1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#42853b7f92b730b62dba10ed871e836a"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA1:110"><span class="id" title="variable">EA1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#644a62f1f0237c2801180d2bb9484edd"><span class="id" title="variable">θ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hin:109"><span class="id" title="variable">Hin</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="ISL.PropQuantifiers.html#a_rule_env"><span class="id" title="definition">a_rule_env</span></a> <a class="idref" href="ISL.PropQuantifiers.html#f9f2baa53d8e6c4d685657d7461c6ad1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#42853b7f92b730b62dba10ed871e836a"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:111"><span class="id" title="variable">EA2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#644a62f1f0237c2801180d2bb9484edd"><span class="id" title="variable">θ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hin:109"><span class="id" title="variable">Hin</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">θ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">case</span> <span class="id" title="definition">decide</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">θ1</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">case</span> <span class="id" title="definition">decide</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>); <span class="id" title="tactic">trivial</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="a_rule_form_cong" class="idref" href="#a_rule_form_cong"><span class="id" title="lemma">a_rule_form_cong</span></a> <a id="fa2afb24cd7d0a5ee8047798ca8faeda" class="idref" href="#fa2afb24cd7d0a5ee8047798ca8faeda"><span class="id" title="binder">Δ</span></a> <a id="47ef3a9ac6188d82ac28e6b6cf934fde" class="idref" href="#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="binder">ϕ</span></a> <a id="EA1:116" class="idref" href="#EA1:116"><span class="id" title="binder">EA1</span></a> <a id="EA2:117" class="idref" href="#EA2:117"><span class="id" title="binder">EA2</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="notation">forall</span> <a id="pe:118" class="idref" href="#pe:118"><span class="id" title="binder">pe</span></a> <a id="Hpe:119" class="idref" href="#Hpe:119"><span class="id" title="binder">Hpe</span></a><span class="id" title="notation">,</span> <a class="idref" href="ISL.PropQuantifiers.html#EA1:116"><span class="id" title="variable">EA1</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:118"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:119"><span class="id" title="variable">Hpe</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:117"><span class="id" title="variable">EA2</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:118"><span class="id" title="variable">pe</span></a> <a class="idref" href="ISL.PropQuantifiers.html#Hpe:119"><span class="id" title="variable">Hpe</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="ISL.PropQuantifiers.html#a_rule_form"><span class="id" title="definition">a_rule_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#fa2afb24cd7d0a5ee8047798ca8faeda"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA1:116"><span class="id" title="variable">EA1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="ISL.PropQuantifiers.html#a_rule_form"><span class="id" title="definition">a_rule_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#fa2afb24cd7d0a5ee8047798ca8faeda"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#47ef3a9ac6188d82ac28e6b6cf934fde"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA2:117"><span class="id" title="variable">EA2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="ISL.PropQuantifiers.html#a_rule_form"><span class="id" title="definition">a_rule_form</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ϕ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">ϕ</span>]. <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ϕ</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">case</span> <span class="id" title="definition">decide</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>); <span class="id" title="tactic">trivial</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">erewrite</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">eauto</span>); <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="EA_eq" class="idref" href="#EA_eq"><span class="id" title="lemma">EA_eq</span></a> <a id="31fe94b7957c8a26724ab248174fc25a" class="idref" href="#31fe94b7957c8a26724ab248174fc25a"><span class="id" title="binder">Δ</span></a> <a id="7528012533e0fe6818460b9b2a323867" class="idref" href="#7528012533e0fe6818460b9b2a323867"><span class="id" title="binder">ϕ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#E"><span class="id" title="definition">E</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#31fe94b7957c8a26724ab248174fc25a"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#7528012533e0fe6818460b9b2a323867"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a>  <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">⋀</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">(@</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">e_rule</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">ϕ</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">λ</span></a> <a id="pe:122" class="idref" href="#pe:122"><span class="id" title="binder">pe</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">_</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">EA</span></a> <a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">pe</span></a><a class="idref" href="ISL.Environments.html#477b8e4d1694e4a1d705e8bc8b366a21"><span class="id" title="notation">)))</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#A"><span class="id" title="definition">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.PropQuantifiers.html#31fe94b7957c8a26724ab248174fc25a"><span class="id" title="variable">Δ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#7528012533e0fe6818460b9b2a323867"><span class="id" title="variable">ϕ</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">⋁</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">dep_in_map</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">(@</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">a_rule_env</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">Δ</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">ϕ</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">(</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">λ</span></a> <a id="pe:123" class="idref" href="#pe:123"><span class="id" title="binder">pe</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">_</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">EA</span></a> <a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">pe</span></a><a class="idref" href="ISL.Environments.html#9392c2b2890c2b7f46c695283fb6e03f"><span class="id" title="notation">)))</span></a><a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">)</span></a> <a class="idref" href="ISL.Formulas.html#755dfd3416b2d1ec592af40df719cd5a"><span class="id" title="notation">⊻</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="ISL.PropQuantifiers.html#a_rule_form"><span class="id" title="definition">a_rule_form</span></a> <a class="idref" href="ISL.PropQuantifiers.html#31fe94b7957c8a26724ab248174fc25a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#7528012533e0fe6818460b9b2a323867"><span class="id" title="variable">ϕ</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="pe:124" class="idref" href="#pe:124"><span class="id" title="binder">pe</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="ISL.PropQuantifiers.html#EA"><span class="id" title="definition">EA</span></a> <a class="idref" href="ISL.PropQuantifiers.html#pe:124"><span class="id" title="variable">pe</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="comment">(*&nbsp;TODO:&nbsp;fix&nbsp;the&nbsp;statement<br/>
simpl.&nbsp;unfold&nbsp;E,&nbsp;A,&nbsp;EA.&nbsp;simpl.<br/>
rewrite&nbsp;-&gt;&nbsp;Wf.Fix_eq.<br/>
-&nbsp;simpl.&nbsp;split;&nbsp;trivial.<br/>
-&nbsp;intros&nbsp;Δ'&nbsp;f&nbsp;g&nbsp;Heq.&nbsp;f_equal;&nbsp;f_equal.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;in_map_ext.&nbsp;intros.&nbsp;apply&nbsp;e_rule_cong;&nbsp;intros;&nbsp;f_equal.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;rewrite&nbsp;Heq.<br/>
&nbsp;&nbsp;+&nbsp;f_equal.&nbsp;apply&nbsp;in_map_ext.&nbsp;intros.&nbsp;apply&nbsp;a_rule_env_cong;&nbsp;intros.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;rewrite&nbsp;Heq.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;a_rule_form_cong;&nbsp;intros.&nbsp;now&nbsp;rewrite&nbsp;Heq.<br/>
Qed.&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="E_eq" class="idref" href="#E_eq"><span class="id" title="definition">E_eq</span></a> <a id="92104104f14da77ec1939fbcb727971d" class="idref" href="#92104104f14da77ec1939fbcb727971d"><span class="id" title="binder">Δ</span></a> <a id="46d787a72ed38ff0fae08d18f15dda64" class="idref" href="#46d787a72ed38ff0fae08d18f15dda64"><span class="id" title="binder">ϕ</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA_eq"><span class="id" title="axiom">EA_eq</span></a> <a class="idref" href="ISL.PropQuantifiers.html#92104104f14da77ec1939fbcb727971d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#46d787a72ed38ff0fae08d18f15dda64"><span class="id" title="variable">ϕ</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="A_eq" class="idref" href="#A_eq"><span class="id" title="definition">A_eq</span></a> <a id="a381ac5dd37e5f2f96f42ac915b2250c" class="idref" href="#a381ac5dd37e5f2f96f42ac915b2250c"><span class="id" title="binder">Δ</span></a> <a id="17db916089582c9c8483b5cba2c4f910" class="idref" href="#17db916089582c9c8483b5cba2c4f910"><span class="id" title="binder">ϕ</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.19.1/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<a class="idref" href="ISL.PropQuantifiers.html#EA_eq"><span class="id" title="axiom">EA_eq</span></a> <a class="idref" href="ISL.PropQuantifiers.html#a381ac5dd37e5f2f96f42ac915b2250c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="ISL.PropQuantifiers.html#17db916089582c9c8483b5cba2c4f910"><span class="id" title="variable">ϕ</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation.PropQuantDefinition"><span class="id" title="section">PropQuantDefinition</span></a>.<br/>
<span class="comment">(*<br/>
<span class="comment">(**&nbsp;*&nbsp;Correctness&nbsp;*)</span><br/>
Section&nbsp;Correctness.<br/>
<br/>
<br/>
<span class="comment">(**&nbsp;This&nbsp;section&nbsp;contains&nbsp;the&nbsp;proof&nbsp;of&nbsp;Proposition&nbsp;5,&nbsp;the&nbsp;main&nbsp;correctness&nbsp;result,&nbsp;stating&nbsp;that&nbsp;the&nbsp;E-&nbsp;and&nbsp;A-formulas&nbsp;defined&nbsp;above&nbsp;are&nbsp;indeed&nbsp;existential&nbsp;and&nbsp;universal&nbsp;propositional&nbsp;quantified&nbsp;versions&nbsp;of&nbsp;the&nbsp;original&nbsp;formula,&nbsp;respectively.&nbsp;*)</span><br/>
<br/>
<span class="comment">(**&nbsp;**&nbsp;(i)&nbsp;Variables&nbsp;*)</span><br/>
Section&nbsp;VariablesCorrect.<br/>
<br/>
Notation&nbsp;pform&nbsp;:=&nbsp;(pform&nbsp;p).<br/>
<br/>
<span class="comment">(**&nbsp;In&nbsp;this&nbsp;subsection&nbsp;we&nbsp;prove&nbsp;(i),&nbsp;which&nbsp;states&nbsp;that&nbsp;the&nbsp;variable&nbsp;p&nbsp;no&nbsp;longer<br/>
&nbsp;&nbsp;occurs&nbsp;in&nbsp;the&nbsp;E-&nbsp;and&nbsp;A-formulas,&nbsp;and&nbsp;that&nbsp;the&nbsp;E-&nbsp;and&nbsp;A-formulas&nbsp;contain&nbsp;no&nbsp;more&nbsp;variables&nbsp;than&nbsp;the&nbsp;original&nbsp;formula.<br/>
&nbsp;&nbsp;*)</span><br/>
<br/>
<span class="comment">(**&nbsp;***&nbsp;(a)&nbsp;&nbsp;*)</span><br/>
<br/>
Lemma&nbsp;e_rule_vars&nbsp;(Δ&nbsp;:&nbsp;list&nbsp;pform)&nbsp;(θ&nbsp;:&nbsp;pform)&nbsp;(Hin&nbsp;:&nbsp;θ&nbsp;∈&nbsp;Δ)&nbsp;(ϕ&nbsp;:&nbsp;pform)<br/>
&nbsp;&nbsp;(EA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;(Hpe&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;ϕ)),&nbsp;form&nbsp;*&nbsp;form)&nbsp;x<br/>
&nbsp;&nbsp;(HEA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;Hpe,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(fst&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ)&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(snd&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;(occurs_in&nbsp;x&nbsp;pe.2&nbsp;\/&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ)))&nbsp;:<br/>
occurs_in&nbsp;x&nbsp;(e_rule&nbsp;EA0&nbsp;θ&nbsp;Hin)&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;Δ&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ.<br/>
Proof.<br/>
destruct&nbsp;θ;&nbsp;unfold&nbsp;e_rule.<br/>
-&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;+&nbsp;simpl.&nbsp;intros&nbsp;Heq&nbsp;HF;&nbsp;subst.&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;simpl.&nbsp;intros&nbsp;Hneq&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Heq</span></span>;&nbsp;vars_tac.&nbsp;subst;&nbsp;tauto.<br/>
-&nbsp;simpl.&nbsp;tauto.<br/>
-&nbsp;vars_tac.<br/>
-&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_disj&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>;&nbsp;vars_tac.<br/>
-&nbsp;destruct&nbsp;θ1;&nbsp;try&nbsp;solve<span class="inlinecode"><span class="id" title="var">vars_tac</span></span>.<br/>
&nbsp;&nbsp;+&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intro;&nbsp;subst.&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;simpl;&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;Hneq&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Heq</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hocc</span></span>;&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subst.&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>;&nbsp;<span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">occurs_in_make_impl</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Hocc</span></span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode">[<span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span>]|</span>;&nbsp;vars_tac;&nbsp;subst;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;Hocc.&nbsp;repeat&nbsp;(apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl&nbsp;in&nbsp;Hocc;&nbsp;vars_tac.<br/>
-&nbsp;intuition;&nbsp;simpl&nbsp;in&nbsp;*;&nbsp;vars_tac.<br/>
Qed.<br/>
<span class="comment">(**&nbsp;***&nbsp;(b)&nbsp;*)</span><br/>
<br/>
Lemma&nbsp;a_rule_env_vars&nbsp;Δ&nbsp;θ&nbsp;Hin&nbsp;ϕ<br/>
&nbsp;&nbsp;(EA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;(Hpe&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;ϕ)),&nbsp;form&nbsp;*&nbsp;form)&nbsp;x<br/>
&nbsp;&nbsp;(HEA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;Hpe,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(fst&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ)&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(snd&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;(occurs_in&nbsp;x&nbsp;pe.2&nbsp;\/&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ))):<br/>
occurs_in&nbsp;x&nbsp;(a_rule_env&nbsp;EA0&nbsp;θ&nbsp;Hin)&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;(occurs_in&nbsp;x&nbsp;ϕ&nbsp;\/&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;Δ&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ).<br/>
Proof.<br/>
destruct&nbsp;θ;&nbsp;unfold&nbsp;a_rule_env.<br/>
-&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;+&nbsp;intro;&nbsp;subst.&nbsp;case&nbsp;decide;&nbsp;simpl;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;Hneq&nbsp;Hocc.&nbsp;vars_tac.<br/>
-&nbsp;simpl.&nbsp;tauto.<br/>
-&nbsp;intro&nbsp;Hocc.&nbsp;vars_tac.<br/>
-&nbsp;intros&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>;<br/>
&nbsp;&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc;&nbsp;vars_tac;&nbsp;vars_tac.<br/>
-&nbsp;destruct&nbsp;θ1;&nbsp;try&nbsp;solve<span class="inlinecode"><span class="id" title="var">vars_tac</span></span>.<br/>
&nbsp;&nbsp;+&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intro;&nbsp;subst.&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intros&nbsp;Hp&nbsp;Hocc.&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;simpl;&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;Hneq&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Heq</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hocc</span></span>;&nbsp;vars_tac.&nbsp;subst;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc;&nbsp;vars_tac;&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;vars_tac.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;Hocc.&nbsp;&nbsp;try&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;try&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc;&nbsp;vars_tac;&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;vars_tac.<br/>
-&nbsp;simpl;&nbsp;tauto.<br/>
Qed.<br/>
<br/>
<br/>
Lemma&nbsp;a_rule_form_vars&nbsp;Δ&nbsp;ϕ<br/>
&nbsp;&nbsp;(EA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;(Hpe&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;ϕ)),&nbsp;form&nbsp;*&nbsp;form)&nbsp;x<br/>
&nbsp;&nbsp;(HEA0&nbsp;:&nbsp;∀&nbsp;pe&nbsp;Hpe,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(fst&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ)&nbsp;/\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(snd&nbsp;(EA0&nbsp;pe&nbsp;Hpe))&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;(occurs_in&nbsp;x&nbsp;pe.2&nbsp;\/&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;pe.1&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ))):<br/>
&nbsp;&nbsp;occurs_in&nbsp;x&nbsp;(a_rule_form&nbsp;EA0)&nbsp;-&gt;&nbsp;x&nbsp;≠&nbsp;p&nbsp;∧&nbsp;(occurs_in&nbsp;x&nbsp;ϕ&nbsp;\/&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;Δ&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ).<br/>
Proof.<br/>
destruct&nbsp;ϕ.<br/>
-&nbsp;simpl.&nbsp;case&nbsp;decide;&nbsp;simpl;&nbsp;intros;&nbsp;subst;&nbsp;intuition;&nbsp;auto.<br/>
-&nbsp;tauto.<br/>
-&nbsp;simpl.&nbsp;intros&nbsp;Hocc;&nbsp;apply&nbsp;occurs_in_make_conj&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>;&nbsp;vars_tac.<br/>
-&nbsp;simpl.&nbsp;intros&nbsp;Hocc;&nbsp;apply&nbsp;occurs_in_make_disj&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>;&nbsp;vars_tac.<br/>
-&nbsp;simpl.&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc.&nbsp;destruct&nbsp;Hocc;&nbsp;vars_tac;&nbsp;vars_tac.<br/>
-&nbsp;intro&nbsp;Hocc.&nbsp;replace&nbsp;(occurs_in&nbsp;x&nbsp;(□&nbsp;ϕ))&nbsp;with&nbsp;(occurs_in&nbsp;x&nbsp;ϕ)&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;unfold&nbsp;a_rule_form&nbsp;in&nbsp;Hocc.&nbsp;<span class="comment">(*&nbsp;apply&nbsp;occurs_in_make_impl&nbsp;in&nbsp;Hocc.&nbsp;*)</span><br/>
&nbsp;&nbsp;repeat&nbsp;vars_tac;&nbsp;eauto&nbsp;using&nbsp;occurs_in_open_boxes.<br/>
Qed.<br/>
<br/>
Proposition&nbsp;EA_vars&nbsp;Δ&nbsp;ϕ&nbsp;x:<br/>
&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(E&nbsp;(Δ,&nbsp;ϕ))&nbsp;-&gt;&nbsp;x&nbsp;&lt;&gt;&nbsp;p&nbsp;/\&nbsp;∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;Δ&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ)&nbsp;/\<br/>
&nbsp;&nbsp;(occurs_in&nbsp;x&nbsp;(A&nbsp;(Δ,&nbsp;ϕ))&nbsp;-&gt;&nbsp;x&nbsp;&lt;&gt;&nbsp;p&nbsp;/\&nbsp;(occurs_in&nbsp;x&nbsp;ϕ&nbsp;\/&nbsp;(∃&nbsp;θ,&nbsp;θ&nbsp;∈&nbsp;Δ&nbsp;/\&nbsp;occurs_in&nbsp;x&nbsp;θ))).<br/>
Proof.<br/>
remember&nbsp;(Δ,&nbsp;ϕ)&nbsp;as&nbsp;pe.<br/>
replace&nbsp;Δ&nbsp;with&nbsp;pe.1&nbsp;by&nbsp;now&nbsp;subst.<br/>
replace&nbsp;ϕ&nbsp;with&nbsp;pe.2&nbsp;by&nbsp;now&nbsp;subst.&nbsp;clear&nbsp;Heqpe&nbsp;Δ&nbsp;ϕ.&nbsp;revert&nbsp;pe.<br/>
refine&nbsp;&nbsp;(@well_founded_induction&nbsp;_&nbsp;_&nbsp;wf_pointed_order&nbsp;_&nbsp;_).<br/>
intros&nbsp;<span class="inlinecode"><span class="id" title="var">Δ</span></span> <span class="inlinecode"><span class="id" title="var">ϕ</span></span>&nbsp;Hind.&nbsp;simpl.<br/>
rewrite&nbsp;E_eq,&nbsp;A_eq.&nbsp;simpl.<br/>
split.<br/>
<span class="comment">(*&nbsp;E&nbsp;*)</span><br/>
-&nbsp;intros&nbsp;Hocc.&nbsp;apply&nbsp;variables_conjunction&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;(φ&amp;Hin&amp;Hφ).<br/>
&nbsp;&nbsp;apply&nbsp;in_in_map&nbsp;in&nbsp;Hin&nbsp;as&nbsp;(ψ&amp;Hin&amp;Heq).&nbsp;subst&nbsp;φ.<br/>
&nbsp;&nbsp;apply&nbsp;e_rule_vars&nbsp;in&nbsp;Hφ.<br/>
&nbsp;&nbsp;+&nbsp;trivial.<br/>
&nbsp;&nbsp;+&nbsp;intros;&nbsp;now&nbsp;apply&nbsp;Hind.<br/>
<span class="comment">(*&nbsp;A&nbsp;*)</span><br/>
-&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;occurs_in_make_disj&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hocc</span>|<span class="id" title="var">Hocc</span></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;disjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;variables_disjunction&nbsp;in&nbsp;Hocc&nbsp;as&nbsp;(φ&amp;Hin&amp;Hφ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;in_in_map&nbsp;in&nbsp;Hin&nbsp;as&nbsp;(ψ&amp;Hin&amp;Heq).&nbsp;subst&nbsp;φ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;a_rule_env_vars&nbsp;in&nbsp;Hφ;&nbsp;trivial.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;pointer&nbsp;rule&nbsp;*)</span><br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;a_rule_form_vars&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;destruct&nbsp;Hocc&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hneq</span></span> <span class="inlinecode">[<span class="id" title="var">Hocc</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hocc</span>]</span>;&nbsp;vars_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;vars_tac;&nbsp;apply&nbsp;Hind&nbsp;in&nbsp;H;&nbsp;trivial;&nbsp;tauto.<br/>
Qed.<br/>
<br/>
End&nbsp;VariablesCorrect.<br/>
<br/>
Ltac&nbsp;foldEA&nbsp;:=&nbsp;repeat&nbsp;match&nbsp;goal&nbsp;with<br/>
|&nbsp;|-&nbsp;context&nbsp;C&nbsp;<span class="inlinecode">(<span class="id" title="var">EA</span></span> <span class="inlinecode">?<span class="id" title="var">pe</span>).1</span>&nbsp;=&gt;&nbsp;fold&nbsp;(E&nbsp;pe)<br/>
|&nbsp;|-&nbsp;context&nbsp;C&nbsp;<span class="inlinecode">(<span class="id" title="var">EA</span></span> <span class="inlinecode">?<span class="id" title="var">pe</span>).2</span>&nbsp;=&gt;&nbsp;fold&nbsp;(A&nbsp;pe)<br/>
end.<br/>
<br/>
<span class="comment">(**&nbsp;**&nbsp;(ii)&nbsp;Entailment&nbsp;*)</span><br/>
Section&nbsp;EntailmentCorrect.<br/>
<br/>
<span class="comment">(**&nbsp;In&nbsp;this&nbsp;section&nbsp;we&nbsp;prove&nbsp;(ii),&nbsp;which&nbsp;states&nbsp;that&nbsp;the&nbsp;E-&nbsp;and&nbsp;A-formula&nbsp;are<br/>
&nbsp;&nbsp;entailed&nbsp;by&nbsp;the&nbsp;original&nbsp;formula&nbsp;and&nbsp;entail&nbsp;the&nbsp;original&nbsp;formula,<br/>
&nbsp;&nbsp;respectively.&nbsp;*)</span><br/>
<br/>
Hint&nbsp;Extern&nbsp;5&nbsp;(?a&nbsp;≺&nbsp;?b)&nbsp;=&gt;&nbsp;order_tac&nbsp;:&nbsp;proof.<br/>
Opaque&nbsp;make_disj.<br/>
Opaque&nbsp;make_conj.<br/>
<br/>
Lemma&nbsp;a_rule_env_spec&nbsp;Δ&nbsp;θ&nbsp;ϕ&nbsp;Hin&nbsp;(EA0&nbsp;:&nbsp;∀&nbsp;pe,&nbsp;(pe&nbsp;≺·&nbsp;(Δ,&nbsp;ϕ))&nbsp;→&nbsp;form&nbsp;*&nbsp;form)<br/>
&nbsp;&nbsp;(HEA&nbsp;:&nbsp;forall&nbsp;Δ&nbsp;ϕ&nbsp;Hpe,&nbsp;(Δ&nbsp;⊢&nbsp;fst&nbsp;(EA0&nbsp;(Δ,&nbsp;ϕ)&nbsp;Hpe))&nbsp;*&nbsp;(Δ•&nbsp;snd(EA0&nbsp;(Δ,&nbsp;ϕ)&nbsp;Hpe)&nbsp;⊢&nbsp;ϕ))&nbsp;:<br/>
&nbsp;&nbsp;(Δ•a_rule_env&nbsp;EA0&nbsp;θ&nbsp;Hin&nbsp;⊢&nbsp;ϕ).<br/>
Proof&nbsp;with&nbsp;(auto&nbsp;with&nbsp;proof).<br/>
assert&nbsp;(HE&nbsp;:=&nbsp;λ&nbsp;Δ0&nbsp;ϕ0&nbsp;Hpe,&nbsp;fst&nbsp;(HEA&nbsp;Δ0&nbsp;ϕ0&nbsp;Hpe)).<br/>
assert&nbsp;(HA&nbsp;:=&nbsp;λ&nbsp;Δ0&nbsp;ϕ0&nbsp;Hpe,&nbsp;snd&nbsp;(HEA&nbsp;Δ0&nbsp;ϕ0&nbsp;Hpe)).<br/>
clear&nbsp;HEA.<br/>
destruct&nbsp;θ;&nbsp;exhibit&nbsp;Hin&nbsp;1.<br/>
-&nbsp;simpl;&nbsp;case&nbsp;decide;&nbsp;intro&nbsp;Hp.<br/>
&nbsp;&nbsp;+&nbsp;subst.&nbsp;case_decide;&nbsp;subst;&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;exch&nbsp;0...<br/>
-&nbsp;constructor&nbsp;2.<br/>
-&nbsp;simpl;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0...<br/>
-&nbsp;apply&nbsp;make_conj_sound_L.<br/>
&nbsp;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;OrL;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;AndL.&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L...&nbsp;<span class="comment">(*&nbsp;uses&nbsp;imp_cut&nbsp;*)</span><br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;AndL.&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
-&nbsp;destruct&nbsp;θ1.<br/>
&nbsp;&nbsp;+&nbsp;simpl;&nbsp;case&nbsp;decide;&nbsp;intro&nbsp;Hp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;subst.&nbsp;case&nbsp;decide.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intros&nbsp;Hp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert(Hin'&nbsp;:&nbsp;(p&nbsp;→&nbsp;θ2)&nbsp;∈&nbsp;Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;(rewrite&nbsp;(gmultiset_disj_union_difference'&nbsp;_&nbsp;_&nbsp;Hp)&nbsp;in&nbsp;Hin;&nbsp;ms).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(Hin''&nbsp;:&nbsp;Var&nbsp;p&nbsp;∈&nbsp;Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">θ2</span></span>})&nbsp;by&nbsp;now&nbsp;apply&nbsp;in_difference.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exhibit&nbsp;Hin''&nbsp;2.&nbsp;exch&nbsp;0;&nbsp;exch&nbsp;1.&nbsp;apply&nbsp;ImpLVar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;1.&nbsp;exch&nbsp;0.&nbsp;peapply&nbsp;HA.&nbsp;rewrite&nbsp;&lt;-&nbsp;difference_singleton&nbsp;by&nbsp;trivial.&nbsp;reflexivity.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro;&nbsp;constructor&nbsp;2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;make_conj_sound_L.&nbsp;constructor&nbsp;4.&nbsp;exch&nbsp;0.&nbsp;exch&nbsp;1.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLVar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;exch&nbsp;0...<br/>
&nbsp;&nbsp;+&nbsp;constructor&nbsp;2.<br/>
&nbsp;&nbsp;+&nbsp;simpl;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLAnd.&nbsp;apply&nbsp;make_impl_complete_L2.&nbsp;exch&nbsp;0...<br/>
&nbsp;&nbsp;+&nbsp;simpl;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLOr.&nbsp;exch&nbsp;1.&nbsp;exch&nbsp;0...<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;make_conj_sound_L.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLImp;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;AndL.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;exch&nbsp;0...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;AndL.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening,&nbsp;HA.<br/>
&nbsp;&nbsp;+&nbsp;exch&nbsp;0.&nbsp;exch&nbsp;0.&nbsp;simpl.&nbsp;apply&nbsp;&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;box_tac.&nbsp;box_tac.&nbsp;exch&nbsp;0;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;apply&nbsp;ImpL.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;HA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;exch&nbsp;0.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
-&nbsp;auto&nbsp;with&nbsp;proof.<br/>
Qed.<br/>
<br/>
Proposition&nbsp;entail_correct&nbsp;Δ&nbsp;ϕ&nbsp;:&nbsp;(Δ&nbsp;⊢&nbsp;E&nbsp;(Δ,&nbsp;ϕ))&nbsp;*&nbsp;(Δ•A&nbsp;(Δ,&nbsp;ϕ)&nbsp;⊢&nbsp;ϕ).<br/>
Proof.<br/>
remember&nbsp;(Δ,&nbsp;ϕ)&nbsp;as&nbsp;pe.<br/>
replace&nbsp;Δ&nbsp;with&nbsp;pe.1&nbsp;by&nbsp;now&nbsp;subst.<br/>
replace&nbsp;ϕ&nbsp;with&nbsp;pe.2&nbsp;by&nbsp;now&nbsp;subst.&nbsp;clear&nbsp;Heqpe&nbsp;Δ&nbsp;ϕ.&nbsp;revert&nbsp;pe.<br/>
refine&nbsp;&nbsp;(@well_founded_induction&nbsp;_&nbsp;_&nbsp;wf_pointed_order&nbsp;_&nbsp;_).<br/>
unfold&nbsp;pointed_env_order.<br/>
intros&nbsp;(Δ,&nbsp;ϕ)&nbsp;Hind.&nbsp;simpl.<br/>
rewrite&nbsp;E_eq,&nbsp;A_eq.<br/>
<span class="comment">(*&nbsp;uncurry&nbsp;the&nbsp;induction&nbsp;hypothesis&nbsp;for&nbsp;convenience&nbsp;*)</span><br/>
assert&nbsp;(HE&nbsp;:=&nbsp;fun&nbsp;d&nbsp;f&nbsp;x=&gt;&nbsp;fst&nbsp;(Hind&nbsp;(d,&nbsp;f)&nbsp;x)).<br/>
assert&nbsp;(HA&nbsp;:=&nbsp;fun&nbsp;d&nbsp;f&nbsp;x=&gt;&nbsp;snd&nbsp;(Hind&nbsp;(d,&nbsp;f)&nbsp;x)).<br/>
unfold&nbsp;E,&nbsp;A&nbsp;in&nbsp;*;&nbsp;simpl&nbsp;in&nbsp;HE,&nbsp;HA.<br/>
simpl&nbsp;in&nbsp;*.&nbsp;clear&nbsp;Hind.<br/>
split.&nbsp;{<br/>
<span class="comment">(*&nbsp;E&nbsp;*)</span><br/>
apply&nbsp;conjunction_R1.&nbsp;intros&nbsp;φ&nbsp;Hin.&nbsp;apply&nbsp;in_in_map&nbsp;in&nbsp;Hin.<br/>
destruct&nbsp;Hin&nbsp;as&nbsp;(ψ&amp;Hin&amp;Heq).&nbsp;subst.<br/>
destruct&nbsp;ψ;&nbsp;unfold&nbsp;e_rule;&nbsp;exhibit&nbsp;Hin&nbsp;0.<br/>
-&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;subst;&nbsp;simpl;&nbsp;auto&nbsp;using&nbsp;HE&nbsp;with&nbsp;proof.<br/>
-&nbsp;auto&nbsp;with&nbsp;proof.<br/>
-&nbsp;auto&nbsp;3&nbsp;with&nbsp;proof.<br/>
-&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrL.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;OrR1,&nbsp;HE.&nbsp;order_tac.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;OrR2,&nbsp;HE.&nbsp;order_tac.<br/>
-&nbsp;destruct&nbsp;ψ1;&nbsp;auto&nbsp;3&nbsp;using&nbsp;HE&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;case&nbsp;decide;&nbsp;intro&nbsp;Hp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;subst.&nbsp;case&nbsp;decide;&nbsp;intro&nbsp;Hp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;assert(Hin''&nbsp;:&nbsp;Var&nbsp;p&nbsp;∈&nbsp;Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">→</span> <span class="inlinecode">ψ2</span>})&nbsp;by&nbsp;(apply&nbsp;in_difference;&nbsp;trivial;&nbsp;discriminate).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exhibit&nbsp;Hin''&nbsp;1.&nbsp;apply&nbsp;ImpLVar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peapply&nbsp;(HE&nbsp;(Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">→</span> <span class="inlinecode">ψ2</span>}•ψ2)&nbsp;ϕ).&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;difference_singleton;&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;ImpR,&nbsp;ExFalso.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLVar.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening,&nbsp;HE.&nbsp;order_tac.<br/>
&nbsp;&nbsp;+&nbsp;remember&nbsp;(Δ&nbsp;∖&nbsp;{<span class="inlinecode">(ψ1<span class="id" title="var">_1</span></span> <span class="inlinecode">→</span> <span class="inlinecode">ψ1<span class="id" title="var">_2</span>)</span> <span class="inlinecode">→</span> <span class="inlinecode">ψ2</span>})&nbsp;as&nbsp;Δ'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;apply&nbsp;make_impl_sound_L.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLImp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;0.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;0.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;foldEA.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;box_tac.&nbsp;exch&nbsp;0;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpL.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;weakening,&nbsp;HE.&nbsp;order_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;HA.&nbsp;order_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;weakening,&nbsp;HE.&nbsp;order_tac.<br/>
-&nbsp;&nbsp;apply&nbsp;BoxR.&nbsp;apply&nbsp;weakening.&nbsp;box_tac.&nbsp;simpl.&nbsp;apply&nbsp;HE.&nbsp;order_tac.<br/>
}<br/>
<span class="comment">(*&nbsp;A&nbsp;*)</span><br/>
apply&nbsp;make_disj_sound_L,&nbsp;OrL.<br/>
-&nbsp;apply&nbsp;disjunction_L.&nbsp;intros&nbsp;φ&nbsp;Hin.<br/>
&nbsp;&nbsp;apply&nbsp;in_in_map&nbsp;in&nbsp;Hin&nbsp;as&nbsp;(φ'&nbsp;&amp;&nbsp;Heq&nbsp;&amp;&nbsp;Hφ').&nbsp;subst&nbsp;φ.<br/>
&nbsp;&nbsp;apply&nbsp;a_rule_env_spec;&nbsp;intros;&nbsp;split&nbsp;;&nbsp;apply&nbsp;HE&nbsp;||&nbsp;apply&nbsp;HA;&nbsp;order_tac.<br/>
-&nbsp;destruct&nbsp;ϕ;&nbsp;simpl;&nbsp;auto&nbsp;using&nbsp;HE&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;subst;&nbsp;<span class="inlinecode"><span class="id" title="tactic">constructor</span></span> <span class="inlinecode">2|<span class="id" title="tactic">constructor</span></span> <span class="inlinecode">1</span>.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;make_conj_sound_L,&nbsp;AndR;&nbsp;apply&nbsp;AndL;&nbsp;auto&nbsp;using&nbsp;HE&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;ImpR.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpL;&nbsp;auto&nbsp;using&nbsp;HE,&nbsp;HA&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;foldEA.&nbsp;apply&nbsp;BoxR.&nbsp;box_tac.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpL.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;weakening,&nbsp;HE.&nbsp;order_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;HA.&nbsp;order_tac.<br/>
Qed.<br/>
<br/>
End&nbsp;EntailmentCorrect.<br/>
<br/>
<span class="comment">(**&nbsp;**&nbsp;Uniformity&nbsp;*)</span><br/>
Section&nbsp;PropQuantCorrect.<br/>
<br/>
<span class="comment">(**&nbsp;The&nbsp;proof&nbsp;in&nbsp;this&nbsp;section,&nbsp;which&nbsp;is&nbsp;the&nbsp;most&nbsp;complex&nbsp;part&nbsp;of&nbsp;the&nbsp;argument,<br/>
&nbsp;&nbsp;shows&nbsp;that&nbsp;the&nbsp;E-&nbsp;and&nbsp;A-formulas&nbsp;constructed&nbsp;above&nbsp;are&nbsp;indeed&nbsp;their&nbsp;propositionally&nbsp;quantified&nbsp;versions,&nbsp;that&nbsp;is,&nbsp;*any*&nbsp;formula&nbsp;entailed&nbsp;by&nbsp;the&nbsp;original&nbsp;formula&nbsp;and<br/>
&nbsp;&nbsp;using&nbsp;only&nbsp;variables&nbsp;from&nbsp;that&nbsp;formula&nbsp;except&nbsp;p&nbsp;is&nbsp;already&nbsp;a&nbsp;consequence&nbsp;of<br/>
&nbsp;&nbsp;the&nbsp;E-quantified&nbsp;version,&nbsp;and&nbsp;similarly&nbsp;on&nbsp;the&nbsp;other&nbsp;side&nbsp;for&nbsp;the&nbsp;A-quantifier.<br/>
*)</span><br/>
<br/>
<span class="comment">(**&nbsp;E's&nbsp;second&nbsp;argument&nbsp;is&nbsp;mostly&nbsp;irrelevant&nbsp;and&nbsp;is&nbsp;only&nbsp;there&nbsp;for&nbsp;uniform&nbsp;treatment&nbsp;with&nbsp;A&nbsp;*)</span><br/>
Lemma&nbsp;E_irr&nbsp;ϕ'&nbsp;Δ&nbsp;ϕ&nbsp;:&nbsp;E&nbsp;(Δ,&nbsp;ϕ)&nbsp;=&nbsp;E&nbsp;(Δ,&nbsp;ϕ').<br/>
Proof.<br/>
remember&nbsp;((Δ,&nbsp;ϕ)&nbsp;:&nbsp;pointed_env)&nbsp;as&nbsp;pe.<br/>
replace&nbsp;Δ&nbsp;with&nbsp;pe.1&nbsp;by&nbsp;now&nbsp;subst.<br/>
replace&nbsp;ϕ&nbsp;with&nbsp;pe.2&nbsp;by&nbsp;now&nbsp;subst.&nbsp;clear&nbsp;Heqpe&nbsp;Δ&nbsp;ϕ.<br/>
&nbsp;&nbsp;induction&nbsp;pe&nbsp;as&nbsp;<span class="inlinecode">[<span class="id" title="var">Γ</span></span> <span class="inlinecode">φ]</span> <span class="inlinecode"><span class="id" title="var">Hind0</span></span>&nbsp;using&nbsp;(well_founded_induction_type&nbsp;wf_pointed_order).<br/>
assert(Hind&nbsp;:&nbsp;∀&nbsp;Γ0&nbsp;φ0,&nbsp;((Γ0,&nbsp;φ0)&nbsp;≺·&nbsp;(Γ,&nbsp;φ))&nbsp;→&nbsp;E&nbsp;(Γ0,&nbsp;φ0)&nbsp;=&nbsp;E&nbsp;(Γ0,&nbsp;ϕ'))<br/>
&nbsp;&nbsp;by&nbsp;exact&nbsp;(fun&nbsp;Γ0&nbsp;φ0&nbsp;=&gt;&nbsp;(Hind0&nbsp;(Γ0,&nbsp;φ0))).<br/>
unfold&nbsp;E&nbsp;in&nbsp;Hind.&nbsp;simpl&nbsp;in&nbsp;Hind.<br/>
do&nbsp;2&nbsp;rewrite&nbsp;E_eq.&nbsp;f_equal.&nbsp;apply&nbsp;in_map_ext.<br/>
intros&nbsp;φ'&nbsp;Hin.&nbsp;unfold&nbsp;e_rule.<br/>
destruct&nbsp;φ';&nbsp;repeat&nbsp;rewrite&nbsp;(Hind&nbsp;_&nbsp;φ)&nbsp;by&nbsp;(trivial;&nbsp;order_tac);&nbsp;trivial.<br/>
destruct&nbsp;φ'1;&nbsp;repeat&nbsp;rewrite&nbsp;(Hind&nbsp;_&nbsp;φ)&nbsp;by&nbsp;(trivial;&nbsp;order_tac);&nbsp;trivial.<br/>
Qed.<br/>
<br/>
Lemma&nbsp;E_left&nbsp;{Γ}&nbsp;{θ}&nbsp;{Δ}&nbsp;{φ&nbsp;φ'}&nbsp;(Hin&nbsp;:&nbsp;φ&nbsp;∈&nbsp;Δ)&nbsp;:<br/>
(Γ•e_rule&nbsp;(λ&nbsp;pe&nbsp;(_&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;φ')),&nbsp;&nbsp;EA&nbsp;pe)&nbsp;&nbsp;φ&nbsp;Hin)&nbsp;⊢&nbsp;θ&nbsp;-&gt;<br/>
Γ•E&nbsp;(Δ,&nbsp;φ')&nbsp;⊢&nbsp;θ.<br/>
Proof.<br/>
intro&nbsp;Hp.&nbsp;rewrite&nbsp;E_eq.<br/>
destruct&nbsp;(@in_map_in&nbsp;_&nbsp;_&nbsp;_&nbsp;&nbsp;(e_rule&nbsp;(λ&nbsp;pe&nbsp;(_&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;φ')),&nbsp;EA&nbsp;pe))&nbsp;_&nbsp;Hin)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hin'</span></span> <span class="inlinecode"><span class="id" title="var">Hrule</span></span>.<br/>
eapply&nbsp;conjunction_L.<br/>
-&nbsp;apply&nbsp;Hrule.<br/>
-&nbsp;exact&nbsp;Hp.<br/>
Qed.<br/>
<br/>
Lemma&nbsp;A_right&nbsp;{Γ}&nbsp;{Δ}&nbsp;{φ&nbsp;φ'}&nbsp;(Hin&nbsp;:&nbsp;φ&nbsp;∈&nbsp;Δ)&nbsp;:<br/>
Γ&nbsp;⊢&nbsp;a_rule_env&nbsp;(λ&nbsp;pe&nbsp;(_&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;φ')),&nbsp;EA&nbsp;pe)&nbsp;φ&nbsp;Hin&nbsp;-&gt;<br/>
Γ&nbsp;⊢&nbsp;A&nbsp;(Δ,&nbsp;φ').<br/>
Proof.&nbsp;intro&nbsp;Hp.&nbsp;rewrite&nbsp;A_eq.<br/>
destruct&nbsp;(@in_map_in&nbsp;_&nbsp;_&nbsp;_&nbsp;&nbsp;(a_rule_env&nbsp;(λ&nbsp;pe&nbsp;(_&nbsp;:&nbsp;pe&nbsp;≺·&nbsp;(Δ,&nbsp;φ')),&nbsp;EA&nbsp;pe))&nbsp;_&nbsp;Hin)&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hin'</span></span> <span class="inlinecode"><span class="id" title="var">Hrule</span></span>.<br/>
eapply&nbsp;make_disj_sound_R,&nbsp;OrR1,&nbsp;disjunction_R.<br/>
-&nbsp;exact&nbsp;Hrule.<br/>
-&nbsp;exact&nbsp;Hp.<br/>
Qed.<br/>
<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;move&nbsp;*)</span><br/>
Lemma&nbsp;open_boxes_case&nbsp;Δ&nbsp;:&nbsp;{φ&nbsp;|&nbsp;(□&nbsp;φ)&nbsp;∈&nbsp;Δ}&nbsp;+&nbsp;{Δ&nbsp;≡&nbsp;⊗Δ}.<br/>
Proof.<br/>
unfold&nbsp;open_boxes.<br/>
induction&nbsp;Δ&nbsp;as&nbsp;<span class="inlinecode">|ψ</span> <span class="inlinecode"><span class="id" title="var">Δ</span></span> <span class="inlinecode"><span class="id" title="var">IH</span></span>&nbsp;using&nbsp;gmultiset_rec.<br/>
-&nbsp;right.&nbsp;ms.<br/>
-&nbsp;case_eq(is_box&nbsp;ψ);&nbsp;intro&nbsp;Hbox.<br/>
&nbsp;&nbsp;+&nbsp;left.&nbsp;exists&nbsp;(⊙ψ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;ψ;&nbsp;try&nbsp;discriminate&nbsp;Hbox.&nbsp;ms.<br/>
&nbsp;&nbsp;+&nbsp;destruct&nbsp;IH&nbsp;as&nbsp;<span class="inlinecode">[φ</span> <span class="inlinecode"><span class="id" title="var">H</span>φ]|</span> <span class="inlinecode"><span class="id" title="var">Heq</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;left.&nbsp;exists&nbsp;φ.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;right.&nbsp;symmetry.&nbsp;etransitivity.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;env_equiv_eq,&nbsp;list_to_set_disj_perm,&nbsp;Permutation_map.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;gmultiset_elements_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;map_app,&nbsp;list_to_set_disj_app.&nbsp;rewrite&nbsp;&lt;-&nbsp;Heq.&nbsp;apply&nbsp;env_equiv_eq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f_equal.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unfold&nbsp;elements.&nbsp;apply&nbsp;is_not_box_open_box&nbsp;in&nbsp;Hbox.&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;Hbox&nbsp;at&nbsp;2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transitivity&nbsp;(list_to_set_disj&nbsp;(map&nbsp;open_box&nbsp;(id&nbsp;<span class="inlinecode">ψ</span>))&nbsp;:&nbsp;env).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;list_to_set_disj_perm,&nbsp;Permutation_map.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Permutation_refl',&nbsp;gmultiset_elements_singleton.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;simpl.&nbsp;ms.<br/>
Qed.<br/>
<br/>
<br/>
Proposition&nbsp;pq_correct&nbsp;Γ&nbsp;Δ&nbsp;ϕ:&nbsp;(∀&nbsp;φ0,&nbsp;φ0&nbsp;∈&nbsp;Γ&nbsp;-&gt;&nbsp;¬&nbsp;occurs_in&nbsp;p&nbsp;φ0)&nbsp;-&gt;&nbsp;(Γ&nbsp;⊎&nbsp;Δ&nbsp;⊢&nbsp;ϕ)&nbsp;-&gt;<br/>
&nbsp;&nbsp;(¬&nbsp;occurs_in&nbsp;p&nbsp;ϕ&nbsp;-&gt;&nbsp;Γ•E&nbsp;(Δ,&nbsp;ϕ)&nbsp;⊢&nbsp;ϕ)&nbsp;*<br/>
&nbsp;&nbsp;(Γ•E&nbsp;(Δ,&nbsp;ϕ)&nbsp;⊢&nbsp;A&nbsp;(Δ,&nbsp;ϕ)).<br/>
Proof.<br/>
<span class="comment">(*&nbsp;we&nbsp;want&nbsp;to&nbsp;use&nbsp;an&nbsp;E&nbsp;rule&nbsp;*)</span><br/>
Ltac&nbsp;Etac&nbsp;:=&nbsp;foldEA;&nbsp;intros;&nbsp;match&nbsp;goal&nbsp;with&nbsp;|&nbsp;Hin&nbsp;:&nbsp;?a&nbsp;∈&nbsp;?Δ&nbsp;|-&nbsp;_•E&nbsp;(?Δ,&nbsp;_)&nbsp;⊢&nbsp;_=&gt;&nbsp;apply&nbsp;(E_left&nbsp;Hin);&nbsp;unfold&nbsp;e_rule&nbsp;end.<br/>
<br/>
<span class="comment">(*&nbsp;we&nbsp;want&nbsp;to&nbsp;use&nbsp;an&nbsp;A&nbsp;rule&nbsp;defined&nbsp;in&nbsp;a_rule_env&nbsp;*)</span><br/>
Ltac&nbsp;Atac&nbsp;:=&nbsp;foldEA;&nbsp;match&nbsp;goal&nbsp;with&nbsp;|&nbsp;Hin&nbsp;:&nbsp;?a&nbsp;∈&nbsp;?Δ&nbsp;|-&nbsp;_&nbsp;&nbsp;⊢&nbsp;A&nbsp;(?Δ,&nbsp;_)&nbsp;=&gt;&nbsp;apply&nbsp;(A_right&nbsp;Hin);&nbsp;unfold&nbsp;a_rule_env&nbsp;end.<br/>
<br/>
<span class="comment">(*&nbsp;we&nbsp;want&nbsp;to&nbsp;use&nbsp;an&nbsp;A&nbsp;rule&nbsp;defined&nbsp;in&nbsp;a_rule_form&nbsp;*)</span><br/>
Ltac&nbsp;Atac'&nbsp;:=&nbsp;foldEA;&nbsp;rewrite&nbsp;A_eq;&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrR2;&nbsp;simpl.<br/>
<br/>
Ltac&nbsp;occ&nbsp;:=&nbsp;simpl;&nbsp;tauto&nbsp;||<br/>
match&nbsp;goal&nbsp;with<br/>
|&nbsp;Hnin&nbsp;:&nbsp;∀&nbsp;φ0&nbsp;:&nbsp;form,&nbsp;φ0&nbsp;∈&nbsp;?Γ&nbsp;→&nbsp;¬&nbsp;occurs_in&nbsp;p&nbsp;φ0&nbsp;&nbsp;|-&nbsp;_&nbsp;=&gt;<br/>
<br/>
&nbsp;&nbsp;let&nbsp;Hin&nbsp;:=&nbsp;fresh&nbsp;"Hin"&nbsp;in<br/>
&nbsp;&nbsp;try&nbsp;(match&nbsp;goal&nbsp;with&nbsp;|Hocc&nbsp;:&nbsp;?a&nbsp;∈&nbsp;?Γ&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;&nbsp;&nbsp;let&nbsp;Hocc'&nbsp;:=&nbsp;fresh&nbsp;"Hocc"&nbsp;in&nbsp;assert&nbsp;(Hocc'&nbsp;:=&nbsp;Hnin&nbsp;_&nbsp;Hocc);&nbsp;simpl&nbsp;in&nbsp;Hocc';<br/>
&nbsp;&nbsp;let&nbsp;Hin'&nbsp;:=&nbsp;fresh&nbsp;"Hinx"&nbsp;in&nbsp;assert(Hin'&nbsp;:=&nbsp;In_open_boxes&nbsp;_&nbsp;_&nbsp;Hocc);&nbsp;simpl&nbsp;in&nbsp;*;<br/>
&nbsp;&nbsp;try&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;in&nbsp;*&nbsp;by&nbsp;trivial&nbsp;&nbsp;end);<br/>
&nbsp;&nbsp;intro;&nbsp;repeat&nbsp;rewrite&nbsp;env_in_add;&nbsp;repeat&nbsp;rewrite&nbsp;difference_include;&nbsp;simpl;<br/>
&nbsp;&nbsp;intro&nbsp;Hin;&nbsp;try&nbsp;tauto;<br/>
&nbsp;&nbsp;try&nbsp;(destruct&nbsp;Hin&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hin</span>|[<span class="id" title="var">Hin</span>|<span class="id" title="var">Hin</span>]</span>&nbsp;||destruct&nbsp;Hin&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hin</span>|<span class="id" title="var">Hin</span></span>);<br/>
&nbsp;&nbsp;subst;&nbsp;simpl;&nbsp;try&nbsp;tauto;<br/>
&nbsp;&nbsp;repeat&nbsp;(apply&nbsp;difference_include&nbsp;in&nbsp;Hin;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">assumption</span></span>);<br/>
&nbsp;&nbsp;try&nbsp;(now&nbsp;apply&nbsp;Hnin)<br/>
end.<br/>
<br/>
Ltac&nbsp;equiv_tac&nbsp;:=<br/>
multimatch&nbsp;goal&nbsp;with<br/>
|&nbsp;Heq'&nbsp;:&nbsp;_•_&nbsp;≡&nbsp;_&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;fail<br/>
|&nbsp;Heq'&nbsp;:&nbsp;_&nbsp;≡&nbsp;_&nbsp;|-&nbsp;_&nbsp;≡&nbsp;_&nbsp;=&gt;<br/>
&nbsp;&nbsp;try&nbsp;(rewrite&nbsp;&lt;-&nbsp;difference_singleton;&nbsp;trivial);<br/>
&nbsp;&nbsp;rewrite&nbsp;Heq';<br/>
&nbsp;&nbsp;try&nbsp;(rewrite&nbsp;union_difference_L&nbsp;by&nbsp;trivial);<br/>
&nbsp;&nbsp;try&nbsp;(rewrite&nbsp;union_difference_R&nbsp;by&nbsp;trivial);<br/>
&nbsp;&nbsp;try&nbsp;ms<br/>
end.<br/>
<br/>
intros&nbsp;Hnin&nbsp;Hp.<br/>
remember&nbsp;(Γ&nbsp;⊎&nbsp;Δ)&nbsp;as&nbsp;Γ'&nbsp;eqn:HH.<br/>
assert&nbsp;(Heq:&nbsp;Γ'&nbsp;≡&nbsp;Γ&nbsp;⊎&nbsp;Δ)&nbsp;by&nbsp;ms.&nbsp;clear&nbsp;HH.<br/>
revert&nbsp;Heq.<br/>
dependent&nbsp;induction&nbsp;Hp&nbsp;generalizing&nbsp;Γ&nbsp;Δ&nbsp;Hnin;&nbsp;intro&nbsp;Heq;<br/>
try&nbsp;(apply&nbsp;env_add_inv&nbsp;in&nbsp;Heq;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">discriminate</span></span>);<br/>
<br/>
<span class="comment">(*&nbsp;try&nbsp;and&nbsp;solve&nbsp;the&nbsp;easy&nbsp;case&nbsp;where&nbsp;the&nbsp;main&nbsp;formula&nbsp;is&nbsp;on&nbsp;the&nbsp;left&nbsp;*)</span><br/>
try&nbsp;match&nbsp;goal&nbsp;with<br/>
|&nbsp;H&nbsp;:&nbsp;(?Γ0•?a•?b)&nbsp;≡&nbsp;Γ&nbsp;⊎&nbsp;Δ&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;idtac<br/>
|&nbsp;H&nbsp;:&nbsp;(?Γ0•?a)&nbsp;≡&nbsp;Γ&nbsp;⊎&nbsp;Δ&nbsp;|-&nbsp;_&nbsp;=&gt;&nbsp;rename&nbsp;H&nbsp;into&nbsp;Heq;<br/>
&nbsp;&nbsp;assert(Hin&nbsp;:&nbsp;a&nbsp;∈&nbsp;(Γ0•a))&nbsp;by&nbsp;ms;&nbsp;rewrite&nbsp;Heq&nbsp;in&nbsp;Hin;<br/>
&nbsp;&nbsp;pose(Heq'&nbsp;:=&nbsp;Heq);&nbsp;apply&nbsp;env_add_inv'&nbsp;in&nbsp;Heq';<br/>
&nbsp;&nbsp;try&nbsp;(case&nbsp;(decide&nbsp;(a&nbsp;∈&nbsp;Γ));&nbsp;intro&nbsp;Hin0;<br/>
&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">split</span>;</span> <span class="inlinecode"><span class="id" title="tactic">intros</span>;</span> <span class="inlinecode"><span class="id" title="var">exhibit</span></span> <span class="inlinecode"><span class="id" title="var">Hin0</span></span> <span class="inlinecode">1|</span>
   <span class="inlinecode"><span class="id" title="tactic">case</span></span> <span class="inlinecode">(<span class="id" title="var">decide</span></span> <span class="inlinecode">(<span class="id" title="var">a</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">Δ</span>));</span> <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">Hin0'</span>;</span>
  <span class="inlinecode">[|<span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">gmultiset_elem_of_disj_union</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Hin</span>;</span> <span class="inlinecode"><span class="id" title="var">exfalso</span>;</span> <span class="inlinecode"><span class="id" title="tactic">tauto</span>]</span>)<br/>
end;&nbsp;simpl.<br/>
<br/>
<span class="comment">(*&nbsp;Atom&nbsp;*)</span><br/>
-&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof.<br/>
-&nbsp;Atac'.&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;subst;&nbsp;<span class="inlinecode"><span class="id" title="var">exfalso</span>;</span> <span class="inlinecode"><span class="id" title="var">now</span></span> <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode">(<span class="id" title="var">Hnin</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">Hin0</span>)|</span>;&nbsp;auto&nbsp;with&nbsp;proof.<br/>
-&nbsp;split;&nbsp;Etac;&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;subst;&nbsp;try&nbsp;tauto;&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;Atac.&nbsp;repeat&nbsp;rewrite&nbsp;decide_True&nbsp;by&nbsp;trivial.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;+&nbsp;fold&nbsp;E.&nbsp;apply&nbsp;make_conj_sound_L,&nbsp;AndL.&nbsp;Atac.&nbsp;repeat&nbsp;rewrite&nbsp;decide_False&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Atac'.&nbsp;rewrite&nbsp;decide_False&nbsp;by&nbsp;trivial.&nbsp;apply&nbsp;Atom.<br/>
<span class="comment">(*&nbsp;ExFalso&nbsp;*)</span><br/>
-&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof.<br/>
-&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof.<br/>
-&nbsp;&nbsp;split;&nbsp;Etac;&nbsp;auto&nbsp;with&nbsp;proof.<br/>
<span class="comment">(*&nbsp;AndR&nbsp;*)</span><br/>
-&nbsp;destruct&nbsp;(IHHp1&nbsp;_&nbsp;_&nbsp;Hnin&nbsp;Heq)&nbsp;as&nbsp;(PE&nbsp;&amp;&nbsp;PEA).<br/>
&nbsp;&nbsp;destruct&nbsp;(IHHp2&nbsp;_&nbsp;_&nbsp;Hnin&nbsp;Heq)&nbsp;as&nbsp;(PE'&nbsp;&amp;&nbsp;PEA').<br/>
&nbsp;&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hocc.&nbsp;simpl&nbsp;in&nbsp;Hocc.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;AndR;&nbsp;erewrite&nbsp;E_irr;&nbsp;apply&nbsp;IHHp2&nbsp;||&nbsp;apply&nbsp;IHHp1;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;Atac'.&nbsp;apply&nbsp;make_conj_sound_R,&nbsp;AndR;&nbsp;erewrite&nbsp;E_irr;&nbsp;eassumption.<br/>
<span class="comment">(*&nbsp;AndL&nbsp;*)</span><br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;occ.&nbsp;equiv_tac.<br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;occ.&nbsp;equiv_tac.<br/>
-&nbsp;&nbsp;split.<br/>
&nbsp;&nbsp;&nbsp;+&nbsp;Etac.&nbsp;apply&nbsp;IHHp;&nbsp;auto.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;&nbsp;+&nbsp;Atac.&nbsp;Etac.&nbsp;apply&nbsp;IHHp;&nbsp;auto.&nbsp;equiv_tac.<br/>
<span class="comment">(*&nbsp;OrR1&nbsp;&amp;&nbsp;OrR2&nbsp;*)</span><br/>
-&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;OrR1.&nbsp;erewrite&nbsp;E_irr;&nbsp;apply&nbsp;IHHp;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;rewrite&nbsp;A_eq.&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrR2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrR1;&nbsp;erewrite&nbsp;E_irr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;auto.<br/>
-&nbsp;simpl.&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;OrR2.&nbsp;erewrite&nbsp;E_irr;&nbsp;apply&nbsp;IHHp;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;rewrite&nbsp;A_eq.&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrR2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_disj_sound_R,&nbsp;OrR2;&nbsp;erewrite&nbsp;E_irr.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;auto.<br/>
<span class="comment">(*&nbsp;OrL&nbsp;*)</span><br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;OrL;&nbsp;exch&nbsp;0.<br/>
&nbsp;+&nbsp;apply&nbsp;IHHp1;&nbsp;trivial.&nbsp;occ.&nbsp;equiv_tac.<br/>
&nbsp;+&nbsp;apply&nbsp;IHHp2;&nbsp;trivial.&nbsp;occ.&nbsp;equiv_tac.<br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;OrL;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;IHHp1.&nbsp;occ.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;IHHp2.&nbsp;occ.&nbsp;equiv_tac.<br/>
-&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;Etac.&nbsp;apply&nbsp;make_disj_sound_L,&nbsp;OrL;&nbsp;<span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">IHHp1</span>|</span> <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">IHHp2</span></span>;&nbsp;trivial;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Heq',&nbsp;union_difference_R&nbsp;by&nbsp;trivial;&nbsp;ms.<br/>
&nbsp;&nbsp;+&nbsp;Atac.&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_conj_sound_R,AndR,&nbsp;make_impl_sound_R.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="tactic">tauto</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;ImpR.&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="tactic">tauto</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
<span class="comment">(*&nbsp;ImpR&nbsp;*)</span><br/>
-&nbsp;destruct&nbsp;(IHHp&nbsp;Γ&nbsp;(Δ•φ))&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">IHa</span></span> <span class="inlinecode"><span class="id" title="var">IHb</span></span>;&nbsp;<span class="inlinecode"><span class="id" title="tactic">auto</span>|<span class="id" title="var">ms</span>|</span>.<br/>
&nbsp;&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hocc.&nbsp;apply&nbsp;ImpR.&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr.&nbsp;apply&nbsp;IHHp;&nbsp;auto.&nbsp;ms.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;+&nbsp;Atac'.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
<span class="comment">(*&nbsp;ImpLVar&nbsp;*)</span><br/>
-&nbsp;pose(Heq'&nbsp;:=&nbsp;Heq);&nbsp;apply&nbsp;env_add_inv'&nbsp;in&nbsp;Heq'.<br/>
&nbsp;&nbsp;pose(Heq''&nbsp;:=&nbsp;Heq');&nbsp;apply&nbsp;env_add_inv'&nbsp;in&nbsp;Heq''.<br/>
&nbsp;&nbsp;case&nbsp;(decide&nbsp;((Var&nbsp;p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Γ)).<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hin0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(Hocc'&nbsp;:=&nbsp;Hnin&nbsp;_&nbsp;Hin0).&nbsp;simpl&nbsp;in&nbsp;Hocc'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;(Var&nbsp;p0&nbsp;∈&nbsp;Γ));&nbsp;intro&nbsp;Hin1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;1:&nbsp;p0,&nbsp;(p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Γ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;(Hin2&nbsp;:&nbsp;Var&nbsp;p0&nbsp;∈&nbsp;Γ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p0</span></span> <span class="inlinecode">→</span> <span class="inlinecode">φ</span>})&nbsp;by&nbsp;(apply&nbsp;in_difference;&nbsp;trivial;&nbsp;discriminate).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;<span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">Hocc</span>|</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exhibit&nbsp;Hin0&nbsp;1;&nbsp;exhibit&nbsp;Hin2&nbsp;2;&nbsp;exch&nbsp;0;&nbsp;exch&nbsp;1;&nbsp;apply&nbsp;ImpLVar;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(peapply&nbsp;IHHp;&nbsp;trivial;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;assert(Hin0'&nbsp;:&nbsp;Var&nbsp;p0&nbsp;∈&nbsp;(Γ0•Var&nbsp;p0•(p0&nbsp;→&nbsp;φ)))&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;Heq&nbsp;in&nbsp;Hin0'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;(Var&nbsp;p0&nbsp;∈&nbsp;Δ));&nbsp;intro&nbsp;Hp0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">gmultiset_elem_of_disj_union</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Hin0'</span>;</span> <span class="inlinecode"><span class="id" title="var">exfalso</span>;</span> <span class="inlinecode"><span class="id" title="tactic">tauto</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;3:&nbsp;p0&nbsp;∈&nbsp;Δ&nbsp;;&nbsp;(p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Γ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;<span class="inlinecode"><span class="id" title="var">Etac</span>|<span class="id" title="var">Atac</span></span>;&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;exhibit&nbsp;Hin0&nbsp;1.&nbsp;apply&nbsp;make_conj_sound_L,&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLVar.&nbsp;exch&nbsp;1.&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|<span class="id" title="tactic">trivial</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;exhibit&nbsp;Hin0&nbsp;1.&nbsp;Etac.&nbsp;rewrite&nbsp;decide_False&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_conj_sound_L,&nbsp;AndL.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLVar.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp.&nbsp;occ.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;+&nbsp;intro.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;assert(Hin&nbsp;:&nbsp;(Var&nbsp;p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;(Γ0•Var&nbsp;p0•(p0&nbsp;→&nbsp;φ)))&nbsp;by&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Heq&nbsp;in&nbsp;Hin.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;((Var&nbsp;p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Δ));&nbsp;intro&nbsp;Hin0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">|<span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">gmultiset_elem_of_disj_union</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Hin</span>;</span> <span class="inlinecode"><span class="id" title="var">exfalso</span>;</span> <span class="inlinecode"><span class="id" title="tactic">tauto</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;(Var&nbsp;p0&nbsp;∈&nbsp;Γ));&nbsp;intro&nbsp;Hin1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;2:&nbsp;p0&nbsp;∈&nbsp;Γ&nbsp;;&nbsp;(p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Δ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;2&nbsp;exhibit&nbsp;Hin1&nbsp;1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;<span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">Hocc</span>|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Etac.&nbsp;case_decide;&nbsp;<span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">*|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpLVar.&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;occ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Heq',&nbsp;union_difference_R,&nbsp;&lt;-&nbsp;union_difference_L&nbsp;by&nbsp;trivial;&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Etac.&nbsp;case_decide;&nbsp;<span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">*|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpLVar.&nbsp;Atac.&nbsp;repeat&nbsp;case_decide;&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof;&nbsp;<span class="inlinecode"><span class="id" title="tactic">tauto</span>|</span> <span class="inlinecode"><span class="id" title="tactic">tauto</span>|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_conj_sound_R,&nbsp;AndR;&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof.&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Heq',&nbsp;union_difference_R,&nbsp;&lt;-&nbsp;union_difference_L&nbsp;by&nbsp;trivial;&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;assert(Hin':&nbsp;Var&nbsp;p0&nbsp;∈&nbsp;Γ&nbsp;⊎&nbsp;Δ)&nbsp;by&nbsp;(rewrite&nbsp;&lt;-&nbsp;Heq;&nbsp;ms).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;gmultiset_elem_of_disj_union&nbsp;in&nbsp;Hin'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;(Var&nbsp;p0&nbsp;∈&nbsp;Δ));&nbsp;intro&nbsp;Hin1';&nbsp;<span class="inlinecode">|<span class="id" title="var">exfalso</span>;</span> <span class="inlinecode"><span class="id" title="tactic">tauto</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;4:&nbsp;p0,(p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;Δ&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;(decide&nbsp;(p&nbsp;=&nbsp;p0));&nbsp;intro.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<span class="comment">(*&nbsp;subsubcase&nbsp;p&nbsp;=&nbsp;p0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subst.&nbsp;split;&nbsp;Etac;&nbsp;repeat&nbsp;rewrite&nbsp;decide_True&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">tauto</span>|<span class="id" title="var">equiv_tac</span>|<span class="id" title="tactic">trivial</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;Atac.&nbsp;repeat&nbsp;rewrite&nbsp;decide_True&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">tauto</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<span class="comment">(*&nbsp;subsubcase&nbsp;p&nbsp;≠&nbsp;p0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert&nbsp;((p0&nbsp;→&nbsp;φ)&nbsp;∈&nbsp;(Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p0</span></span>}))&nbsp;by&nbsp;(apply&nbsp;in_difference;&nbsp;trivial;&nbsp;discriminate).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert((Γ0•Var&nbsp;p0•φ)&nbsp;≡&nbsp;(Γ•Var&nbsp;p0)&nbsp;⊎&nbsp;(Δ&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p0</span></span>}&nbsp;∖&nbsp;{<span class="inlinecode"><span class="id" title="var">p0</span></span> <span class="inlinecode">→</span> <span class="inlinecode">φ</span>}•φ)).&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(assoc&nbsp;disj_union).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;equiv_disj_union_compat_r.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(comm&nbsp;disj_union&nbsp;Γ&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p0</span></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;(assoc&nbsp;disj_union).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(comm&nbsp;disj_union&nbsp;{<span class="inlinecode"><span class="id" title="var">Var</span></span> <span class="inlinecode"><span class="id" title="var">p0</span></span>}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;equiv_disj_union_compat_r.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;Heq''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;union_difference_R&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;union_difference_R.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;in_difference.&nbsp;discriminate.&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="comment">(*&nbsp;not&nbsp;pretty&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split;&nbsp;Etac;&nbsp;rewrite&nbsp;decide_False&nbsp;by&nbsp;trivial;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_conj_sound_L,&nbsp;AndL;&nbsp;exch&nbsp;0;&nbsp;Etac;&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;try&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpLVar.&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;occ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;Atac.&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;try&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpLVar.&nbsp;Atac;&nbsp;case&nbsp;decide;&nbsp;intro;&nbsp;try&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;make_conj_sound_R,&nbsp;AndR;&nbsp;auto&nbsp;2&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;occ.<br/>
<span class="comment">(*&nbsp;ImpLAnd&nbsp;*)</span><br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLAnd.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;trivial;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
-&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpLAnd.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;trivial;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
-&nbsp;split;&nbsp;Etac.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;+&nbsp;Atac.&nbsp;simpl.&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;equiv_tac.<br/>
<span class="comment">(*&nbsp;ImpLOr&nbsp;*)</span><br/>
-&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpLOr.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|<span class="id" title="tactic">trivial</span></span>.<br/>
-&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpLOr.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
-&nbsp;split;&nbsp;Etac.<br/>
&nbsp;&nbsp;+&nbsp;&nbsp;apply&nbsp;IHHp;&nbsp;trivial.&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;+&nbsp;&nbsp;Atac.&nbsp;apply&nbsp;IHHp;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
<span class="comment">(*&nbsp;ImpLImp&nbsp;*)</span><br/>
-&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;1:&nbsp;((φ1&nbsp;→&nbsp;φ2)&nbsp;→&nbsp;φ3)&nbsp;∈&nbsp;Γ&nbsp;*)</span><br/>
&nbsp;&nbsp;assert(ψ&nbsp;≠&nbsp;Var&nbsp;p)&nbsp;by&nbsp;(intro;&nbsp;subst;&nbsp;simpl&nbsp;in&nbsp;*;&nbsp;tauto).<br/>
&nbsp;&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpLImp;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;+&nbsp;erewrite&nbsp;E_irr.&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;apply&nbsp;Hnin&nbsp;in&nbsp;Hin0.&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;erewrite&nbsp;E_irr.&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|<span class="id" title="tactic">trivial</span></span>.<br/>
-&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpLImp;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;+&nbsp;assert(IH:&nbsp;(Γ0•(φ2&nbsp;→&nbsp;φ3))&nbsp;≡&nbsp;(Γ&nbsp;∖&nbsp;{<span class="inlinecode">(φ1</span> <span class="inlinecode">→</span> <span class="inlinecode">φ2)</span> <span class="inlinecode">→</span> <span class="inlinecode">φ3</span>}•(φ2&nbsp;→&nbsp;φ3))&nbsp;⊎&nbsp;Δ)&nbsp;by&nbsp;equiv_tac.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr.&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|</span> <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;apply&nbsp;Hnin&nbsp;in&nbsp;Hin0.&nbsp;simpl&nbsp;in&nbsp;Hin0.&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
-&nbsp;<span class="comment">(*&nbsp;subcase&nbsp;2:&nbsp;((φ1&nbsp;→&nbsp;φ2)&nbsp;→&nbsp;φ3)&nbsp;∈&nbsp;Δ&nbsp;*)</span><br/>
&nbsp;&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;Etac.&nbsp;apply&nbsp;make_impl_sound_L2'.&nbsp;apply&nbsp;ImpLImp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;ImpR.&nbsp;foldEA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(E_irr&nbsp;(φ1&nbsp;→&nbsp;φ2)).&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|</span> <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>.<br/>
&nbsp;&nbsp;+&nbsp;Atac.&nbsp;apply&nbsp;make_conj_sound_R,&nbsp;AndR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;foldEA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(E_irr&nbsp;(φ1&nbsp;→&nbsp;φ2)).&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Etac.&nbsp;simpl.&nbsp;apply&nbsp;make_impl_sound_L2',&nbsp;ImpLImp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;ImpR.&nbsp;foldEA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;(E_irr&nbsp;(φ1&nbsp;→&nbsp;φ2)).&nbsp;apply&nbsp;IHHp1;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;IHHp2.&nbsp;occ.&nbsp;equiv_tac.<br/>
-&nbsp;<span class="comment">(*&nbsp;ImpBox,&nbsp;external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;destruct&nbsp;(open_boxes_case&nbsp;Δ)&nbsp;as&nbsp;<span class="inlinecode">[<span class="id" title="var">θ</span></span> <span class="inlinecode"><span class="id" title="var">Hθ</span>]</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hequiv</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;contraction.&nbsp;Etac.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;box_tac.&nbsp;box_tac.&nbsp;exch&nbsp;2;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;foldEA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;occ.&nbsp;&nbsp;intro&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Heq'.&nbsp;assert(Hθ'&nbsp;:=&nbsp;In_open_boxes&nbsp;_&nbsp;_&nbsp;Hθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl&nbsp;in&nbsp;*.&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;&lt;-&nbsp;difference_singleton&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assert((□&nbsp;φ1&nbsp;→&nbsp;φ2)&nbsp;∈&nbsp;⊗Γ)&nbsp;by&nbsp;auto&nbsp;with&nbsp;proof.&nbsp;rewrite&nbsp;union_difference_L&nbsp;by&nbsp;trivial.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro&nbsp;HF.&nbsp;apply&nbsp;(Hnin&nbsp;_&nbsp;Hin0).&nbsp;simpl.&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span>|</span> <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>.<br/>
&nbsp;&nbsp;+&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;box_tac.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;open_box_L.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;occ.&nbsp;intro&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Hequiv,&nbsp;Heq'.&nbsp;assert(Hθ'&nbsp;:=&nbsp;In_open_boxes&nbsp;_&nbsp;_&nbsp;Hin0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;union_difference_L&nbsp;by&nbsp;trivial.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro&nbsp;HF.&nbsp;apply&nbsp;(Hnin&nbsp;_&nbsp;Hin0).&nbsp;simpl.&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode"><span class="id" title="var">Heq'</span>;</span> <span class="inlinecode"><span class="id" title="var">equiv_tac</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="tactic">trivial</span></span>.<br/>
-&nbsp;destruct&nbsp;(open_boxes_case&nbsp;Δ)&nbsp;as&nbsp;<span class="inlinecode">[<span class="id" title="var">θ</span></span> <span class="inlinecode"><span class="id" title="var">Hθ</span>]</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hequiv</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;apply&nbsp;contraction.&nbsp;Etac.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0;&nbsp;apply&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;box_tac.&nbsp;box_tac.&nbsp;exch&nbsp;2;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;foldEA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;occ.&nbsp;intro&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Heq'.&nbsp;assert(Hθ'&nbsp;:=&nbsp;In_open_boxes&nbsp;_&nbsp;_&nbsp;Hin0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;union_difference_L&nbsp;by&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rewrite&nbsp;&lt;-&nbsp;difference_singleton&nbsp;by&nbsp;auto&nbsp;with&nbsp;proof.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro&nbsp;HF.&nbsp;apply&nbsp;(Hnin&nbsp;_&nbsp;Hin0).&nbsp;simpl.&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;weakening.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp2&nbsp;;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
&nbsp;&nbsp;+&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;ImpBox.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;box_tac.&nbsp;exch&nbsp;1;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;open_box_L.&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;occ.&nbsp;intro&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Heq'.&nbsp;assert(Hθ'&nbsp;:=&nbsp;In_open_boxes&nbsp;_&nbsp;_&nbsp;Hin0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;union_difference_L&nbsp;by&nbsp;trivial.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro&nbsp;HF.&nbsp;apply&nbsp;(Hnin&nbsp;_&nbsp;Hin0).&nbsp;simpl.&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;ψ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;IHHp2.&nbsp;occ.&nbsp;rewrite&nbsp;Heq'.&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;equiv_tac&nbsp;should&nbsp;do&nbsp;that&nbsp;*)</span>&nbsp;equiv_tac.<br/>
-&nbsp;split;&nbsp;Etac.<br/>
&nbsp;&nbsp;+&nbsp;foldEA.&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;do&nbsp;2&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1)&nbsp;by&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;intros&nbsp;φ0&nbsp;Hin1&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;rewrite&nbsp;Heq'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;union_difference_R&nbsp;by&nbsp;auto&nbsp;with&nbsp;proof.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;IHHp2.&nbsp;occ.&nbsp;equiv_tac.&nbsp;trivial.<br/>
&nbsp;&nbsp;+&nbsp;foldEA.&nbsp;Atac.&nbsp;&nbsp;apply&nbsp;AndR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;do&nbsp;2&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;intros&nbsp;φ0&nbsp;Hin1&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;rewrite&nbsp;Heq',&nbsp;union_difference_R,&nbsp;open_boxes_disj_union,&nbsp;open_boxes_remove&nbsp;by&nbsp;trivial.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;apply&nbsp;BoxR.&nbsp;box_tac.&nbsp;do&nbsp;2&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.&nbsp;foldEA.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1)&nbsp;by&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;intros&nbsp;φ0&nbsp;Hin1&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hin1)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;rewrite&nbsp;Heq',&nbsp;union_difference_R,&nbsp;open_boxes_disj_union,&nbsp;open_boxes_remove&nbsp;by&nbsp;trivial.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;foldEA.&nbsp;apply&nbsp;make_impl_sound_L,&nbsp;ImpBox.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;do&nbsp;2&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**&nbsp;intros&nbsp;φ0&nbsp;Hφ0&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hφ0)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**&nbsp;&nbsp;rewrite&nbsp;Heq'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;rewrite&nbsp;union_difference_R.&nbsp;ms.&nbsp;auto&nbsp;with&nbsp;proof.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++&nbsp;apply&nbsp;IHHp2;&nbsp;<span class="inlinecode"><span class="id" title="var">occ</span>|<span class="id" title="var">equiv_tac</span></span>.<br/>
-&nbsp;split.<br/>
&nbsp;&nbsp;+&nbsp;intro&nbsp;Hocc.&nbsp;destruct&nbsp;(open_boxes_case&nbsp;Δ)&nbsp;as&nbsp;<span class="inlinecode">[<span class="id" title="var">θ</span></span> <span class="inlinecode"><span class="id" title="var">Hθ</span>]</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">Hequiv</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Etac.&nbsp;foldEA.&nbsp;apply&nbsp;BoxR.&nbsp;box_tac.&nbsp;exch&nbsp;0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ);&nbsp;apply&nbsp;IHHp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intros&nbsp;φ0&nbsp;Hφ0&nbsp;HF.&nbsp;apply&nbsp;gmultiset_elem_of_disj_union&nbsp;in&nbsp;Hφ0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hφ0&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">H</span>φ0|</span>;&nbsp;<span class="inlinecode">|<span class="id" title="var">ms</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hφ0)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Heq.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat&nbsp;rewrite&nbsp;open_boxes_remove&nbsp;by&nbsp;ms.&nbsp;rewrite&nbsp;open_boxes_disj_union.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simpl.&nbsp;auto&nbsp;with&nbsp;proof.&nbsp;rewrite&nbsp;&lt;-&nbsp;difference_singleton&nbsp;by&nbsp;auto&nbsp;with&nbsp;proof.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;trivial.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;BoxR.&nbsp;box_tac.&nbsp;exch&nbsp;0.&nbsp;apply&nbsp;open_box_L.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intros&nbsp;φ0&nbsp;Hφ0&nbsp;HF.&nbsp;apply&nbsp;gmultiset_elem_of_disj_union&nbsp;in&nbsp;Hφ0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hφ0&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">H</span>φ0|</span>;&nbsp;<span class="inlinecode">|<span class="id" title="var">ms</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hφ0)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;rewrite&nbsp;Hequiv,&nbsp;Heq.&nbsp;rewrite&nbsp;open_boxes_disj_union.&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;trivial.<br/>
&nbsp;&nbsp;+&nbsp;Atac'.&nbsp;foldEA.&nbsp;apply&nbsp;BoxR.&nbsp;box_tac.&nbsp;apply&nbsp;weakening.&nbsp;erewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;φ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;weakening.&nbsp;apply&nbsp;make_impl_sound_R,&nbsp;ImpR.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;IHHp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;φ0&nbsp;Hφ0&nbsp;HF.&nbsp;destruct&nbsp;(occurs_in_open_boxes&nbsp;_&nbsp;_&nbsp;_&nbsp;HF&nbsp;Hφ0)&nbsp;as&nbsp;(θ0&nbsp;&amp;&nbsp;Hθ0&nbsp;&amp;&nbsp;Hinθ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(Hnin&nbsp;θ0);&nbsp;ms.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;rewrite&nbsp;Heq,&nbsp;open_boxes_disj_union.&nbsp;ms.<br/>
Qed.<br/>
<br/>
End&nbsp;PropQuantCorrect.<br/>
<br/>
End&nbsp;Correctness.<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="ISL.PropQuantifiers.html#UniformInterpolation"><span class="id" title="section">UniformInterpolation</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
<span class="comment">(**&nbsp;*&nbsp;Main&nbsp;uniform&nbsp;interpolation&nbsp;Theorem&nbsp;*)</span><br/>
<br/>
Open&nbsp;Scope&nbsp;type_scope.<br/>
<br/>
<br/>
Lemma&nbsp;E_of_empty&nbsp;p&nbsp;φ&nbsp;:&nbsp;E&nbsp;p&nbsp;(∅,&nbsp;φ)&nbsp;=&nbsp;(Implies&nbsp;Bot&nbsp;Bot).<br/>
Proof.<br/>
&nbsp;&nbsp;rewrite&nbsp;E_eq.&nbsp;rewrite&nbsp;in_map_empty.&nbsp;now&nbsp;unfold&nbsp;conjunction,&nbsp;nodup,&nbsp;foldl.<br/>
Qed.<br/>
<br/>
Definition&nbsp;vars_incl&nbsp;φ&nbsp;l&nbsp;:=&nbsp;forall&nbsp;x,&nbsp;occurs_in&nbsp;x&nbsp;φ&nbsp;-&gt;&nbsp;In&nbsp;x&nbsp;l.<br/>
<br/>
<span class="comment">(**&nbsp;&nbsp;The&nbsp;overall&nbsp;correctness&nbsp;result&nbsp;is&nbsp;summarized&nbsp;here.&nbsp;*)</span><br/>
<br/>
Theorem&nbsp;iSL_uniform_interpolation&nbsp;p&nbsp;V:&nbsp;p&nbsp;∉&nbsp;V&nbsp;-&gt;<br/>
&nbsp;&nbsp;∀&nbsp;φ,&nbsp;vars_incl&nbsp;φ&nbsp;(p&nbsp;::&nbsp;V)&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(vars_incl&nbsp;(Ef&nbsp;p&nbsp;φ)&nbsp;V)<br/>
&nbsp;&nbsp;*&nbsp;({<span class="inlinecode">φ</span>}&nbsp;⊢&nbsp;(Ef&nbsp;p&nbsp;φ))<br/>
&nbsp;&nbsp;*&nbsp;(∀&nbsp;ψ,&nbsp;vars_incl&nbsp;ψ&nbsp;V&nbsp;-&gt;&nbsp;{<span class="inlinecode">φ</span>}&nbsp;⊢&nbsp;ψ&nbsp;-&gt;&nbsp;{<span class="inlinecode"><span class="id" title="var">Ef</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">φ</span>}&nbsp;⊢&nbsp;ψ)<br/>
&nbsp;&nbsp;*&nbsp;(vars_incl&nbsp;(Af&nbsp;p&nbsp;φ)&nbsp;V)<br/>
&nbsp;&nbsp;*&nbsp;({<span class="inlinecode"><span class="id" title="var">Af</span></span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">φ</span>}&nbsp;⊢&nbsp;φ)<br/>
&nbsp;&nbsp;*&nbsp;(∀&nbsp;θ,&nbsp;vars_incl&nbsp;θ&nbsp;V&nbsp;-&gt;&nbsp;{<span class="inlinecode"><span class="id" title="var">θ</span></span>}&nbsp;⊢&nbsp;φ&nbsp;-&gt;&nbsp;{<span class="inlinecode"><span class="id" title="var">θ</span></span>}&nbsp;⊢&nbsp;Af&nbsp;p&nbsp;φ).<br/>
Proof.<br/>
intros&nbsp;Hp&nbsp;φ&nbsp;Hvarsφ;&nbsp;repeat&nbsp;split.<br/>
<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;x&nbsp;Hx.&nbsp;apply&nbsp;(EA_vars&nbsp;p&nbsp;_&nbsp;⊥&nbsp;x)&nbsp;in&nbsp;Hx.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hx&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hneq</span></span> <span class="inlinecode">[<span class="id" title="var">θ</span></span> <span class="inlinecode">[<span class="id" title="var">Hθ</span></span> <span class="inlinecode"><span class="id" title="var">Hocc</span>]]</span>.&nbsp;apply&nbsp;gmultiset_elem_of_singleton&nbsp;in&nbsp;Hθ.&nbsp;subst.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;Hvarsφ&nbsp;in&nbsp;Hocc.&nbsp;destruct&nbsp;Hocc;&nbsp;subst;&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;apply&nbsp;entail_correct.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;ψ&nbsp;Hψ&nbsp;Hyp.&nbsp;rewrite&nbsp;elem_of_list_In&nbsp;in&nbsp;Hp.&nbsp;unfold&nbsp;Ef.&nbsp;rewrite&nbsp;E_irr&nbsp;with&nbsp;(ϕ'&nbsp;:=&nbsp;ψ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;peapply&nbsp;(pq_correct&nbsp;p&nbsp;∅&nbsp;{<span class="inlinecode">φ</span>}&nbsp;ψ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intros&nbsp;θ&nbsp;Hin.&nbsp;inversion&nbsp;Hin.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;peapply&nbsp;Hyp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;intro&nbsp;HF.&nbsp;apply&nbsp;Hψ&nbsp;in&nbsp;HF.&nbsp;tauto.<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;x&nbsp;Hx.&nbsp;apply&nbsp;(EA_vars&nbsp;p&nbsp;∅&nbsp;φ&nbsp;x)&nbsp;in&nbsp;Hx.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destruct&nbsp;Hx&nbsp;as&nbsp;<span class="inlinecode"><span class="id" title="var">Hneq</span></span> <span class="inlinecode">[<span class="id" title="var">Hin</span></span> <span class="inlinecode">|</span> <span class="inlinecode">[<span class="id" title="var">θ</span></span> <span class="inlinecode">[<span class="id" title="var">Hθ</span></span> <span class="inlinecode"><span class="id" title="var">Hocc</span>]]]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;apply&nbsp;Hvarsφ&nbsp;in&nbsp;Hin.&nbsp;destruct&nbsp;Hin;&nbsp;subst;&nbsp;tauto.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inversion&nbsp;Hθ.<br/>
&nbsp;&nbsp;+&nbsp;peapply&nbsp;(entail_correct&nbsp;p&nbsp;∅).<br/>
&nbsp;&nbsp;+&nbsp;intros&nbsp;ψ&nbsp;Hψ&nbsp;Hyp.&nbsp;rewrite&nbsp;elem_of_list_In&nbsp;in&nbsp;Hp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;(TopL_rev&nbsp;_&nbsp;⊥).&nbsp;peapply&nbsp;(pq_correct&nbsp;p&nbsp;{<span class="inlinecode">ψ</span>}&nbsp;∅&nbsp;φ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;intros&nbsp;φ0&nbsp;Hφ0.&nbsp;apply&nbsp;gmultiset_elem_of_singleton&nbsp;in&nbsp;Hφ0.&nbsp;subst.&nbsp;auto&nbsp;with&nbsp;*.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;peapply&nbsp;Hyp.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;now&nbsp;rewrite&nbsp;E_of_empty.<br/>
Qed.<br/>
<br/>
*)</span></div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
